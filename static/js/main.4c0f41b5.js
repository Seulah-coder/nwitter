/*! For license information please see main.4c0f41b5.js.LICENSE.txt */
!function(){var e={610:function(e,t,n){"use strict";n.r(t),n.d(t,{createBrowserHistory:function(){return T},createHashHistory:function(){return A},createLocation:function(){return y},createMemoryHistory:function(){return R},createPath:function(){return v},locationsAreEqual:function(){return m},parsePath:function(){return p}});var r=n(462);function i(e){return"/"===e.charAt(0)}function a(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var o=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],o=t&&t.split("/")||[],u=e&&i(e),s=t&&i(t),c=u||s;if(e&&i(e)?o=r:r.length&&(o.pop(),o=o.concat(r)),!o.length)return"/";if(o.length){var l=o[o.length-1];n="."===l||".."===l||""===l}else n=!1;for(var f=0,h=o.length;h>=0;h--){var d=o[h];"."===d?a(o,h):".."===d?(a(o,h),f++):f&&(a(o,h),f--)}if(!c)for(;f--;f)o.unshift("..");!c||""===o[0]||o[0]&&i(o[0])||o.unshift("");var p=o.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function u(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var s=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=u(t),i=u(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1},c=n(554);function l(e){return"/"===e.charAt(0)?e:"/"+e}function f(e){return"/"===e.charAt(0)?e.substr(1):e}function h(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function d(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function p(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}function v(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function y(e,t,n,i){var a;"string"===typeof e?(a=p(e)).state=t:(void 0===(a=(0,r.Z)({},e)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(u){throw u instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):u}return n&&(a.key=n),i?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=o(a.pathname,i.pathname)):a.pathname=i.pathname:a.pathname||(a.pathname="/"),a}function m(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&s(e.state,t.state)}function g(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var k=!("undefined"===typeof window||!window.document||!window.document.createElement);function _(e,t){t(window.confirm(e))}var w="popstate",b="hashchange";function x(){try{return window.history.state||{}}catch(e){return{}}}function T(e){void 0===e&&(e={}),k||(0,c.Z)(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),a=e,o=a.forceRefresh,u=void 0!==o&&o,s=a.getUserConfirmation,f=void 0===s?_:s,p=a.keyLength,m=void 0===p?6:p,T=e.basename?d(l(e.basename)):"";function E(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return T&&(a=h(a,T)),y(a,r,n)}function I(){return Math.random().toString(36).substr(2,m)}var C=g();function S(e){(0,r.Z)(V,e),V.length=t.length,C.notifyListeners(V.location,V.action)}function P(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||R(E(e.state))}function A(){R(E(x()))}var N=!1;function R(e){if(N)N=!1,S();else{C.confirmTransitionTo(e,"POP",f,(function(t){t?S({action:"POP",location:e}):function(e){var t=V.location,n=D.indexOf(t.key);-1===n&&(n=0);var r=D.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(N=!0,M(i))}(e)}))}}var O=E(x()),D=[O.key];function L(e){return T+v(e)}function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?(window.addEventListener(w,P),i&&window.addEventListener(b,A)):0===F&&(window.removeEventListener(w,P),i&&window.removeEventListener(b,A))}var j=!1;var V={length:t.length,action:"POP",location:O,createHref:L,push:function(e,r){var i="PUSH",a=y(e,r,I(),V.location);C.confirmTransitionTo(a,i,f,(function(e){if(e){var r=L(a),o=a.key,s=a.state;if(n)if(t.pushState({key:o,state:s},null,r),u)window.location.href=r;else{var c=D.indexOf(V.location.key),l=D.slice(0,c+1);l.push(a.key),D=l,S({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=y(e,r,I(),V.location);C.confirmTransitionTo(a,i,f,(function(e){if(e){var r=L(a),o=a.key,s=a.state;if(n)if(t.replaceState({key:o,state:s},null,r),u)window.location.replace(r);else{var c=D.indexOf(V.location.key);-1!==c&&(D[c]=a.key),S({action:i,location:a})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=C.setPrompt(e);return j||(U(1),j=!0),function(){return j&&(j=!1,U(-1)),t()}},listen:function(e){var t=C.appendListener(e);return U(1),function(){U(-1),t()}}};return V}var E="hashchange",I={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+f(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:f,decodePath:l},slash:{encodePath:l,decodePath:l}};function C(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function S(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function P(e){window.location.replace(C(window.location.href)+"#"+e)}function A(e){void 0===e&&(e={}),k||(0,c.Z)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),i=n.getUserConfirmation,a=void 0===i?_:i,o=n.hashType,u=void 0===o?"slash":o,s=e.basename?d(l(e.basename)):"",f=I[u],p=f.encodePath,m=f.decodePath;function w(){var e=m(S());return s&&(e=h(e,s)),y(e)}var b=g();function x(e){(0,r.Z)(V,e),V.length=t.length,b.notifyListeners(V.location,V.action)}var T=!1,A=null;function N(){var e,t,n=S(),r=p(n);if(n!==r)P(r);else{var i=w(),o=V.location;if(!T&&(t=i,(e=o).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(A===v(i))return;A=null,function(e){if(T)T=!1,x();else{var t="POP";b.confirmTransitionTo(e,t,a,(function(n){n?x({action:t,location:e}):function(e){var t=V.location,n=L.lastIndexOf(v(t));-1===n&&(n=0);var r=L.lastIndexOf(v(e));-1===r&&(r=0);var i=n-r;i&&(T=!0,M(i))}(e)}))}}(i)}}var R=S(),O=p(R);R!==O&&P(O);var D=w(),L=[v(D)];function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?window.addEventListener(E,N):0===F&&window.removeEventListener(E,N)}var j=!1;var V={length:t.length,action:"POP",location:D,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=C(window.location.href)),n+"#"+p(s+v(e))},push:function(e,t){var n="PUSH",r=y(e,void 0,void 0,V.location);b.confirmTransitionTo(r,n,a,(function(e){if(e){var t=v(r),i=p(s+t);if(S()!==i){A=t,function(e){window.location.hash=e}(i);var a=L.lastIndexOf(v(V.location)),o=L.slice(0,a+1);o.push(t),L=o,x({action:n,location:r})}else x()}}))},replace:function(e,t){var n="REPLACE",r=y(e,void 0,void 0,V.location);b.confirmTransitionTo(r,n,a,(function(e){if(e){var t=v(r),i=p(s+t);S()!==i&&(A=t,P(i));var a=L.indexOf(v(V.location));-1!==a&&(L[a]=t),x({action:n,location:r})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=b.setPrompt(e);return j||(U(1),j=!0),function(){return j&&(j=!1,U(-1)),t()}},listen:function(e){var t=b.appendListener(e);return U(1),function(){U(-1),t()}}};return V}function N(e,t,n){return Math.min(Math.max(e,t),n)}function R(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,i=t.initialEntries,a=void 0===i?["/"]:i,o=t.initialIndex,u=void 0===o?0:o,s=t.keyLength,c=void 0===s?6:s,l=g();function f(e){(0,r.Z)(_,e),_.length=_.entries.length,l.notifyListeners(_.location,_.action)}function h(){return Math.random().toString(36).substr(2,c)}var d=N(u,0,a.length-1),p=a.map((function(e){return y(e,void 0,"string"===typeof e?h():e.key||h())})),m=v;function k(e){var t=N(_.index+e,0,_.entries.length-1),r=_.entries[t];l.confirmTransitionTo(r,"POP",n,(function(e){e?f({action:"POP",location:r,index:t}):f()}))}var _={length:p.length,action:"POP",location:p[d],index:d,entries:p,createHref:m,push:function(e,t){var r="PUSH",i=y(e,t,h(),_.location);l.confirmTransitionTo(i,r,n,(function(e){if(e){var t=_.index+1,n=_.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),f({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=y(e,t,h(),_.location);l.confirmTransitionTo(i,r,n,(function(e){e&&(_.entries[_.index]=i,f({action:r,location:i}))}))},go:k,goBack:function(){k(-1)},goForward:function(){k(1)},canGo:function(e){var t=_.index+e;return t>=0&&t<_.entries.length},block:function(e){return void 0===e&&(e=!1),l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return _}},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function b(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return b(e)||w(e)===l},t.isConcurrentMode=b,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===_||e.$$typeof===m)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var a,o,u=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var c in a=Object(arguments[s]))n.call(a,c)&&(u[c]=a[c]);if(t){o=t(a);for(var l=0;l<o.length;l++)r.call(a,o[l])&&(u[o[l]]=a[o[l]])}}return u}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));function u(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var s=!1,c=null,l=!1,f=null,h={onError:function(e){s=!0,c=e}};function d(e,t,n,r,i,a,o,l,f){s=!1,c=null,u.apply(h,arguments)}var p=null,v=null,y=null;function m(e,t,n){var r=e.type||"unknown-event";e.currentTarget=y(n),function(e,t,n,r,i,a,u,h,p){if(d.apply(this,arguments),s){if(!s)throw Error(o(198));var v=c;s=!1,c=null,l||(l=!0,f=v)}}(r,t,void 0,e),e.currentTarget=null}var g=null,k={};function _(){if(g)for(var e in k){var t=k[e],n=g.indexOf(e);if(!(-1<n))throw Error(o(96,e));if(!b[n]){if(!t.extractEvents)throw Error(o(97,e));for(var r in b[n]=t,n=t.eventTypes){var i=void 0,a=n[r],u=t,s=r;if(x.hasOwnProperty(s))throw Error(o(99,s));x[s]=a;var c=a.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&w(c[i],u,s);i=!0}else a.registrationName?(w(a.registrationName,u,s),i=!0):i=!1;if(!i)throw Error(o(98,r,e))}}}}function w(e,t,n){if(T[e])throw Error(o(100,e));T[e]=t,E[e]=t.eventTypes[n].dependencies}var b=[],x={},T={},E={};function I(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!k.hasOwnProperty(t)||k[t]!==r){if(k[t])throw Error(o(102,t));k[t]=r,n=!0}}n&&_()}var C=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),S=null,P=null,A=null;function N(e){if(e=v(e)){if("function"!==typeof S)throw Error(o(280));var t=e.stateNode;t&&(t=p(t),S(e.stateNode,e.type,t))}}function R(e){P?A?A.push(e):A=[e]:P=e}function O(){if(P){var e=P,t=A;if(A=P=null,N(e),t)for(e=0;e<t.length;e++)N(t[e])}}function D(e,t){return e(t)}function L(e,t,n,r,i){return e(t,n,r,i)}function M(){}var F=D,U=!1,j=!1;function V(){null===P&&null===A||(M(),O())}function q(e,t,n){if(j)return e(t,n);j=!0;try{return F(e,t,n)}finally{j=!1,V()}}var z=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,B=Object.prototype.hasOwnProperty,W={},K={};function H(e,t,n,r,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){G[e]=new H(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];G[t]=new H(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){G[e]=new H(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){G[e]=new H(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){G[e]=new H(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){G[e]=new H(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){G[e]=new H(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){G[e]=new H(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){G[e]=new H(e,5,!1,e.toLowerCase(),null,!1)}));var Q=/[\-:]([a-z])/g;function Y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Q,Y);G[t]=new H(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Q,Y);G[t]=new H(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Q,Y);G[t]=new H(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){G[e]=new H(e,1,!1,e.toLowerCase(),null,!1)})),G.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){G[e]=new H(e,1,!1,e.toLowerCase(),null,!0)}));var $=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function J(e,t,n,r){var i=G.hasOwnProperty(t)?G[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!B.call(K,e)||!B.call(W,e)&&(z.test(e)?K[e]=!0:(W[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}$.hasOwnProperty("ReactCurrentDispatcher")||($.ReactCurrentDispatcher={current:null}),$.hasOwnProperty("ReactCurrentBatchConfig")||($.ReactCurrentBatchConfig={suspense:null});var X=/^(.*)[\\\/]/,Z="function"===typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,re=Z?Symbol.for("react.strict_mode"):60108,ie=Z?Symbol.for("react.profiler"):60114,ae=Z?Symbol.for("react.provider"):60109,oe=Z?Symbol.for("react.context"):60110,ue=Z?Symbol.for("react.concurrent_mode"):60111,se=Z?Symbol.for("react.forward_ref"):60112,ce=Z?Symbol.for("react.suspense"):60113,le=Z?Symbol.for("react.suspense_list"):60120,fe=Z?Symbol.for("react.memo"):60115,he=Z?Symbol.for("react.lazy"):60116,de=Z?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function ve(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function ye(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case ce:return"Suspense";case le:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case oe:return"Context.Consumer";case ae:return"Context.Provider";case se:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case fe:return ye(e.type);case de:return ye(e.render);case he:if(e=1===e._status?e._result:null)return ye(e)}return null}function me(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,a=ye(e.type);n=null,r&&(n=ye(r.type)),r=a,a="",i?a=" (at "+i.fileName.replace(X,"")+":"+i.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+a}t+=n,e=e.return}while(e);return t}function ge(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ke(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function _e(e){e._valueTracker||(e._valueTracker=function(e){var t=ke(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function we(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ke(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function be(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function xe(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ge(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Te(e,t){null!=(t=t.checked)&&J(e,"checked",t,!1)}function Ee(e,t){Te(e,t);var n=ge(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Ce(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ce(e,t.type,ge(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Ce(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Se(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Pe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ge(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ne(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ge(n)}}function Re(e,t){var n=ge(t.value),r=ge(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var De="http://www.w3.org/1999/xhtml",Le="http://www.w3.org/2000/svg";function Me(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Me(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ue,je,Ve=(je=function(e,t){if(e.namespaceURI!==Le||"innerHTML"in e)e.innerHTML=t;else{for((Ue=Ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return je(e,t)}))}:je);function qe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function ze(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Be={animationend:ze("Animation","AnimationEnd"),animationiteration:ze("Animation","AnimationIteration"),animationstart:ze("Animation","AnimationStart"),transitionend:ze("Transition","TransitionEnd")},We={},Ke={};function He(e){if(We[e])return We[e];if(!Be[e])return e;var t,n=Be[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ke)return We[e]=n[t];return e}C&&(Ke=document.createElement("div").style,"AnimationEvent"in window||(delete Be.animationend.animation,delete Be.animationiteration.animation,delete Be.animationstart.animation),"TransitionEvent"in window||delete Be.transitionend.transition);var Ge=He("animationend"),Qe=He("animationiteration"),Ye=He("animationstart"),$e=He("transitionend"),Je="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xe=new("function"===typeof WeakMap?WeakMap:Map);function Ze(e){var t=Xe.get(e);return void 0===t&&(t=new Map,Xe.set(e,t)),t}function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(o(188))}function rt(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return nt(i),e;if(a===r)return nt(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function it(e,t){if(null==t)throw Error(o(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function at(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var ot=null;function ut(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)m(e,t[r],n[r]);else t&&m(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function st(e){if(null!==e&&(ot=it(ot,e)),e=ot,ot=null,e){if(at(e,ut),ot)throw Error(o(95));if(l)throw e=f,l=!1,f=null,e}}function ct(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function lt(e){if(!C)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var ft=[];function ht(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ft.length&&ft.push(e)}function dt(e,t,n,r){if(ft.length){var i=ft.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=On(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=ct(e.nativeEvent);r=e.topLevelType;var a=e.nativeEvent,o=e.eventSystemFlags;0===n&&(o|=64);for(var u=null,s=0;s<b.length;s++){var c=b[s];c&&(c=c.extractEvents(r,t,a,i,o))&&(u=it(u,c))}st(u)}}function vt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Yt(t,"scroll",!0);break;case"focus":case"blur":Yt(t,"focus",!0),Yt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":lt(e)&&Yt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Je.indexOf(e)&&Qt(e,t)}n.set(e,null)}}var yt,mt,gt,kt=!1,_t=[],wt=null,bt=null,xt=null,Tt=new Map,Et=new Map,It=[],Ct="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),St="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Pt(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function At(e,t){switch(e){case"focus":case"blur":wt=null;break;case"dragenter":case"dragleave":bt=null;break;case"mouseover":case"mouseout":xt=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Et.delete(t.pointerId)}}function Nt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=Pt(t,n,r,i,a),null!==t&&(null!==(t=Dn(t))&&mt(t)),e):(e.eventSystemFlags|=r,e)}function Rt(e){var t=On(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void a.unstable_runWithPriority(e.priority,(function(){gt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ot(e){if(null!==e.blockedOn)return!1;var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Dn(t);return null!==n&&mt(n),e.blockedOn=t,!1}return!0}function Dt(e,t,n){Ot(e)&&n.delete(t)}function Lt(){for(kt=!1;0<_t.length;){var e=_t[0];if(null!==e.blockedOn){null!==(e=Dn(e.blockedOn))&&yt(e);break}var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:_t.shift()}null!==wt&&Ot(wt)&&(wt=null),null!==bt&&Ot(bt)&&(bt=null),null!==xt&&Ot(xt)&&(xt=null),Tt.forEach(Dt),Et.forEach(Dt)}function Mt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Lt)))}function Ft(e){function t(t){return Mt(t,e)}if(0<_t.length){Mt(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==wt&&Mt(wt,e),null!==bt&&Mt(bt,e),null!==xt&&Mt(xt,e),Tt.forEach(t),Et.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Rt(n),null===n.blockedOn&&It.shift()}var Ut={},jt=new Map,Vt=new Map,qt=["abort","abort",Ge,"animationEnd",Qe,"animationIteration",Ye,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",$e,"transitionEnd","waiting","waiting"];function zt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],a="on"+(i[0].toUpperCase()+i.slice(1));a={phasedRegistrationNames:{bubbled:a,captured:a+"Capture"},dependencies:[r],eventPriority:t},Vt.set(r,t),jt.set(r,a),Ut[i]=a}}zt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),zt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),zt(qt,2);for(var Bt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Wt=0;Wt<Bt.length;Wt++)Vt.set(Bt[Wt],0);var Kt=a.unstable_UserBlockingPriority,Ht=a.unstable_runWithPriority,Gt=!0;function Qt(e,t){Yt(t,e,!1)}function Yt(e,t,n){var r=Vt.get(t);switch(void 0===r?2:r){case 0:r=$t.bind(null,t,1,e);break;case 1:r=Jt.bind(null,t,1,e);break;default:r=Xt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function $t(e,t,n,r){U||M();var i=Xt,a=U;U=!0;try{L(i,e,t,n,r)}finally{(U=a)||V()}}function Jt(e,t,n,r){Ht(Kt,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){if(Gt)if(0<_t.length&&-1<Ct.indexOf(e))e=Pt(null,e,t,n,r),_t.push(e);else{var i=Zt(e,t,n,r);if(null===i)At(e,r);else if(-1<Ct.indexOf(e))e=Pt(i,e,t,n,r),_t.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return wt=Nt(wt,e,t,n,r,i),!0;case"dragenter":return bt=Nt(bt,e,t,n,r,i),!0;case"mouseover":return xt=Nt(xt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Tt.set(a,Nt(Tt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Et.set(a,Nt(Et.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){At(e,r),e=dt(e,r,null,t);try{q(pt,e)}finally{ht(e)}}}}function Zt(e,t,n,r){if(null!==(n=On(n=ct(r)))){var i=et(n);if(null===i)n=null;else{var a=i.tag;if(13===a){if(null!==(n=tt(i)))return n;n=null}else if(3===a){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=dt(e,r,n,t);try{q(pt,e)}finally{ht(e)}return null}var en={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function nn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function rn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=nn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(en).forEach((function(e){tn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]}))}));var an=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(e,t){if(t){if(an[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62,""))}}function un(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=De;function cn(e,t){var n=Ze(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=E[t];for(var r=0;r<t.length;r++)vt(t[r],e,n)}function ln(){}function fn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function hn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var n,r=hn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hn(r)}}function pn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function vn(){for(var e=window,t=fn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=fn((e=t.contentWindow).document)}return t}function yn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mn="$",gn="/$",kn="$?",_n="$!",wn=null,bn=null;function xn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Tn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var En="function"===typeof setTimeout?setTimeout:void 0,In="function"===typeof clearTimeout?clearTimeout:void 0;function Cn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Sn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===mn||n===_n||n===kn){if(0===t)return e;t--}else n===gn&&t++}e=e.previousSibling}return null}var Pn=Math.random().toString(36).slice(2),An="__reactInternalInstance$"+Pn,Nn="__reactEventHandlers$"+Pn,Rn="__reactContainere$"+Pn;function On(e){var t=e[An];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Rn]||n[An]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Sn(e);null!==e;){if(n=e[An])return n;e=Sn(e)}return t}n=(e=n).parentNode}return null}function Dn(e){return!(e=e[An]||e[Rn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ln(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Mn(e){return e[Nn]||null}function Fn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Un(e,t){var n=e.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}function jn(e,t,n){(t=Un(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Vn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Fn(t);for(t=n.length;0<t--;)jn(n[t],"captured",e);for(t=0;t<n.length;t++)jn(n[t],"bubbled",e)}}function qn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Un(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function zn(e){e&&e.dispatchConfig.registrationName&&qn(e._targetInst,null,e)}function Bn(e){at(e,Vn)}var Wn=null,Kn=null,Hn=null;function Gn(){if(Hn)return Hn;var e,t,n=Kn,r=n.length,i="value"in Wn?Wn.value:Wn.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Hn=i.slice(e,1<t?1-t:void 0)}function Qn(){return!0}function Yn(){return!1}function $n(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Qn:Yn,this.isPropagationStopped=Yn,this}function Jn(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Xn(e){if(!(e instanceof this))throw Error(o(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Zn(e){e.eventPool=[],e.getPooled=Jn,e.release=Xn}i($n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){this.isPersistent=Qn},isPersistent:Yn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Yn,this._dispatchInstances=this._dispatchListeners=null}}),$n.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},$n.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var a=new t;return i(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Zn(n),n},Zn($n);var er=$n.extend({data:null}),tr=$n.extend({data:null}),nr=[9,13,27,32],rr=C&&"CompositionEvent"in window,ir=null;C&&"documentMode"in document&&(ir=document.documentMode);var ar=C&&"TextEvent"in window&&!ir,or=C&&(!rr||ir&&8<ir&&11>=ir),ur=String.fromCharCode(32),sr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},cr=!1;function lr(e,t){switch(e){case"keyup":return-1!==nr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function fr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var hr=!1;var dr={eventTypes:sr,extractEvents:function(e,t,n,r){var i;if(rr)e:{switch(e){case"compositionstart":var a=sr.compositionStart;break e;case"compositionend":a=sr.compositionEnd;break e;case"compositionupdate":a=sr.compositionUpdate;break e}a=void 0}else hr?lr(e,n)&&(a=sr.compositionEnd):"keydown"===e&&229===n.keyCode&&(a=sr.compositionStart);return a?(or&&"ko"!==n.locale&&(hr||a!==sr.compositionStart?a===sr.compositionEnd&&hr&&(i=Gn()):(Kn="value"in(Wn=r)?Wn.value:Wn.textContent,hr=!0)),a=er.getPooled(a,t,n,r),i?a.data=i:null!==(i=fr(n))&&(a.data=i),Bn(a),i=a):i=null,(e=ar?function(e,t){switch(e){case"compositionend":return fr(t);case"keypress":return 32!==t.which?null:(cr=!0,ur);case"textInput":return(e=t.data)===ur&&cr?null:e;default:return null}}(e,n):function(e,t){if(hr)return"compositionend"===e||!rr&&lr(e,t)?(e=Gn(),Hn=Kn=Wn=null,hr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return or&&"ko"!==t.locale?null:t.data}}(e,n))?((t=tr.getPooled(sr.beforeInput,t,n,r)).data=e,Bn(t)):t=null,null===i?t:null===t?i:[i,t]}},pr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!pr[e.type]:"textarea"===t}var yr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function mr(e,t,n){return(e=$n.getPooled(yr.change,e,t,n)).type="change",R(n),Bn(e),e}var gr=null,kr=null;function _r(e){st(e)}function wr(e){if(we(Ln(e)))return e}function br(e,t){if("change"===e)return t}var xr=!1;function Tr(){gr&&(gr.detachEvent("onpropertychange",Er),kr=gr=null)}function Er(e){if("value"===e.propertyName&&wr(kr))if(e=mr(kr,e,ct(e)),U)st(e);else{U=!0;try{D(_r,e)}finally{U=!1,V()}}}function Ir(e,t,n){"focus"===e?(Tr(),kr=n,(gr=t).attachEvent("onpropertychange",Er)):"blur"===e&&Tr()}function Cr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return wr(kr)}function Sr(e,t){if("click"===e)return wr(t)}function Pr(e,t){if("input"===e||"change"===e)return wr(t)}C&&(xr=lt("input")&&(!document.documentMode||9<document.documentMode));var Ar={eventTypes:yr,_isInputEventSupported:xr,extractEvents:function(e,t,n,r){var i=t?Ln(t):window,a=i.nodeName&&i.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===i.type)var o=br;else if(vr(i))if(xr)o=Pr;else{o=Cr;var u=Ir}else(a=i.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Sr);if(o&&(o=o(e,t)))return mr(o,n,r);u&&u(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Ce(i,"number",i.value)}},Nr=$n.extend({view:null,detail:null}),Rr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Or(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Rr[e])&&!!t[e]}function Dr(){return Or}var Lr=0,Mr=0,Fr=!1,Ur=!1,jr=Nr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Dr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Lr;return Lr=e.screenX,Fr?"mousemove"===e.type?e.screenX-t:0:(Fr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Mr;return Mr=e.screenY,Ur?"mousemove"===e.type?e.screenY-t:0:(Ur=!0,0)}}),Vr=jr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),qr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},zr={eventTypes:qr,extractEvents:function(e,t,n,r,i){var a="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(a&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!o&&!a)return null;(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,o)?(o=t,null!==(t=(t=n.relatedTarget||n.toElement)?On(t):null)&&(t!==et(t)||5!==t.tag&&6!==t.tag)&&(t=null)):o=null;if(o===t)return null;if("mouseout"===e||"mouseover"===e)var u=jr,s=qr.mouseLeave,c=qr.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(u=Vr,s=qr.pointerLeave,c=qr.pointerEnter,l="pointer");if(e=null==o?a:Ln(o),a=null==t?a:Ln(t),(s=u.getPooled(s,o,n,r)).type=l+"leave",s.target=e,s.relatedTarget=a,(n=u.getPooled(c,t,n,r)).type=l+"enter",n.target=a,n.relatedTarget=e,l=t,(r=o)&&l)e:{for(c=l,o=0,e=u=r;e;e=Fn(e))o++;for(e=0,t=c;t;t=Fn(t))e++;for(;0<o-e;)u=Fn(u),o--;for(;0<e-o;)c=Fn(c),e--;for(;o--;){if(u===c||u===c.alternate)break e;u=Fn(u),c=Fn(c)}u=null}else u=null;for(c=u,u=[];r&&r!==c&&(null===(o=r.alternate)||o!==c);)u.push(r),r=Fn(r);for(r=[];l&&l!==c&&(null===(o=l.alternate)||o!==c);)r.push(l),l=Fn(l);for(l=0;l<u.length;l++)qn(u[l],"bubbled",s);for(l=r.length;0<l--;)qn(r[l],"captured",n);return 0===(64&i)?[s]:[s,n]}};var Br="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Wr=Object.prototype.hasOwnProperty;function Kr(e,t){if(Br(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Wr.call(t,n[r])||!Br(e[n[r]],t[n[r]]))return!1;return!0}var Hr=C&&"documentMode"in document&&11>=document.documentMode,Gr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Qr=null,Yr=null,$r=null,Jr=!1;function Xr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Jr||null==Qr||Qr!==fn(n)?null:("selectionStart"in(n=Qr)&&yn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},$r&&Kr($r,n)?null:($r=n,(e=$n.getPooled(Gr.select,Yr,e,t)).type="select",e.target=Qr,Bn(e),e))}var Zr={eventTypes:Gr,extractEvents:function(e,t,n,r,i,a){if(!(a=!(i=a||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Ze(i),a=E.onSelect;for(var o=0;o<a.length;o++)if(!i.has(a[o])){i=!1;break e}i=!0}a=!i}if(a)return null;switch(i=t?Ln(t):window,e){case"focus":(vr(i)||"true"===i.contentEditable)&&(Qr=i,Yr=t,$r=null);break;case"blur":$r=Yr=Qr=null;break;case"mousedown":Jr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Jr=!1,Xr(n,r);case"selectionchange":if(Hr)break;case"keydown":case"keyup":return Xr(n,r)}return null}},ei=$n.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ti=$n.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ni=Nr.extend({relatedTarget:null});function ri(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ii={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ai={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oi=Nr.extend({key:function(e){if(e.key){var t=ii[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ri(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ai[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Dr,charCode:function(e){return"keypress"===e.type?ri(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ri(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ui=jr.extend({dataTransfer:null}),si=Nr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Dr}),ci=$n.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),li=jr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),fi={eventTypes:Ut,extractEvents:function(e,t,n,r){var i=jt.get(e);if(!i)return null;switch(e){case"keypress":if(0===ri(n))return null;case"keydown":case"keyup":e=oi;break;case"blur":case"focus":e=ni;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=jr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ui;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=si;break;case Ge:case Qe:case Ye:e=ei;break;case $e:e=ci;break;case"scroll":e=Nr;break;case"wheel":e=li;break;case"copy":case"cut":case"paste":e=ti;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Vr;break;default:e=$n}return Bn(t=e.getPooled(i,t,n,r)),t}};if(g)throw Error(o(101));g=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),_(),p=Mn,v=Dn,y=Ln,I({SimpleEventPlugin:fi,EnterLeaveEventPlugin:zr,ChangeEventPlugin:Ar,SelectEventPlugin:Zr,BeforeInputEventPlugin:dr});var hi=[],di=-1;function pi(e){0>di||(e.current=hi[di],hi[di]=null,di--)}function vi(e,t){di++,hi[di]=e.current,e.current=t}var yi={},mi={current:yi},gi={current:!1},ki=yi;function _i(e,t){var n=e.type.contextTypes;if(!n)return yi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function wi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function bi(){pi(gi),pi(mi)}function xi(e,t,n){if(mi.current!==yi)throw Error(o(168));vi(mi,t),vi(gi,n)}function Ti(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,ye(t)||"Unknown",a));return i({},n,{},r)}function Ei(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||yi,ki=mi.current,vi(mi,e),vi(gi,gi.current),!0}function Ii(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ti(e,t,ki),r.__reactInternalMemoizedMergedChildContext=e,pi(gi),pi(mi),vi(mi,e)):pi(gi),vi(gi,n)}var Ci=a.unstable_runWithPriority,Si=a.unstable_scheduleCallback,Pi=a.unstable_cancelCallback,Ai=a.unstable_requestPaint,Ni=a.unstable_now,Ri=a.unstable_getCurrentPriorityLevel,Oi=a.unstable_ImmediatePriority,Di=a.unstable_UserBlockingPriority,Li=a.unstable_NormalPriority,Mi=a.unstable_LowPriority,Fi=a.unstable_IdlePriority,Ui={},ji=a.unstable_shouldYield,Vi=void 0!==Ai?Ai:function(){},qi=null,zi=null,Bi=!1,Wi=Ni(),Ki=1e4>Wi?Ni:function(){return Ni()-Wi};function Hi(){switch(Ri()){case Oi:return 99;case Di:return 98;case Li:return 97;case Mi:return 96;case Fi:return 95;default:throw Error(o(332))}}function Gi(e){switch(e){case 99:return Oi;case 98:return Di;case 97:return Li;case 96:return Mi;case 95:return Fi;default:throw Error(o(332))}}function Qi(e,t){return e=Gi(e),Ci(e,t)}function Yi(e,t,n){return e=Gi(e),Si(e,t,n)}function $i(e){return null===qi?(qi=[e],zi=Si(Oi,Xi)):qi.push(e),Ui}function Ji(){if(null!==zi){var e=zi;zi=null,Pi(e)}Xi()}function Xi(){if(!Bi&&null!==qi){Bi=!0;var e=0;try{var t=qi;Qi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),qi=null}catch(n){throw null!==qi&&(qi=qi.slice(e+1)),Si(Oi,Ji),n}finally{Bi=!1}}}function Zi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function ea(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var ta={current:null},na=null,ra=null,ia=null;function aa(){ia=ra=na=null}function oa(e){var t=ta.current;pi(ta),e.type._context._currentValue=t}function ua(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function sa(e,t){na=e,ia=ra=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Mo=!0),e.firstContext=null)}function ca(e,t){if(ia!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ia=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ra){if(null===na)throw Error(o(308));ra=t,na.dependencies={expirationTime:0,firstContext:t,responders:null}}else ra=ra.next=t;return e._currentValue}var la=!1;function fa(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ha(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function da(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function pa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function va(e,t){var n=e.alternate;null!==n&&ha(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function ya(e,t,n,r){var a=e.updateQueue;la=!1;var o=a.baseQueue,u=a.shared.pending;if(null!==u){if(null!==o){var s=o.next;o.next=u.next,u.next=s}o=u,a.shared.pending=null,null!==(s=e.alternate)&&(null!==(s=s.updateQueue)&&(s.baseQueue=u))}if(null!==o){s=o.next;var c=a.baseState,l=0,f=null,h=null,d=null;if(null!==s)for(var p=s;;){if((u=p.expirationTime)<r){var v={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===d?(h=d=v,f=c):d=d.next=v,u>l&&(l=u)}else{null!==d&&(d=d.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),bs(u,p.suspenseConfig);e:{var y=e,m=p;switch(u=t,v=n,m.tag){case 1:if("function"===typeof(y=m.payload)){c=y.call(v,c,u);break e}c=y;break e;case 3:y.effectTag=-4097&y.effectTag|64;case 0:if(null===(u="function"===typeof(y=m.payload)?y.call(v,c,u):y)||void 0===u)break e;c=i({},c,u);break e;case 2:la=!0}}null!==p.callback&&(e.effectTag|=32,null===(u=a.effects)?a.effects=[p]:u.push(p))}if(null===(p=p.next)||p===s){if(null===(u=a.shared.pending))break;p=o.next=u.next,u.next=s,a.baseQueue=o=u,a.shared.pending=null}}null===d?f=c:d.next=h,a.baseState=f,a.baseQueue=d,xs(l),e.expirationTime=l,e.memoizedState=c}}function ma(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var ga=$.ReactCurrentBatchConfig,ka=(new r.Component).refs;function _a(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var wa={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=cs(),i=ga.suspense;(i=da(r=ls(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),pa(e,i),fs(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=cs(),i=ga.suspense;(i=da(r=ls(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),pa(e,i),fs(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=cs(),r=ga.suspense;(r=da(n=ls(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),pa(e,r),fs(e,n)}};function ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!Kr(n,r)||!Kr(i,a))}function xa(e,t,n){var r=!1,i=yi,a=t.contextType;return"object"===typeof a&&null!==a?a=ca(a):(i=wi(t)?ki:mi.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?_i(e,i):yi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=wa,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ta(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wa.enqueueReplaceState(t,t.state,null)}function Ea(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ka,fa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=ca(a):(a=wi(t)?ki:mi.current,i.context=_i(e,a)),ya(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(_a(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&wa.enqueueReplaceState(i,i.state,null),ya(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var Ia=Array.isArray;function Ca(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ka&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Sa(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Pa(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Bs(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function u(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Hs(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Ca(e,t,n),r.return=e,r):((r=Ws(n.type,n.key,n.props,null,e.mode,r)).ref=Ca(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gs(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Ks(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Hs(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Ws(t.type,t.key,t.props,null,e.mode,n)).ref=Ca(e,null,t),n.return=e,n;case te:return(t=Gs(t,e.mode,n)).return=e,t}if(Ia(t)||ve(t))return(t=Ks(t,e.mode,n,null)).return=e,t;Sa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case te:return n.key===i?l(e,t,n,r):null}if(Ia(n)||ve(n))return null!==i?null:f(e,t,n,r,null);Sa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case te:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Ia(r)||ve(r))return f(t,e=e.get(n)||null,r,i,null);Sa(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,u,s,c){var l=ve(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===ne&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case ee:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===ne){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=Ca(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===ne?((r=Ks(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Ws(a.type,a.key,a.props,null,e.mode,s)).ref=Ca(e,r,a),s.return=e,e=s)}return u(e);case te:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Gs(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Hs(a,e.mode,s)).return=e,e=r),u(e);if(Ia(a))return v(e,r,a,s);if(ve(a))return y(e,r,a,s);if(l&&Sa(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(o(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Aa=Pa(!0),Na=Pa(!1),Ra={},Oa={current:Ra},Da={current:Ra},La={current:Ra};function Ma(e){if(e===Ra)throw Error(o(174));return e}function Fa(e,t){switch(vi(La,t),vi(Da,e),vi(Oa,Ra),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fe(null,"");break;default:t=Fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}pi(Oa),vi(Oa,t)}function Ua(){pi(Oa),pi(Da),pi(La)}function ja(e){Ma(La.current);var t=Ma(Oa.current),n=Fe(t,e.type);t!==n&&(vi(Da,e),vi(Oa,n))}function Va(e){Da.current===e&&(pi(Oa),pi(Da))}var qa={current:0};function za(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===kn||n.data===_n))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ba(e,t){return{responder:e,props:t}}var Wa=$.ReactCurrentDispatcher,Ka=$.ReactCurrentBatchConfig,Ha=0,Ga=null,Qa=null,Ya=null,$a=!1;function Ja(){throw Error(o(321))}function Xa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Br(e[n],t[n]))return!1;return!0}function Za(e,t,n,r,i,a){if(Ha=a,Ga=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Wa.current=null===e||null===e.memoizedState?xo:To,e=n(r,i),t.expirationTime===Ha){a=0;do{if(t.expirationTime=0,!(25>a))throw Error(o(301));a+=1,Ya=Qa=null,t.updateQueue=null,Wa.current=Eo,e=n(r,i)}while(t.expirationTime===Ha)}if(Wa.current=bo,t=null!==Qa&&null!==Qa.next,Ha=0,Ya=Qa=Ga=null,$a=!1,t)throw Error(o(300));return e}function eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ya?Ga.memoizedState=Ya=e:Ya=Ya.next=e,Ya}function to(){if(null===Qa){var e=Ga.alternate;e=null!==e?e.memoizedState:null}else e=Qa.next;var t=null===Ya?Ga.memoizedState:Ya.next;if(null!==t)Ya=t,Qa=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Qa=e).memoizedState,baseState:Qa.baseState,baseQueue:Qa.baseQueue,queue:Qa.queue,next:null},null===Ya?Ga.memoizedState=Ya=e:Ya=Ya.next=e}return Ya}function no(e,t){return"function"===typeof t?t(e):t}function ro(e){var t=to(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Qa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.expirationTime;if(l<Ha){var f={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,l>Ga.expirationTime&&(Ga.expirationTime=l,xs(l))}else null!==s&&(s=s.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),bs(l,c.suspenseConfig),r=c.eagerReducer===e?c.eagerState:e(r,c.action);c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,Br(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function io(e){var t=to(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);Br(a,t.memoizedState)||(Mo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ao(e){var t=eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:no,lastRenderedState:e}).dispatch=wo.bind(null,Ga,e),[t.memoizedState,e]}function oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ga.updateQueue)?(t={lastEffect:null},Ga.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function uo(){return to().memoizedState}function so(e,t,n,r){var i=eo();Ga.effectTag|=e,i.memoizedState=oo(1|t,n,void 0,void 0===r?null:r)}function co(e,t,n,r){var i=to();r=void 0===r?null:r;var a=void 0;if(null!==Qa){var o=Qa.memoizedState;if(a=o.destroy,null!==r&&Xa(r,o.deps))return void oo(t,n,a,r)}Ga.effectTag|=e,i.memoizedState=oo(1|t,n,a,r)}function lo(e,t){return so(516,4,e,t)}function fo(e,t){return co(516,4,e,t)}function ho(e,t){return co(4,2,e,t)}function po(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,co(4,2,po.bind(null,t,e),n)}function yo(){}function mo(e,t){return eo().memoizedState=[e,void 0===t?null:t],e}function go(e,t){var n=to();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Xa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ko(e,t){var n=to();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Xa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function _o(e,t,n){var r=Hi();Qi(98>r?98:r,(function(){e(!0)})),Qi(97<r?97:r,(function(){var r=Ka.suspense;Ka.suspense=void 0===t?null:t;try{e(!1),n()}finally{Ka.suspense=r}}))}function wo(e,t,n){var r=cs(),i=ga.suspense;i={expirationTime:r=ls(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var a=t.pending;if(null===a?i.next=i:(i.next=a.next,a.next=i),t.pending=i,a=e.alternate,e===Ga||null!==a&&a===Ga)$a=!0,i.expirationTime=Ha,Ga.expirationTime=Ha;else{if(0===e.expirationTime&&(null===a||0===a.expirationTime)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.eagerReducer=a,i.eagerState=u,Br(u,o))return}catch(s){}fs(e,r)}}var bo={readContext:ca,useCallback:Ja,useContext:Ja,useEffect:Ja,useImperativeHandle:Ja,useLayoutEffect:Ja,useMemo:Ja,useReducer:Ja,useRef:Ja,useState:Ja,useDebugValue:Ja,useResponder:Ja,useDeferredValue:Ja,useTransition:Ja},xo={readContext:ca,useCallback:mo,useContext:ca,useEffect:lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,so(4,2,po.bind(null,t,e),n)},useLayoutEffect:function(e,t){return so(4,2,e,t)},useMemo:function(e,t){var n=eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=wo.bind(null,Ga,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},eo().memoizedState=e},useState:ao,useDebugValue:yo,useResponder:Ba,useDeferredValue:function(e,t){var n=ao(e),r=n[0],i=n[1];return lo((function(){var n=Ka.suspense;Ka.suspense=void 0===t?null:t;try{i(e)}finally{Ka.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ao(!1),n=t[0];return t=t[1],[mo(_o.bind(null,t,e),[t,e]),n]}},To={readContext:ca,useCallback:go,useContext:ca,useEffect:fo,useImperativeHandle:vo,useLayoutEffect:ho,useMemo:ko,useReducer:ro,useRef:uo,useState:function(){return ro(no)},useDebugValue:yo,useResponder:Ba,useDeferredValue:function(e,t){var n=ro(no),r=n[0],i=n[1];return fo((function(){var n=Ka.suspense;Ka.suspense=void 0===t?null:t;try{i(e)}finally{Ka.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ro(no),n=t[0];return t=t[1],[go(_o.bind(null,t,e),[t,e]),n]}},Eo={readContext:ca,useCallback:go,useContext:ca,useEffect:fo,useImperativeHandle:vo,useLayoutEffect:ho,useMemo:ko,useReducer:io,useRef:uo,useState:function(){return io(no)},useDebugValue:yo,useResponder:Ba,useDeferredValue:function(e,t){var n=io(no),r=n[0],i=n[1];return fo((function(){var n=Ka.suspense;Ka.suspense=void 0===t?null:t;try{i(e)}finally{Ka.suspense=n}}),[e,t]),r},useTransition:function(e){var t=io(no),n=t[0];return t=t[1],[go(_o.bind(null,t,e),[t,e]),n]}},Io=null,Co=null,So=!1;function Po(e,t){var n=qs(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function No(e){if(So){var t=Co;if(t){var n=t;if(!Ao(e,t)){if(!(t=Cn(n.nextSibling))||!Ao(e,t))return e.effectTag=-1025&e.effectTag|2,So=!1,void(Io=e);Po(Io,n)}Io=e,Co=Cn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,So=!1,Io=e}}function Ro(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Io=e}function Oo(e){if(e!==Io)return!1;if(!So)return Ro(e),So=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Tn(t,e.memoizedProps))for(t=Co;t;)Po(e,t),t=Cn(t.nextSibling);if(Ro(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===gn){if(0===t){Co=Cn(e.nextSibling);break e}t--}else n!==mn&&n!==_n&&n!==kn||t++}e=e.nextSibling}Co=null}}else Co=Io?Cn(e.stateNode.nextSibling):null;return!0}function Do(){Co=Io=null,So=!1}var Lo=$.ReactCurrentOwner,Mo=!1;function Fo(e,t,n,r){t.child=null===e?Na(t,null,n,r):Aa(t,e.child,n,r)}function Uo(e,t,n,r,i){n=n.render;var a=t.ref;return sa(t,i),r=Za(e,t,n,r,a,i),null===e||Mo?(t.effectTag|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),tu(e,t,i))}function jo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||zs(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ws(n.type,null,r,null,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Vo(e,t,o,r,i,a))}return o=e.child,i<a&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:Kr)(i,r)&&e.ref===t.ref)?tu(e,t,a):(t.effectTag|=1,(e=Bs(o,r)).ref=t.ref,e.return=t,t.child=e)}function Vo(e,t,n,r,i,a){return null!==e&&Kr(e.memoizedProps,r)&&e.ref===t.ref&&(Mo=!1,i<a)?(t.expirationTime=e.expirationTime,tu(e,t,a)):zo(e,t,n,r,a)}function qo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function zo(e,t,n,r,i){var a=wi(n)?ki:mi.current;return a=_i(t,a),sa(t,i),n=Za(e,t,n,r,a,i),null===e||Mo?(t.effectTag|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),tu(e,t,i))}function Bo(e,t,n,r,i){if(wi(n)){var a=!0;Ei(t)}else a=!1;if(sa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),xa(t,n,r),Ea(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=ca(c):c=_i(t,c=wi(n)?ki:mi.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ta(t,o,r,c),la=!1;var h=t.memoizedState;o.state=h,ya(t,r,o,i),s=t.memoizedState,u!==r||h!==s||gi.current||la?("function"===typeof l&&(_a(t,n,l,r),s=t.memoizedState),(u=la||ba(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.effectTag|=4)):("function"===typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,ha(e,t),u=t.memoizedProps,o.props=t.type===t.elementType?u:ea(t.type,u),s=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=ca(c):c=_i(t,c=wi(n)?ki:mi.current),(f="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ta(t,o,r,c),la=!1,s=t.memoizedState,o.state=s,ya(t,r,o,i),h=t.memoizedState,u!==r||s!==h||gi.current||la?("function"===typeof l&&(_a(t,n,l,r),h=t.memoizedState),(l=la||ba(t,n,u,r,s,h,c))?(f||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,c)),"function"===typeof o.componentDidUpdate&&(t.effectTag|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),r=!1);return Wo(e,t,n,r,a,i)}function Wo(e,t,n,r,i,a){qo(e,t);var o=0!==(64&t.effectTag);if(!r&&!o)return i&&Ii(t,n,!1),tu(e,t,a);r=t.stateNode,Lo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=Aa(t,e.child,null,a),t.child=Aa(t,null,u,a)):Fo(e,t,u,a),t.memoizedState=r.state,i&&Ii(t,n,!0),t.child}function Ko(e){var t=e.stateNode;t.pendingContext?xi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&xi(0,t.context,!1),Fa(e,t.containerInfo)}var Ho,Go,Qo,Yo,$o={dehydrated:null,retryTime:0};function Jo(e,t,n){var r,i=t.mode,a=t.pendingProps,o=qa.current,u=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&o)&&(null===e||null!==e.memoizedState)),r?(u=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=1),vi(qa,1&o),null===e){if(void 0!==a.fallback&&No(t),u){if(u=a.fallback,(a=Ks(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=Ks(u,i,n,null)).return=t,a.sibling=n,t.memoizedState=$o,t.child=a,n}return i=a.children,t.memoizedState=null,t.child=Na(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,u){if(a=a.fallback,(n=Bs(e,e.pendingProps)).return=t,0===(2&t.mode)&&(u=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=u;null!==u;)u.return=n,u=u.sibling;return(i=Bs(i,a)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=$o,t.child=n,i}return n=Aa(t,e.child,a.children,n),t.memoizedState=null,t.child=n}if(e=e.child,u){if(u=a.fallback,(a=Ks(null,i,0,null)).return=t,a.child=e,null!==e&&(e.return=a),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=Ks(u,i,n,null)).return=t,a.sibling=n,n.effectTag|=2,a.childExpirationTime=0,t.memoizedState=$o,t.child=a,n}return t.memoizedState=null,t.child=Aa(t,e,a.children,n)}function Xo(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),ua(e.return,t)}function Zo(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailExpiration=0,o.tailMode=i,o.lastEffect=a)}function eu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=qa.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Xo(e,n);else if(19===e.tag)Xo(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(vi(qa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===za(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Zo(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===za(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Zo(t,!0,n,null,a,t.lastEffect);break;case"together":Zo(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function tu(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&xs(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Bs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Bs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function nu(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ru(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return wi(t.type)&&bi(),null;case 3:return Ua(),pi(gi),pi(mi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Oo(t)||(t.effectTag|=4),Go(t),null;case 5:Va(t),n=Ma(La.current);var a=t.type;if(null!==e&&null!=t.stateNode)Qo(e,t,a,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ma(Oa.current),Oo(t)){r=t.stateNode,a=t.type;var u=t.memoizedProps;switch(r[An]=t,r[Nn]=u,a){case"iframe":case"object":case"embed":Qt("load",r);break;case"video":case"audio":for(e=0;e<Je.length;e++)Qt(Je[e],r);break;case"source":Qt("error",r);break;case"img":case"image":case"link":Qt("error",r),Qt("load",r);break;case"form":Qt("reset",r),Qt("submit",r);break;case"details":Qt("toggle",r);break;case"input":xe(r,u),Qt("invalid",r),cn(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Qt("invalid",r),cn(n,"onChange");break;case"textarea":Ne(r,u),Qt("invalid",r),cn(n,"onChange")}for(var s in on(a,u),e=null,u)if(u.hasOwnProperty(s)){var c=u[s];"children"===s?"string"===typeof c?r.textContent!==c&&(e=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(e=["children",""+c]):T.hasOwnProperty(s)&&null!=c&&cn(n,s)}switch(a){case"input":_e(r),Ie(r,u,!0);break;case"textarea":_e(r),Oe(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=ln)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(s=9===n.nodeType?n:n.ownerDocument,e===sn&&(e=Me(a)),e===sn?"script"===a?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(a,{is:r.is}):(e=s.createElement(a),"select"===a&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,a),e[An]=t,e[Nn]=r,Ho(e,t,!1,!1),t.stateNode=e,s=un(a,r),a){case"iframe":case"object":case"embed":Qt("load",e),c=r;break;case"video":case"audio":for(c=0;c<Je.length;c++)Qt(Je[c],e);c=r;break;case"source":Qt("error",e),c=r;break;case"img":case"image":case"link":Qt("error",e),Qt("load",e),c=r;break;case"form":Qt("reset",e),Qt("submit",e),c=r;break;case"details":Qt("toggle",e),c=r;break;case"input":xe(e,r),c=be(e,r),Qt("invalid",e),cn(n,"onChange");break;case"option":c=Se(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),Qt("invalid",e),cn(n,"onChange");break;case"textarea":Ne(e,r),c=Ae(e,r),Qt("invalid",e),cn(n,"onChange");break;default:c=r}on(a,c);var l=c;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?rn(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&Ve(e,f):"children"===u?"string"===typeof f?("textarea"!==a||""!==f)&&qe(e,f):"number"===typeof f&&qe(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(T.hasOwnProperty(u)?null!=f&&cn(n,u):null!=f&&J(e,u,f,s))}switch(a){case"input":_e(e),Ie(e,r,!1);break;case"textarea":_e(e),Oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ge(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?Pe(e,!!r.multiple,n,!1):null!=r.defaultValue&&Pe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof c.onClick&&(e.onclick=ln)}xn(a,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ma(La.current),Ma(Oa.current),Oo(t)?(n=t.stateNode,r=t.memoizedProps,n[An]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[An]=t,t.stateNode=n)}return null;case 13:return pi(qa),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Oo(t):(r=null!==(a=e.memoizedState),n||null===a||null!==(a=e.child.sibling)&&(null!==(u=t.firstEffect)?(t.firstEffect=a,a.nextEffect=u):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&qa.current)?Bu===Ou&&(Bu=Mu):(Bu!==Ou&&Bu!==Mu||(Bu=Fu),0!==Qu&&null!==Vu&&($s(Vu,zu),Js(Vu,Qu)))),(n||r)&&(t.effectTag|=4),null);case 4:return Ua(),Go(t),null;case 10:return oa(t),null;case 19:if(pi(qa),null===(r=t.memoizedState))return null;if(a=0!==(64&t.effectTag),null===(u=r.rendering)){if(a)nu(r,!1);else if(Bu!==Ou||null!==e&&0!==(64&e.effectTag))for(u=t.child;null!==u;){if(null!==(e=za(u))){for(t.effectTag|=64,nu(r,!1),null!==(a=e.updateQueue)&&(t.updateQueue=a,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)u=n,(a=r).effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(e=a.alternate)?(a.childExpirationTime=0,a.expirationTime=u,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=e.childExpirationTime,a.expirationTime=e.expirationTime,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,u=e.dependencies,a.dependencies=null===u?null:{expirationTime:u.expirationTime,firstContext:u.firstContext,responders:u.responders}),r=r.sibling;return vi(qa,1&qa.current|2),t.child}u=u.sibling}}else{if(!a)if(null!==(e=za(u))){if(t.effectTag|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),nu(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ki()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,a=!0,nu(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Ki()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ki(),n.sibling=null,t=qa.current,vi(qa,a?1&t|2:1&t),n):null}throw Error(o(156,t.tag))}function iu(e){switch(e.tag){case 1:wi(e.type)&&bi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Ua(),pi(gi),pi(mi),0!==(64&(t=e.effectTag)))throw Error(o(285));return e.effectTag=-4097&t|64,e;case 5:return Va(e),null;case 13:return pi(qa),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return pi(qa),null;case 4:return Ua(),null;case 10:return oa(e),null;default:return null}}function au(e,t){return{value:e,source:t,stack:me(t)}}Ho=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Go=function(){},Qo=function(e,t,n,r,a){var o=e.memoizedProps;if(o!==r){var u,s,c=t.stateNode;switch(Ma(Oa.current),e=null,n){case"input":o=be(c,o),r=be(c,r),e=[];break;case"option":o=Se(c,o),r=Se(c,r),e=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":o=Ae(c,o),r=Ae(c,r),e=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(c.onclick=ln)}for(u in on(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u)for(s in c=o[u])c.hasOwnProperty(s)&&(n||(n={}),n[s]="");else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(T.hasOwnProperty(u)?e||(e=[]):(e=e||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(e||(e=[]),e.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(e=e||[]).push(u,l)):"children"===u?c===l||"string"!==typeof l&&"number"!==typeof l||(e=e||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(T.hasOwnProperty(u)?(null!=l&&cn(a,u),e||c===l||(e=[])):(e=e||[]).push(u,l))}n&&(e=e||[]).push("style",n),a=e,(t.updateQueue=a)&&(t.effectTag|=4)}},Yo=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var ou="function"===typeof WeakSet?WeakSet:Set;function uu(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=me(n)),null!==n&&ye(n.type),t=t.value,null!==e&&1===e.tag&&ye(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function su(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Ls(e,n)}else t.current=null}function cu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:ea(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(o(163))}function lu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function fu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function hu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void fu(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:ea(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&ma(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}ma(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&xn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ft(n)))))}throw Error(o(163))}function du(e,t,n){switch("function"===typeof js&&js(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Qi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(a){Ls(i,a)}}e=e.next}while(e!==r)}))}break;case 1:su(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Ls(e,n)}}(t,n);break;case 5:su(t);break;case 4:ku(e,t,n)}}function pu(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&pu(t)}function vu(e){return 5===e.tag||3===e.tag||4===e.tag}function yu(e){e:{for(var t=e.return;null!==t;){if(vu(t)){var n=t;break e}t=t.return}throw Error(o(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.effectTag&&(qe(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||vu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?mu(e,n,t):gu(e,n,t)}function mu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ln));else if(4!==r&&null!==(e=e.child))for(mu(e,t,n),e=e.sibling;null!==e;)mu(e,t,n),e=e.sibling}function gu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(gu(e,t,n),e=e.sibling;null!==e;)gu(e,t,n),e=e.sibling}function ku(e,t,n){for(var r,i,a=t,u=!1;;){if(!u){u=a.return;e:for(;;){if(null===u)throw Error(o(160));switch(r=u.stateNode,u.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}u=u.return}u=!0}if(5===a.tag||6===a.tag){e:for(var s=e,c=a,l=n,f=c;;)if(du(s,f,l),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break e;for(;null===f.sibling;){if(null===f.return||f.return===c)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(s=r,c=a.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):r.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(du(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(u=!1)}a.sibling.return=a.return,a=a.sibling}}function _u(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void lu(3,t);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Nn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Te(n,r),un(e,i),t=un(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?rn(n,s):"dangerouslySetInnerHTML"===u?Ve(n,s):"children"===u?qe(n,s):J(n,u,s,t)}switch(e){case"input":Ee(n,r);break;case"textarea":Re(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Pe(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Pe(n,!!r.multiple,r.defaultValue,!0):Pe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Ft(t.containerInfo)));case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,$u=Ki()),null!==n)e:for(e=n;;){if(5===e.tag)a=e.stateNode,r?"function"===typeof(a=a.style).setProperty?a.setProperty("display","none","important"):a.display="none":(a=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,a.style.display=nn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(a=e.child.sibling).return=e,e=a;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void wu(t);case 19:return void wu(t)}throw Error(o(163))}function wu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ou),t.forEach((function(t){var r=Fs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var bu="function"===typeof WeakMap?WeakMap:Map;function xu(e,t,n){(n=da(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zu||(Zu=!0,es=r),uu(e,t)},n}function Tu(e,t,n){(n=da(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return uu(e,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===ts?ts=new Set([this]):ts.add(this),uu(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Eu,Iu=Math.ceil,Cu=$.ReactCurrentDispatcher,Su=$.ReactCurrentOwner,Pu=0,Au=8,Nu=16,Ru=32,Ou=0,Du=1,Lu=2,Mu=3,Fu=4,Uu=5,ju=Pu,Vu=null,qu=null,zu=0,Bu=Ou,Wu=null,Ku=1073741823,Hu=1073741823,Gu=null,Qu=0,Yu=!1,$u=0,Ju=500,Xu=null,Zu=!1,es=null,ts=null,ns=!1,rs=null,is=90,as=null,os=0,us=null,ss=0;function cs(){return(ju&(Nu|Ru))!==Pu?1073741821-(Ki()/10|0):0!==ss?ss:ss=1073741821-(Ki()/10|0)}function ls(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Hi();if(0===(4&t))return 99===r?1073741823:1073741822;if((ju&Nu)!==Pu)return zu;if(null!==n)e=Zi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Zi(e,150,100);break;case 97:case 96:e=Zi(e,5e3,250);break;case 95:e=2;break;default:throw Error(o(326))}return null!==Vu&&e===zu&&--e,e}function fs(e,t){if(50<os)throw os=0,us=null,Error(o(185));if(null!==(e=hs(e,t))){var n=Hi();1073741823===t?(ju&Au)!==Pu&&(ju&(Nu|Ru))===Pu?ys(e):(ps(e),ju===Pu&&Ji()):ps(e),(4&ju)===Pu||98!==n&&99!==n||(null===as?as=new Map([[e,t]]):(void 0===(n=as.get(e))||n>t)&&as.set(e,t))}}function hs(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Vu===i&&(xs(t),Bu===Fu&&$s(i,zu)),Js(i,t)),i}function ds(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Ys(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function ps(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=$i(ys.bind(null,e));else{var t=ds(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=cs();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Ui&&Pi(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?$i(ys.bind(null,e)):Yi(r,vs.bind(null,e),{timeout:10*(1073741821-t)-Ki()}),e.callbackNode=t}}}function vs(e,t){if(ss=0,t)return Xs(e,t=cs()),ps(e),null;var n=ds(e);if(0!==n){if(t=e.callbackNode,(ju&(Nu|Ru))!==Pu)throw Error(o(327));if(Rs(),e===Vu&&n===zu||ks(e,n),null!==qu){var r=ju;ju|=Nu;for(var i=ws();;)try{Es();break}catch(s){_s(e,s)}if(aa(),ju=r,Cu.current=i,Bu===Du)throw t=Wu,ks(e,n),$s(e,n),ps(e),t;if(null===qu)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Bu,Vu=null,r){case Ou:case Du:throw Error(o(345));case Lu:Xs(e,2<n?2:n);break;case Mu:if($s(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Ss(i)),1073741823===Ku&&10<(i=$u+Ju-Ki())){if(Yu){var a=e.lastPingedTime;if(0===a||a>=n){e.lastPingedTime=n,ks(e,n);break}}if(0!==(a=ds(e))&&a!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=En(Ps.bind(null,e),i);break}Ps(e);break;case Fu:if($s(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Ss(i)),Yu&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,ks(e,n);break}if(0!==(i=ds(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Hu?r=10*(1073741821-Hu)-Ki():1073741823===Ku?r=0:(r=10*(1073741821-Ku)-5e3,0>(r=(i=Ki())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Iu(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=En(Ps.bind(null,e),r);break}Ps(e);break;case Uu:if(1073741823!==Ku&&null!==Gu){a=Ku;var u=Gu;if(0>=(r=0|u.busyMinDurationMs)?r=0:(i=0|u.busyDelayMs,r=(a=Ki()-(10*(1073741821-a)-(0|u.timeoutMs||5e3)))<=i?0:i+r-a),10<r){$s(e,n),e.timeoutHandle=En(Ps.bind(null,e),r);break}}Ps(e);break;default:throw Error(o(329))}if(ps(e),e.callbackNode===t)return vs.bind(null,e)}}return null}function ys(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,(ju&(Nu|Ru))!==Pu)throw Error(o(327));if(Rs(),e===Vu&&t===zu||ks(e,t),null!==qu){var n=ju;ju|=Nu;for(var r=ws();;)try{Ts();break}catch(i){_s(e,i)}if(aa(),ju=n,Cu.current=r,Bu===Du)throw n=Wu,ks(e,t),$s(e,t),ps(e),n;if(null!==qu)throw Error(o(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Vu=null,Ps(e),ps(e)}return null}function ms(e,t){var n=ju;ju|=1;try{return e(t)}finally{(ju=n)===Pu&&Ji()}}function gs(e,t){var n=ju;ju&=-2,ju|=Au;try{return e(t)}finally{(ju=n)===Pu&&Ji()}}function ks(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,In(n)),null!==qu)for(n=qu.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&bi();break;case 3:Ua(),pi(gi),pi(mi);break;case 5:Va(r);break;case 4:Ua();break;case 13:case 19:pi(qa);break;case 10:oa(r)}n=n.return}Vu=e,qu=Bs(e.current,null),zu=t,Bu=Ou,Wu=null,Hu=Ku=1073741823,Gu=null,Qu=0,Yu=!1}function _s(e,t){for(;;){try{if(aa(),Wa.current=bo,$a)for(var n=Ga.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Ha=0,Ya=Qa=Ga=null,$a=!1,null===qu||null===qu.return)return Bu=Du,Wu=t,qu=null;e:{var i=e,a=qu.return,o=qu,u=t;if(t=zu,o.effectTag|=2048,o.firstEffect=o.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var s=u;if(0===(2&o.mode)){var c=o.alternate;c?(o.updateQueue=c.updateQueue,o.memoizedState=c.memoizedState,o.expirationTime=c.expirationTime):(o.updateQueue=null,o.memoizedState=null)}var l=0!==(1&qa.current),f=a;do{var h;if(h=13===f.tag){var d=f.memoizedState;if(null!==d)h=null!==d.dehydrated;else{var p=f.memoizedProps;h=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!l)}}if(h){var v=f.updateQueue;if(null===v){var y=new Set;y.add(s),f.updateQueue=y}else v.add(s);if(0===(2&f.mode)){if(f.effectTag|=64,o.effectTag&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var m=da(1073741823,null);m.tag=2,pa(o,m)}o.expirationTime=1073741823;break e}u=void 0,o=t;var g=i.pingCache;if(null===g?(g=i.pingCache=new bu,u=new Set,g.set(s,u)):void 0===(u=g.get(s))&&(u=new Set,g.set(s,u)),!u.has(o)){u.add(o);var k=Ms.bind(null,i,s,o);s.then(k,k)}f.effectTag|=4096,f.expirationTime=t;break e}f=f.return}while(null!==f);u=Error((ye(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+me(o))}Bu!==Uu&&(Bu=Lu),u=au(u,o),f=a;do{switch(f.tag){case 3:s=u,f.effectTag|=4096,f.expirationTime=t,va(f,xu(f,s,t));break e;case 1:s=u;var _=f.type,w=f.stateNode;if(0===(64&f.effectTag)&&("function"===typeof _.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===ts||!ts.has(w)))){f.effectTag|=4096,f.expirationTime=t,va(f,Tu(f,s,t));break e}}f=f.return}while(null!==f)}qu=Cs(qu)}catch(b){t=b;continue}break}}function ws(){var e=Cu.current;return Cu.current=bo,null===e?bo:e}function bs(e,t){e<Ku&&2<e&&(Ku=e),null!==t&&e<Hu&&2<e&&(Hu=e,Gu=t)}function xs(e){e>Qu&&(Qu=e)}function Ts(){for(;null!==qu;)qu=Is(qu)}function Es(){for(;null!==qu&&!ji();)qu=Is(qu)}function Is(e){var t=Eu(e.alternate,e,zu);return e.memoizedProps=e.pendingProps,null===t&&(t=Cs(e)),Su.current=null,t}function Cs(e){qu=e;do{var t=qu.alternate;if(e=qu.return,0===(2048&qu.effectTag)){if(t=ru(t,qu,zu),1===zu||1!==qu.childExpirationTime){for(var n=0,r=qu.child;null!==r;){var i=r.expirationTime,a=r.childExpirationTime;i>n&&(n=i),a>n&&(n=a),r=r.sibling}qu.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=qu.firstEffect),null!==qu.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=qu.firstEffect),e.lastEffect=qu.lastEffect),1<qu.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=qu:e.firstEffect=qu,e.lastEffect=qu))}else{if(null!==(t=iu(qu)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=qu.sibling))return t;qu=e}while(null!==qu);return Bu===Ou&&(Bu=Uu),null}function Ss(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Ps(e){var t=Hi();return Qi(99,As.bind(null,e,t)),null}function As(e,t){do{Rs()}while(null!==rs);if((ju&(Nu|Ru))!==Pu)throw Error(o(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=Ss(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Vu&&(qu=Vu=null,zu=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var a=ju;ju|=Ru,Su.current=null,wn=Gt;var u=vn();if(yn(u)){if("selectionStart"in u)var s={start:u.selectionStart,end:u.selectionEnd};else e:{var c=(s=(s=u.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(c&&0!==c.rangeCount){s=c.anchorNode;var l=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{s.nodeType,f.nodeType}catch(I){s=null;break e}var h=0,d=-1,p=-1,v=0,y=0,m=u,g=null;t:for(;;){for(var k;m!==s||0!==l&&3!==m.nodeType||(d=h+l),m!==f||0!==c&&3!==m.nodeType||(p=h+c),3===m.nodeType&&(h+=m.nodeValue.length),null!==(k=m.firstChild);)g=m,m=k;for(;;){if(m===u)break t;if(g===s&&++v===l&&(d=h),g===f&&++y===c&&(p=h),null!==(k=m.nextSibling))break;g=(m=g).parentNode}m=k}s=-1===d||-1===p?null:{start:d,end:p}}else s=null}s=s||{start:0,end:0}}else s=null;bn={activeElementDetached:null,focusedElem:u,selectionRange:s},Gt=!1,Xu=i;do{try{Ns()}catch(I){if(null===Xu)throw Error(o(330));Ls(Xu,I),Xu=Xu.nextEffect}}while(null!==Xu);Xu=i;do{try{for(u=e,s=t;null!==Xu;){var _=Xu.effectTag;if(16&_&&qe(Xu.stateNode,""),128&_){var w=Xu.alternate;if(null!==w){var b=w.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&_){case 2:yu(Xu),Xu.effectTag&=-3;break;case 6:yu(Xu),Xu.effectTag&=-3,_u(Xu.alternate,Xu);break;case 1024:Xu.effectTag&=-1025;break;case 1028:Xu.effectTag&=-1025,_u(Xu.alternate,Xu);break;case 4:_u(Xu.alternate,Xu);break;case 8:ku(u,l=Xu,s),pu(l)}Xu=Xu.nextEffect}}catch(I){if(null===Xu)throw Error(o(330));Ls(Xu,I),Xu=Xu.nextEffect}}while(null!==Xu);if(b=bn,w=vn(),_=b.focusedElem,s=b.selectionRange,w!==_&&_&&_.ownerDocument&&pn(_.ownerDocument.documentElement,_)){null!==s&&yn(_)&&(w=s.start,void 0===(b=s.end)&&(b=w),"selectionStart"in _?(_.selectionStart=w,_.selectionEnd=Math.min(b,_.value.length)):(b=(w=_.ownerDocument||document)&&w.defaultView||window).getSelection&&(b=b.getSelection(),l=_.textContent.length,u=Math.min(s.start,l),s=void 0===s.end?u:Math.min(s.end,l),!b.extend&&u>s&&(l=s,s=u,u=l),l=dn(_,u),f=dn(_,s),l&&f&&(1!==b.rangeCount||b.anchorNode!==l.node||b.anchorOffset!==l.offset||b.focusNode!==f.node||b.focusOffset!==f.offset)&&((w=w.createRange()).setStart(l.node,l.offset),b.removeAllRanges(),u>s?(b.addRange(w),b.extend(f.node,f.offset)):(w.setEnd(f.node,f.offset),b.addRange(w))))),w=[];for(b=_;b=b.parentNode;)1===b.nodeType&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<w.length;_++)(b=w[_]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Gt=!!wn,bn=wn=null,e.current=n,Xu=i;do{try{for(_=e;null!==Xu;){var x=Xu.effectTag;if(36&x&&hu(_,Xu.alternate,Xu),128&x){w=void 0;var T=Xu.ref;if(null!==T){var E=Xu.stateNode;Xu.tag,w=E,"function"===typeof T?T(w):T.current=w}}Xu=Xu.nextEffect}}catch(I){if(null===Xu)throw Error(o(330));Ls(Xu,I),Xu=Xu.nextEffect}}while(null!==Xu);Xu=null,Vi(),ju=a}else e.current=n;if(ns)ns=!1,rs=e,is=t;else for(Xu=i;null!==Xu;)t=Xu.nextEffect,Xu.nextEffect=null,Xu=t;if(0===(t=e.firstPendingTime)&&(ts=null),1073741823===t?e===us?os++:(os=0,us=e):os=0,"function"===typeof Us&&Us(n.stateNode,r),ps(e),Zu)throw Zu=!1,e=es,es=null,e;return(ju&Au)!==Pu||Ji(),null}function Ns(){for(;null!==Xu;){var e=Xu.effectTag;0!==(256&e)&&cu(Xu.alternate,Xu),0===(512&e)||ns||(ns=!0,Yi(97,(function(){return Rs(),null}))),Xu=Xu.nextEffect}}function Rs(){if(90!==is){var e=97<is?97:is;return is=90,Qi(e,Os)}}function Os(){if(null===rs)return!1;var e=rs;if(rs=null,(ju&(Nu|Ru))!==Pu)throw Error(o(331));var t=ju;for(ju|=Ru,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:lu(5,n),fu(5,n)}}catch(r){if(null===e)throw Error(o(330));Ls(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return ju=t,Ji(),!0}function Ds(e,t,n){pa(e,t=xu(e,t=au(n,t),1073741823)),null!==(e=hs(e,1073741823))&&ps(e)}function Ls(e,t){if(3===e.tag)Ds(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Ds(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ts||!ts.has(r))){pa(n,e=Tu(n,e=au(t,e),1073741823)),null!==(n=hs(n,1073741823))&&ps(n);break}}n=n.return}}function Ms(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Vu===e&&zu===n?Bu===Fu||Bu===Mu&&1073741823===Ku&&Ki()-$u<Ju?ks(e,zu):Yu=!0:Ys(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,ps(e)))}function Fs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=ls(t=cs(),e,null)),null!==(e=hs(e,t))&&ps(e)}Eu=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||gi.current)Mo=!0;else{if(r<n){switch(Mo=!1,t.tag){case 3:Ko(t),Do();break;case 5:if(ja(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:wi(t.type)&&Ei(t);break;case 4:Fa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,vi(ta,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Jo(e,t,n):(vi(qa,1&qa.current),null!==(t=tu(e,t,n))?t.sibling:null);vi(qa,1&qa.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return eu(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),vi(qa,qa.current),!r)return null}return tu(e,t,n)}Mo=!1}}else Mo=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=_i(t,mi.current),sa(t,n),i=Za(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,wi(r)){var a=!0;Ei(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,fa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&_a(t,r,u,e),i.updater=wa,t.stateNode=i,i._reactInternalFiber=t,Ea(t,r,e,n),t=Wo(null,t,r,!0,a,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,a=t.tag=function(e){if("function"===typeof e)return zs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===se)return 11;if(e===fe)return 14}return 2}(i),e=ea(i,e),a){case 0:t=zo(null,t,i,e,n);break e;case 1:t=Bo(null,t,i,e,n);break e;case 11:t=Uo(null,t,i,e,n);break e;case 14:t=jo(null,t,i,ea(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,zo(e,t,r,i=t.elementType===r?i:ea(r,i),n);case 1:return r=t.type,i=t.pendingProps,Bo(e,t,r,i=t.elementType===r?i:ea(r,i),n);case 3:if(Ko(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ha(e,t),ya(t,r,null,n),(r=t.memoizedState.element)===i)Do(),t=tu(e,t,n);else{if((i=t.stateNode.hydrate)&&(Co=Cn(t.stateNode.containerInfo.firstChild),Io=t,i=So=!0),i)for(n=Na(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Fo(e,t,r,n),Do();t=t.child}return t;case 5:return ja(t),null===e&&No(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Tn(r,i)?u=null:null!==a&&Tn(r,a)&&(t.effectTag|=16),qo(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Fo(e,t,u,n),t=t.child),t;case 6:return null===e&&No(t),null;case 13:return Jo(e,t,n);case 4:return Fa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Aa(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:ea(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(vi(ta,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=Br(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!gi.current){t=tu(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=da(n,null)).tag=2,pa(s,l)),s.expirationTime<n&&(s.expirationTime=n),null!==(l=s.alternate)&&l.expirationTime<n&&(l.expirationTime=n),ua(s.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,sa(t,n),r=r(i=ca(i,a.unstable_observedBits)),t.effectTag|=1,Fo(e,t,r,n),t.child;case 14:return a=ea(i=t.type,t.pendingProps),jo(e,t,i,a=ea(i.type,a),r,n);case 15:return Vo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ea(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,wi(r)?(e=!0,Ei(t)):e=!1,sa(t,n),xa(t,r,i),Ea(t,r,i,n),Wo(null,t,r,!0,e,n);case 19:return eu(e,t,n)}throw Error(o(156,t.tag))};var Us=null,js=null;function Vs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function qs(e,t,n,r){return new Vs(e,t,n,r)}function zs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bs(e,t){var n=e.alternate;return null===n?((n=qs(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ws(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)zs(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case ne:return Ks(n.children,i,a,t);case ue:u=8,i|=7;break;case re:u=8,i|=1;break;case ie:return(e=qs(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=a,e;case ce:return(e=qs(13,n,t,i)).type=ce,e.elementType=ce,e.expirationTime=a,e;case le:return(e=qs(19,n,t,i)).elementType=le,e.expirationTime=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case ae:u=10;break e;case oe:u=9;break e;case se:u=11;break e;case fe:u=14;break e;case he:u=16,r=null;break e;case de:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=qs(u,n,t,i)).elementType=e,t.type=r,t.expirationTime=a,t}function Ks(e,t,n,r){return(e=qs(7,e,r,t)).expirationTime=n,e}function Hs(e,t,n){return(e=qs(6,e,null,t)).expirationTime=n,e}function Gs(e,t,n){return(t=qs(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qs(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Ys(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function $s(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Js(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Xs(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Zs(e,t,n,r){var i=t.current,a=cs(),u=ga.suspense;a=ls(a,i,u);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(wi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(wi(c)){n=Ti(n,c,s);break e}}n=s}else n=yi;return null===t.context?t.context=n:t.pendingContext=n,(t=da(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),pa(i,t),fs(i,a),a}function ec(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tc(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function nc(e,t){tc(e,t),(e=e.alternate)&&tc(e,t)}function rc(e,t,n){var r=new Qs(e,t,n=null!=n&&!0===n.hydrate),i=qs(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,fa(i),e[Rn]=r.current,n&&0!==t&&function(e,t){var n=Ze(t);Ct.forEach((function(e){vt(e,t,n)})),St.forEach((function(e){vt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function ic(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ac(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=ec(o);u.call(e)}}Zs(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new rc(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=ec(o);s.call(e)}}gs((function(){Zs(t,o,e,i)}))}return ec(o)}function oc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ic(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}rc.prototype.render=function(e){Zs(e,this._internalRoot,null,null)},rc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zs(null,e,null,(function(){t[Rn]=null}))},yt=function(e){if(13===e.tag){var t=Zi(cs(),150,100);fs(e,t),nc(e,t)}},mt=function(e){13===e.tag&&(fs(e,3),nc(e,3))},gt=function(e){if(13===e.tag){var t=cs();fs(e,t=ls(t,e,null)),nc(e,t)}},S=function(e,t,n){switch(t){case"input":if(Ee(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Mn(r);if(!i)throw Error(o(90));we(r),Ee(r,i)}}}break;case"textarea":Re(e,n);break;case"select":null!=(t=n.value)&&Pe(e,!!n.multiple,t,!1)}},D=ms,L=function(e,t,n,r,i){var a=ju;ju|=4;try{return Qi(98,e.bind(null,t,n,r,i))}finally{(ju=a)===Pu&&Ji()}},M=function(){(ju&(1|Nu|Ru))===Pu&&(function(){if(null!==as){var e=as;as=null,e.forEach((function(e,t){Xs(t,e),ps(t)})),Ji()}}(),Rs())},F=function(e,t){var n=ju;ju|=2;try{return e(t)}finally{(ju=n)===Pu&&Ji()}};var uc={Events:[Dn,Ln,Mn,I,x,Bn,function(e){at(e,zn)},R,O,Xt,st,Rs,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Us=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},js=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:On,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=oc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if((ju&(Nu|Ru))!==Pu)throw Error(o(187));var n=ju;ju|=1;try{return Qi(99,e.bind(null,t))}finally{ju=n,Ji()}},t.hydrate=function(e,t,n){if(!ic(t))throw Error(o(200));return ac(null,e,t,!0,n)},t.render=function(e,t,n){if(!ic(t))throw Error(o(200));return ac(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ic(e))throw Error(o(40));return!!e._reactRootContainer&&(gs((function(){ac(null,null,e,!1,(function(){e._reactRootContainer=null,e[Rn]=null}))})),!0)},t.unstable_batchedUpdates=ms,t.unstable_createPortal=function(e,t){return oc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ic(n))throw Error(o(200));if(null==e||void 0===e._reactInternalFiber)throw Error(o(38));return ac(e,t,n,!1,r)},t.version="16.14.0"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},25:function(e,t,n){"use strict";function r(e){return e&&"object"===typeof e&&"default"in e?e.default:e}var i=n(271),a=r(n(791)),o=n(610),u=r(n(7)),s=r(n(501)),c=r(n(90));function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function f(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,h(e,t)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function d(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var p=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=o.createBrowserHistory(t.props),t}return f(t,e),t.prototype.render=function(){return a.createElement(i.Router,{history:this.history,children:this.props.children})},t}(a.Component);p.propTypes={basename:u.string,children:u.node,forceRefresh:u.bool,getUserConfirmation:u.func,keyLength:u.number},p.prototype.componentDidMount=function(){s(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")};var v=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=o.createHashHistory(t.props),t}return f(t,e),t.prototype.render=function(){return a.createElement(i.Router,{history:this.history,children:this.props.children})},t}(a.Component);v.propTypes={basename:u.string,children:u.node,getUserConfirmation:u.func,hashType:u.oneOf(["hashbang","noslash","slash"])},v.prototype.componentDidMount=function(){s(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")};var y=function(e,t){return"function"===typeof e?e(t):e},m=function(e,t){return"string"===typeof e?o.createLocation(e,null,null,t):e},g=function(e){return e},k=a.forwardRef;"undefined"===typeof k&&(k=g);var _=k((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,o=d(e,["innerRef","navigate","onClick"]),u=o.target,s=l({},o,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return s.ref=g!==k&&t||n,a.createElement("a",s)}));_.displayName="LinkAnchor";var w=k((function(e,t){var n=e.component,r=void 0===n?_:n,u=e.replace,s=e.to,f=e.innerRef,h=d(e,["component","replace","to","innerRef"]);return a.createElement(i.__RouterContext.Consumer,null,(function(e){e||c(!1,"You should not use <Link> outside a <Router>");var n=e.history,i=m(y(s,e.location),e.location),d=i?n.createHref(i):"",p=l({},h,{href:d,navigate:function(){var t=y(s,e.location),r=o.createPath(e.location)===o.createPath(m(t));(u||r?n.replace:n.push)(t)}});return g!==k?p.ref=t||f:p.innerRef=f,a.createElement(r,p)}))})),b=u.oneOfType([u.string,u.object,u.func]),x=u.oneOfType([u.string,u.func,u.shape({current:u.any})]);w.displayName="Link",w.propTypes={innerRef:x,onClick:u.func,replace:u.bool,target:u.string,to:b.isRequired};var T=function(e){return e},E=a.forwardRef;"undefined"===typeof E&&(E=T);var I=E((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,o=e.activeClassName,u=void 0===o?"active":o,s=e.activeStyle,f=e.className,h=e.exact,p=e.isActive,v=e.location,g=e.sensitive,k=e.strict,_=e.style,b=e.to,x=e.innerRef,I=d(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return a.createElement(i.__RouterContext.Consumer,null,(function(e){e||c(!1,"You should not use <NavLink> outside a <Router>");var n=v||e.location,o=m(y(b,n),n),d=o.pathname,C=d&&d.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),S=C?i.matchPath(n.pathname,{path:C,exact:h,sensitive:g,strict:k}):null,P=!!(p?p(S,n):S),A="function"===typeof f?f(P):f,N="function"===typeof _?_(P):_;P&&(A=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(A,u),N=l({},N,s));var R=l({"aria-current":P&&r||null,className:A,style:N,to:o},I);return T!==E?R.ref=t||x:R.innerRef=x,a.createElement(w,R)}))}));I.displayName="NavLink";var C=u.oneOf(["page","step","location","date","time","true","false"]);I.propTypes=l({},w.propTypes,{"aria-current":C,activeClassName:u.string,activeStyle:u.object,className:u.oneOfType([u.string,u.func]),exact:u.bool,isActive:u.func,location:u.object,sensitive:u.bool,strict:u.bool,style:u.oneOfType([u.object,u.func])}),t.rU=w},542:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=n(271),a=r(n(791)),o=n(610);n(7),n(501);var u=r(n(90));function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){e.prototype=Object.create(t.prototype),l(e.prototype.constructor=e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}var h=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=o.createBrowserHistory(t.props),t}return c(t,e),t.prototype.render=function(){return a.createElement(i.Router,{history:this.history,children:this.props.children})},t}(a.Component),d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=o.createHashHistory(t.props),t}return c(t,e),t.prototype.render=function(){return a.createElement(i.Router,{history:this.history,children:this.props.children})},t}(a.Component),p=function(e,t){return"function"==typeof e?e(t):e},v=function(e,t){return"string"==typeof e?o.createLocation(e,null,null,t):e},y=function(e){return e},m=a.forwardRef;void 0===m&&(m=y);var g=m((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,o=f(e,["innerRef","navigate","onClick"]),u=o.target,c=s({},o,{onClick:function(t){try{i&&i(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)||(t.preventDefault(),r())}});return c.ref=y!==m&&t||n,a.createElement("a",c)})),k=m((function(e,t){var n=e.component,r=void 0===n?g:n,c=e.replace,l=e.to,h=e.innerRef,d=f(e,["component","replace","to","innerRef"]);return a.createElement(i.__RouterContext.Consumer,null,(function(e){e||u(!1);var n=e.history,i=v(p(l,e.location),e.location),f=i?n.createHref(i):"",g=s({},d,{href:f,navigate:function(){var t=p(l,e.location),r=o.createPath(e.location)===o.createPath(v(t));(c||r?n.replace:n.push)(t)}});return y!==m?g.ref=t||h:g.innerRef=h,a.createElement(r,g)}))})),_=function(e){return e},w=a.forwardRef;void 0===w&&(w=_);var b=w((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,o=e.activeClassName,c=void 0===o?"active":o,l=e.activeStyle,h=e.className,d=e.exact,y=e.isActive,m=e.location,g=e.sensitive,b=e.strict,x=e.style,T=e.to,E=e.innerRef,I=f(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return a.createElement(i.__RouterContext.Consumer,null,(function(e){e||u(!1);var n=m||e.location,o=v(p(T,n),n),f=o.pathname,C=f&&f.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),S=C?i.matchPath(n.pathname,{path:C,exact:d,sensitive:g,strict:b}):null,P=!!(y?y(S,n):S),A="function"==typeof h?h(P):h,N="function"==typeof x?x(P):x;P&&(A=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(A,c),N=s({},N,l));var R=s({"aria-current":P&&r||null,className:A,style:N,to:o},I);return _!==w?R.ref=t||E:R.innerRef=E,a.createElement(k,R)}))}));Object.defineProperty(t,"k6",{enumerable:!0,get:function(){return i.useHistory}})},271:function(e,t,n){"use strict";n.r(t),n.d(t,{MemoryRouter:function(){return x},Prompt:function(){return E},Redirect:function(){return A},Route:function(){return L},Router:function(){return b},StaticRouter:function(){return q},Switch:function(){return z},__HistoryContext:function(){return _},__RouterContext:function(){return w},generatePath:function(){return P},matchPath:function(){return D},useHistory:function(){return K},useLocation:function(){return H},useParams:function(){return G},useRouteMatch:function(){return Q},withRouter:function(){return B}});var r=n(578),i=n(791),a=n(610),o=n(7),u=n.n(o),s=1073741823,c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var l=i.createContext||function(e,t){var n,a,o="__create-react-context-"+function(){var e="__global_unique_id__";return c[e]=(c[e]||0)+1}()+"__",l=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}(t.props.value),t}(0,r.Z)(n,e);var i=n.prototype;return i.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},i.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;((a=r)===(o=i)?0!==a||1/a===1/o:a!==a&&o!==o)?n=0:(n="function"===typeof t?t(r,i):s,0!==(n|=0)&&this.emitter.set(e.value,n))}var a,o},i.render=function(){return this.props.children},n}(i.Component);l.childContextTypes=((n={})[o]=u().object.isRequired,n);var f=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}(0,r.Z)(n,t);var i=n.prototype;return i.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?s:t},i.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?s:e},i.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},i.getValue=function(){return this.context[o]?this.context[o].get():e},i.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(i.Component);return f.contextTypes=((a={})[o]=u().object,a),{Provider:l,Consumer:f}},f=l,h=n(554),d=n(462),p=n(239),v=n.n(p),y=(n(228),n(366)),m=n(110),g=n.n(m),k=function(e){var t=f();return t.displayName=e,t},_=k("Router-History"),w=k("Router"),b=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}(0,r.Z)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return i.createElement(w.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},i.createElement(_.Provider,{children:this.props.children||null,value:this.props.history}))},t}(i.Component);var x=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=(0,a.createMemoryHistory)(t.props),t}return(0,r.Z)(t,e),t.prototype.render=function(){return i.createElement(b,{history:this.history,children:this.props.children})},t}(i.Component);var T=function(e){function t(){return e.apply(this,arguments)||this}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(i.Component);function E(e){var t=e.message,n=e.when,r=void 0===n||n;return i.createElement(w.Consumer,null,(function(e){if(e||(0,h.Z)(!1),!r||e.staticContext)return null;var n=e.history.block;return i.createElement(T,{onMount:function(e){e.release=n(t)},onUpdate:function(e,r){r.message!==t&&(e.release(),e.release=n(t))},onUnmount:function(e){e.release()},message:t})}))}var I={},C=1e4,S=0;function P(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(I[e])return I[e];var t=v().compile(e);return S<C&&(I[e]=t,S++),t}(e)(t,{pretty:!0})}function A(e){var t=e.computedMatch,n=e.to,r=e.push,o=void 0!==r&&r;return i.createElement(w.Consumer,null,(function(e){e||(0,h.Z)(!1);var r=e.history,u=e.staticContext,s=o?r.push:r.replace,c=(0,a.createLocation)(t?"string"===typeof n?P(n,t.params):(0,d.Z)({},n,{pathname:P(n.pathname,t.params)}):n);return u?(s(c),null):i.createElement(T,{onMount:function(){s(c)},onUpdate:function(e,t){var n=(0,a.createLocation)(t.to);(0,a.locationsAreEqual)(n,(0,d.Z)({},c,{key:n.key}))||s(c)},to:n})}))}var N={},R=1e4,O=0;function D(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=N[n]||(N[n]={});if(r[e])return r[e];var i=[],a={regexp:v()(e,i,t),keys:i};return O<R&&(r[e]=a,O++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],f=s.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var L=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this;return i.createElement(w.Consumer,null,(function(t){t||(0,h.Z)(!1);var n=e.props.location||t.location,r=e.props.computedMatch?e.props.computedMatch:e.props.path?D(n.pathname,e.props):t.match,a=(0,d.Z)({},t,{location:n,match:r}),o=e.props,u=o.children,s=o.component,c=o.render;return Array.isArray(u)&&function(e){return 0===i.Children.count(e)}(u)&&(u=null),i.createElement(w.Provider,{value:a},a.match?u?"function"===typeof u?u(a):u:s?i.createElement(s,a):c?c(a):null:"function"===typeof u?u(a):null)}))},t}(i.Component);function M(e){return"/"===e.charAt(0)?e:"/"+e}function F(e,t){if(!e)return t;var n=M(e);return 0!==t.pathname.indexOf(n)?t:(0,d.Z)({},t,{pathname:t.pathname.substr(n.length)})}function U(e){return"string"===typeof e?e:(0,a.createPath)(e)}function j(e){return function(){(0,h.Z)(!1)}}function V(){}var q=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handlePush=function(e){return t.navigateTo(e,"PUSH")},t.handleReplace=function(e){return t.navigateTo(e,"REPLACE")},t.handleListen=function(){return V},t.handleBlock=function(){return V},t}(0,r.Z)(t,e);var n=t.prototype;return n.navigateTo=function(e,t){var n=this.props,r=n.basename,i=void 0===r?"":r,o=n.context,u=void 0===o?{}:o;u.action=t,u.location=function(e,t){return e?(0,d.Z)({},t,{pathname:M(e)+t.pathname}):t}(i,(0,a.createLocation)(e)),u.url=U(u.location)},n.render=function(){var e=this.props,t=e.basename,n=void 0===t?"":t,r=e.context,o=void 0===r?{}:r,u=e.location,s=void 0===u?"/":u,c=(0,y.Z)(e,["basename","context","location"]),l={createHref:function(e){return M(n+U(e))},action:"POP",location:F(n,(0,a.createLocation)(s)),push:this.handlePush,replace:this.handleReplace,go:j(),goBack:j(),goForward:j(),listen:this.handleListen,block:this.handleBlock};return i.createElement(b,(0,d.Z)({},c,{history:l,staticContext:o}))},t}(i.Component);var z=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this;return i.createElement(w.Consumer,null,(function(t){t||(0,h.Z)(!1);var n,r,a=e.props.location||t.location;return i.Children.forEach(e.props.children,(function(e){if(null==r&&i.isValidElement(e)){n=e;var o=e.props.path||e.props.from;r=o?D(a.pathname,(0,d.Z)({},e.props,{path:o})):t.match}})),r?i.cloneElement(n,{location:a,computedMatch:r}):null}))},t}(i.Component);function B(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,r=(0,y.Z)(t,["wrappedComponentRef"]);return i.createElement(w.Consumer,null,(function(t){return t||(0,h.Z)(!1),i.createElement(e,(0,d.Z)({},r,t,{ref:n}))}))};return n.displayName=t,n.WrappedComponent=e,g()(n,e)}var W=i.useContext;function K(){return W(_)}function H(){return W(w).location}function G(){var e=W(w).match;return e?e.params:{}}function Q(e){var t=H(),n=W(w).match;return e?D(t.pathname,e):n}},381:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},239:function(e,t,n){var r=n(381);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(u+=e.slice(o,d),o=d+f.length,h)u+=h[1];else{var p=e[o],v=n[2],y=n[3],m=n[4],g=n[5],k=n[6],_=n[7];u&&(r.push(u),u="");var w=null!=v&&null!=p&&p!==v,b="+"===k||"*"===k,x="?"===k||"*"===k,T=n[2]||l,E=m||g;r.push({name:y||a++,prefix:v||"",delimiter:T,optional:x,repeat:b,partial:w,asterisk:!!_,pattern:E?c(E):_?".*":"[^"+s(T)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=u[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=s(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var h=s(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},195:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function b(e){return w(e)===f}},228:function(e,t,n){"use strict";n(195)},374:function(e,t,n){"use strict";var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i="function"===typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,u=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,y="function"===typeof Symbol&&Symbol.iterator;function m(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k={};function _(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||g}function w(){}function b(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||g}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(m(85));this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=_.prototype;var x=b.prototype=new w;x.constructor=b,r(x,_.prototype),x.isPureReactComponent=!0;var T={current:null},E=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var r,i={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,r)&&!I.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:a,type:e,key:o,ref:u,props:i,_owner:T.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var P=/\/+/g,A=[];function N(e,t,n,r){if(A.length){var i=A.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function R(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>A.length&&A.push(e)}function O(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var u=!1;if(null===e)u=!0;else switch(i){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case a:case o:u=!0}}if(u)return n(r,e,""===t?"."+L(e,0):t),1;if(u=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){var c=t+L(i=e[s],s);u+=O(i,c,n,r)}else if(null===e||"object"!==typeof e?c=null:c="function"===typeof(c=y&&e[y]||e["@@iterator"])?c:null,"function"===typeof c)for(e=c.call(e),s=0;!(i=e.next()).done;)u+=O(i=i.value,c=t+L(i,s++),n,r);else if("object"===i)throw n=""+e,Error(m(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return u}function D(e,t,n){return null==e?0:O(e,"",t,n)}function L(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function M(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?U(e,r,n,(function(e){return e})):null!=e&&(S(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(P,"$&/")+"/")+n)),r.push(e))}function U(e,t,n,r,i){var a="";null!=n&&(a=(""+n).replace(P,"$&/")+"/"),D(e,F,t=N(t,a,r,i)),R(t)}var j={current:null};function V(){var e=j.current;if(null===e)throw Error(m(321));return e}var q={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:T,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return U(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;D(e,M,t=N(null,null,t,n)),R(t)},count:function(e){return D(e,(function(){return null}),null)},toArray:function(e){var t=[];return U(e,t,null,(function(e){return e})),t},only:function(e){if(!S(e))throw Error(m(143));return e}},t.Component=_,t.Fragment=u,t.Profiler=c,t.PureComponent=b,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(m(267,e));var i=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=T.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)E.call(t,l)&&!I.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:a,type:e.type,key:o,ref:u,props:i,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:h,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:v,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return V().useCallback(e,t)},t.useContext=function(e,t){return V().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return V().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return V().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return V().useLayoutEffect(e,t)},t.useMemo=function(e,t){return V().useMemo(e,t)},t.useReducer=function(e,t,n){return V().useReducer(e,t,n)},t.useRef=function(e){return V().useRef(e)},t.useState=function(e){return V().useState(e)},t.version="16.14.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";var n,r,i,a,o;if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,s=null,c=function e(){if(null!==u)try{var n=t.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(e,0),r}},l=Date.now();t.unstable_now=function(){return Date.now()-l},n=function(e){null!==u?setTimeout(n,0,e):(u=e,setTimeout(c,0))},r=function(e,t){s=setTimeout(e,t)},i=function(){clearTimeout(s)},a=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var f=window.performance,h=window.Date,d=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof f&&"function"===typeof f.now)t.unstable_now=function(){return f.now()};else{var y=h.now();t.unstable_now=function(){return h.now()-y}}var m=!1,g=null,k=-1,_=5,w=0;a=function(){return t.unstable_now()>=w},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):_=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,x=b.port2;b.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();w=e+_;try{g(!0,e)?x.postMessage(null):(m=!1,g=null)}catch(n){throw x.postMessage(null),n}}else m=!1},n=function(e){g=e,m||(m=!0,x.postMessage(null))},r=function(e,n){k=d((function(){e(t.unstable_now())}),n)},i=function(){p(k),k=-1}}function T(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<C(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>C(o,n))void 0!==s&&0>C(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>C(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function C(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var S=[],P=[],A=1,N=null,R=3,O=!1,D=!1,L=!1;function M(e){for(var t=E(P);null!==t;){if(null===t.callback)I(P);else{if(!(t.startTime<=e))break;I(P),t.sortIndex=t.expirationTime,T(S,t)}t=E(P)}}function F(e){if(L=!1,M(e),!D)if(null!==E(S))D=!0,n(U);else{var t=E(P);null!==t&&r(F,t.startTime-e)}}function U(e,n){D=!1,L&&(L=!1,i()),O=!0;var o=R;try{for(M(n),N=E(S);null!==N&&(!(N.expirationTime>n)||e&&!a());){var u=N.callback;if(null!==u){N.callback=null,R=N.priorityLevel;var s=u(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?N.callback=s:N===E(S)&&I(S),M(n)}else I(S);N=E(S)}if(null!==N)var c=!0;else{var l=E(P);null!==l&&r(F,l.startTime-n),c=!1}return c}finally{N=null,R=o,O=!1}}function j(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var V=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){D||O||(D=!0,n(U))},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return E(S)},t.unstable_next=function(e){switch(R){case 1:case 2:case 3:var t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=V,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();if("object"===typeof o&&null!==o){var s=o.delay;s="number"===typeof s&&0<s?u+s:u,o="number"===typeof o.timeout?o.timeout:j(e)}else o=j(e),s=u;return e={id:A++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>u?(e.sortIndex=s,T(P,e),null===E(S)&&e===E(P)&&(L?i():L=!0,r(F,s-u))):(e.sortIndex=o,T(S,e),D||O||(D=!0,n(U))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();M(e);var n=E(S);return n!==N&&null!==N&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<N.expirationTime||a()},t.unstable_wrapCallback=function(e){var t=R;return function(){var n=R;R=t;try{return e.apply(this,arguments)}finally{R=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},90:function(e){"use strict";var t="Invariant failed";e.exports=function(e,n){if(!e)throw new Error(t)}},501:function(e,t,n){"use strict";n.r(t);t.default=function(e,t){}},462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},578:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(611);function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,r.Z)(e,t)}},366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})},611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},554:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=!0,i="Invariant failed";function a(e,t){if(!e){if(r)throw new Error(i);var n="function"===typeof t?t():t,a=n?"".concat(i,": ").concat(n):i;throw new Error(a)}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return de},SDK_VERSION:function(){return Mt},_DEFAULT_ENTRY_NAME:function(){return xt},_addComponent:function(){return Ct},_addOrOverwriteComponent:function(){return St},_apps:function(){return Et},_clearComponents:function(){return Rt},_components:function(){return It},_getProvider:function(){return At},_registerComponent:function(){return Pt},_removeServiceInstance:function(){return Nt},deleteApp:function(){return Vt},getApp:function(){return Ut},getApps:function(){return jt},initializeApp:function(){return Ft},onLog:function(){return Bt},registerVersion:function(){return zt},setLogLevel:function(){return Wt}});var t=n(791),r=n(164);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||o(e,t)||u()}var c=n(271),l=n(578),f=n(610),h=n(462),d=n(366),p=n(554);t.Component;var v=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=(0,f.createHashHistory)(t.props),t}return(0,l.Z)(n,e),n.prototype.render=function(){return t.createElement(c.Router,{history:this.history,children:this.props.children})},n}(t.Component);var y=function(e,t){return"function"===typeof e?e(t):e},m=function(e,t){return"string"===typeof e?(0,f.createLocation)(e,null,null,t):e},g=function(e){return e},k=t.forwardRef;"undefined"===typeof k&&(k=g);var _=k((function(e,n){var r=e.innerRef,i=e.navigate,a=e.onClick,o=(0,d.Z)(e,["innerRef","navigate","onClick"]),u=o.target,s=(0,h.Z)({},o,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return s.ref=g!==k&&n||r,t.createElement("a",s)}));var w=k((function(e,n){var r=e.component,i=void 0===r?_:r,a=e.replace,o=e.to,u=e.innerRef,s=(0,d.Z)(e,["component","replace","to","innerRef"]);return t.createElement(c.__RouterContext.Consumer,null,(function(e){e||(0,p.Z)(!1);var r=e.history,c=m(y(o,e.location),e.location),l=c?r.createHref(c):"",d=(0,h.Z)({},s,{href:l,navigate:function(){var t=y(o,e.location),n=(0,f.createPath)(e.location)===(0,f.createPath)(m(t));(a||n?r.replace:r.push)(t)}});return g!==k?d.ref=n||u:d.innerRef=u,t.createElement(i,d)}))})),b=function(e){return e},x=t.forwardRef;"undefined"===typeof x&&(x=b);x((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.activeClassName,o=void 0===a?"active":a,u=e.activeStyle,s=e.className,l=e.exact,f=e.isActive,v=e.location,g=e.sensitive,k=e.strict,_=e.style,T=e.to,E=e.innerRef,I=(0,d.Z)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(c.__RouterContext.Consumer,null,(function(e){e||(0,p.Z)(!1);var r=v||e.location,a=m(y(T,r),r),d=a.pathname,C=d&&d.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),S=C?(0,c.matchPath)(r.pathname,{path:C,exact:l,sensitive:g,strict:k}):null,P=!!(f?f(S,r):S),A="function"===typeof s?s(P):s,N="function"===typeof _?_(P):_;P&&(A=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(A,o),N=(0,h.Z)({},N,u));var R=(0,h.Z)({"aria-current":P&&i||null,className:A,style:N,to:a},I);return b!==x?R.ref=n||E:R.innerRef=E,t.createElement(w,R)}))}));function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function E(){E=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),u=new R(r||[]);return i(o,"_invoke",{value:S(e,n,u)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",v="completed",y={};function m(){}function g(){}function k(){}var _={};c(_,o,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(O([])));b&&b!==n&&r.call(b,o)&&(_=b);var x=k.prototype=m.prototype=Object.create(_);function I(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,a,o,u){var s=f(e[i],e,a);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==T(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(l).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function S(t,n,r){var i=h;return function(a,o){if(i===p)throw new Error("Generator is already running");if(i===v){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var u=r.delegate;if(u){var s=P(u,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=f(t,n,r);if("normal"===c.type){if(i=r.done?v:d,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=v,r.method="throw",r.arg=c.arg)}}}function P(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=f(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(T(t)+" is not iterable")}return g.prototype=k,i(x,"constructor",{value:k,configurable:!0}),i(k,"constructor",{value:g,configurable:!0}),g.displayName=c(k,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,c(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},I(C.prototype),c(C.prototype,u,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new C(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},I(x),c(x,s,"Generator"),c(x,o,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function I(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(BP){return void n(BP)}u.done?t(s):Promise.resolve(s).then(r,i)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){I(a,r,i,o,u,"next",e)}function u(e){I(a,r,i,o,u,"throw",e)}o(void 0)}))}}function S(e){var t=function(e,t){if("object"!==T(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===T(t)?t:String(t)}function P(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function R(e,t,n){return t&&N(e.prototype,t),n&&N(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function O(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var L=n(611);function M(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,L.Z)(e,t)}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}function U(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function j(e){var t=U();return function(){var n,r=F(e);if(t){var i=F(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===T(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return D(e)}(this,n)}}function V(e,t,n){return V=U()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&(0,L.Z)(i,n.prototype),i},V.apply(null,arguments)}function q(e){var t="function"===typeof Map?new Map:void 0;return q=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"===typeof e}}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return V(e,arguments,F(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,L.Z)(n,e)},q(e)}var z=!1,B=!1,W="${JSCORE_VERSION}",K=function(e,t){if(!e)throw H(t)},H=function(e){return new Error("Firebase Database ("+W+") INTERNAL ASSERT FAILED: "+e)},G=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Q={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(G(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new Y;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Y=function(e){M(n,e);var t=j(n);function n(){var e;return A(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return R(n)}(q(Error)),$=function(e){var t=G(e);return Q.encodeByteArray(t,!0)},J=function(e){return $(e).replace(/\./g,"")},X=function(e){try{return Q.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Z(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Z(e[n],t[n]));return e}var ee=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},te=function(){try{return ee()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/nwitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyDv4H2YYw1GZM4ci6BpJCxQD3fG-y5Ipj0",REACT_APP_APP_ID:"1:496165555411:web:5249d21e9d8d4787aad826",REACT_APP_AUTH_DOMAIN:"nwitter-bf428.firebaseapp.com",REACT_APP_DATABASE_URL:"",REACT_APP_MEASUR_ID:"",REACT_APP_MESSAGIN_ID:"496165555411",REACT_APP_PROJECT_ID:"nwitter-bf428",REACT_APP_STORAGE_BUCKET:"nwitter-bf428.appspot.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&X(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},ne=function(){var e;return null===(e=te())||void 0===e?void 0:e.config},re=function(){function e(){var t=this;A(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return R(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ie(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[J(JSON.stringify({alg:"none",type:"JWT"})),J(JSON.stringify(a)),""].join(".")}function ae(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function oe(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ae())}function ue(){var e,t=null===(e=te())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function se(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function ce(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function le(){var e=ae();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function fe(){return!0===z||!0===B}function he(){try{return"object"===typeof indexedDB}catch(e){return!1}}var de=function(e){M(n,e);var t=j(n);function n(e,r,i){var a;return A(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(D(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(D(a),pe.prototype.create),a}return R(n)}(q(Error)),pe=function(){function e(t,n,r){A(this,e),this.service=t,this.serviceName=n,this.errors=r}return R(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ve,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new de(n,a,t)}}]),e}();var ve=/\{\$([^}]+)}/g;function ye(e){return JSON.parse(e)}function me(e){return JSON.stringify(e)}var ge=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=ye(X(a[0])||""),n=ye(X(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function ke(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _e(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function we(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function be(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function xe(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Te(u)&&Te(s)){if(!xe(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Te(e){return null!==e&&"object"===typeof e}function Ee(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Ie(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Ce(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Se=function(){function e(){A(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return R(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=h^l&(f^h),s=1518500249):(u=l^f^h,s=1859775393):p<60?(u=l&f|h&(l|f),s=2400959708):(u=l^f^h,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function Pe(e,t){var n=new Ae(e,t);return n.subscribe.bind(n)}var Ae=function(){function e(t,n){var r=this;A(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return R(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=O(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Ne),void 0===r.error&&(r.error=Ne),void 0===r.complete&&(r.complete=Ne);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Ne(){}var Re=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Oe(e,t){return"".concat(e," failed: ").concat(t," argument ")}function De(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Oe(e,t)+"must be a valid function.")}function Le(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Oe(e,t)+"must be a valid context object.")}var Me=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Fe(e){return e&&e._delegate?e._delegate:e}function Ue(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function je(e){return function(e){if(Array.isArray(e))return a(e)}(e)||Ue(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ve=function(){function e(t,n,r){A(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return R(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),qe="[DEFAULT]",ze=function(){function e(t,n){A(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return R(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new re;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:qe})}catch(c){}var t,n=O(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=C(E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(je(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),je(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=O(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1];r===this.normalizeInstanceIdentifier(c)&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=O(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===qe?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe;return this.component?this.component.multipleInstances?e:qe:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Be,We,Ke=function(){function e(t){A(this,e),this.name=t,this.providers=new Map}return R(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ze(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),He=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(We||(We={}));var Ge={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},Qe=We.INFO,Ye=(P(Be={},We.DEBUG,"log"),P(Be,We.VERBOSE,"log"),P(Be,We.INFO,"info"),P(Be,We.WARN,"warn"),P(Be,We.ERROR,"error"),Be),$e=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ye[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Je=function(){function e(t){A(this,e),this.name=t,this._logLevel=Qe,this._logHandler=$e,this._userLogHandler=null,He.push(this)}return R(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in We))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ge[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,We.DEBUG].concat(t)),this._logHandler.apply(this,[this,We.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,We.VERBOSE].concat(t)),this._logHandler.apply(this,[this,We.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,We.INFO].concat(t)),this._logHandler.apply(this,[this,We.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,We.WARN].concat(t)),this._logHandler.apply(this,[this,We.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,We.ERROR].concat(t)),this._logHandler.apply(this,[this,We.ERROR].concat(t))}}]),e}();function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var et,tt,nt=function(e,t){return t.some((function(t){return e instanceof t}))};var rt=new WeakMap,it=new WeakMap,at=new WeakMap,ot=new WeakMap,ut=new WeakMap;var st={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return it.get(e);if("objectStoreNames"===t)return e.objectStoreNames||at.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ft(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function ct(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(tt||(tt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ht(this),n),ft(rt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ft(e.apply(ht(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[ht(this),t].concat(r));return at.set(a,t.sort?t.sort():[t]),ft(a)}}function lt(e){return"function"===typeof e?ct(e):(e instanceof IDBTransaction&&function(e){if(!it.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));it.set(e,t)}}(e),nt(e,et||(et=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,st):e)}function ft(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(ft(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&rt.set(t,e)})).catch((function(){})),ut.set(t,e),t}(e);if(ot.has(e))return ot.get(e);var t=lt(e);return t!==e&&(ot.set(e,t),ut.set(t,e)),t}var ht=function(e){return ut.get(e)};var dt,pt,vt=["get","getKey","getAll","getAllKeys","count"],yt=["put","add","delete","clear"],mt=new Map;function gt(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(mt.get(t))return mt.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=yt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||vt.includes(n))){var a=function(){var e=C(E().mark((function e(t){var a,o,u,s,c,l,f=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return mt.set(t,a),a}}}st=function(e){return Ze(Ze({},e),{},{get:function(t,n,r){return gt(t,n)||e.get(t,n,r)},has:function(t,n){return!!gt(t,n)||e.has(t,n)}})}(st);var kt=function(){function e(t){A(this,e),this.container=t}return R(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var _t="@firebase/app",wt="0.9.20",bt=new Je("@firebase/app"),xt="[DEFAULT]",Tt=(P(dt={},_t,"fire-core"),P(dt,"@firebase/app-compat","fire-core-compat"),P(dt,"@firebase/analytics","fire-analytics"),P(dt,"@firebase/analytics-compat","fire-analytics-compat"),P(dt,"@firebase/app-check","fire-app-check"),P(dt,"@firebase/app-check-compat","fire-app-check-compat"),P(dt,"@firebase/auth","fire-auth"),P(dt,"@firebase/auth-compat","fire-auth-compat"),P(dt,"@firebase/database","fire-rtdb"),P(dt,"@firebase/database-compat","fire-rtdb-compat"),P(dt,"@firebase/functions","fire-fn"),P(dt,"@firebase/functions-compat","fire-fn-compat"),P(dt,"@firebase/installations","fire-iid"),P(dt,"@firebase/installations-compat","fire-iid-compat"),P(dt,"@firebase/messaging","fire-fcm"),P(dt,"@firebase/messaging-compat","fire-fcm-compat"),P(dt,"@firebase/performance","fire-perf"),P(dt,"@firebase/performance-compat","fire-perf-compat"),P(dt,"@firebase/remote-config","fire-rc"),P(dt,"@firebase/remote-config-compat","fire-rc-compat"),P(dt,"@firebase/storage","fire-gcs"),P(dt,"@firebase/storage-compat","fire-gcs-compat"),P(dt,"@firebase/firestore","fire-fst"),P(dt,"@firebase/firestore-compat","fire-fst-compat"),P(dt,"fire-js","fire-js"),P(dt,"firebase","fire-js-all"),dt),Et=new Map,It=new Map;function Ct(e,t){try{e.container.addComponent(t)}catch(n){bt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function St(e,t){e.container.addOrOverwriteComponent(t)}function Pt(e){var t=e.name;if(It.has(t))return bt.debug("There were multiple attempts to register component ".concat(t,".")),!1;It.set(t,e);var n,r=O(Et.values());try{for(r.s();!(n=r.n()).done;){Ct(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function At(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Nt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xt;At(e,t).clearInstance(n)}function Rt(){It.clear()}var Ot=(P(pt={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),P(pt,"bad-app-name","Illegal App name: '{$appName}"),P(pt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),P(pt,"app-deleted","Firebase App named '{$appName}' already deleted"),P(pt,"no-options","Need to provide options, when not being deployed to hosting via source."),P(pt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),P(pt,"invalid-log-argument","First argument to `onLog` must be null or a function."),P(pt,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),P(pt,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),P(pt,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),P(pt,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),pt),Dt=new pe("app","Firebase",Ot),Lt=function(){function e(t,n,r){var i=this;A(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ve("app",(function(){return i}),"PUBLIC"))}return R(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Dt.create("app-deleted",{appName:this._name})}}]),e}(),Mt="10.5.0";function Ft(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:xt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Dt.create("bad-app-name",{appName:String(i)});if(n||(n=ne()),!n)throw Dt.create("no-options");var a=Et.get(i);if(a){if(xe(n,a.options)&&xe(r,a.config))return a;throw Dt.create("duplicate-app",{appName:i})}var o,u=new Ke(i),s=O(It.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Lt(n,r,u);return Et.set(i,l),l}function Ut(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,t=Et.get(e);if(!t&&e===xt&&ne())return Ft();if(!t)throw Dt.create("no-app",{appName:e});return t}function jt(){return Array.from(Et.values())}function Vt(e){return qt.apply(this,arguments)}function qt(){return(qt=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Et.has(n)){e.next=6;break}return Et.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zt(e,t,n){var r,i=null!==(r=Tt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void bt.warn(u.join(" "))}Pt(new Ve("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Bt(e,t){if(null!==e&&"function"!==typeof e)throw Dt.create("invalid-log-argument");!function(e,t){var n,r=O(He);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Ge[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:We[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Wt(e){var t;t=e,He.forEach((function(e){e.setLogLevel(t)}))}var Kt="firebase-heartbeat-database",Ht=1,Gt="firebase-heartbeat-store",Qt=null;function Yt(){return Qt||(Qt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=ft(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(ft(u.result),e.oldVersion,e.newVersion,ft(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(Kt,Ht,{upgrade:function(e,t){if(0===t)e.createObjectStore(Gt)}}).catch((function(e){throw Dt.create("idb-open",{originalErrorMessage:e.message})}))),Qt}function $t(e){return Jt.apply(this,arguments)}function Jt(){return Jt=C(E().mark((function e(t){var n,r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yt();case 3:return n=e.sent,e.next=6,n.transaction(Gt).objectStore(Gt).get(en(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof de?bt.warn(e.t0.message):(i=Dt.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),bt.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Jt.apply(this,arguments)}function Xt(e,t){return Zt.apply(this,arguments)}function Zt(){return Zt=C(E().mark((function e(t,n){var r,i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yt();case 3:return r=e.sent,i=r.transaction(Gt,"readwrite"),a=i.objectStore(Gt),e.next=8,a.put(n,en(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof de?bt.warn(e.t0.message):(o=Dt.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),bt.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Zt.apply(this,arguments)}function en(e){return"".concat(e.name,"!").concat(e.options.appId)}var tn=function(){function e(t){var n=this;A(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new un(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return R(e,[{key:"triggerHeartbeat",value:function(){var e=C(E().mark((function e(){var t,n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=nn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=C(E().mark((function e(){var t,n,r,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=nn(),n=rn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=J(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function nn(){return(new Date).toISOString().substring(0,10)}function rn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=O(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),sn(r)>n)return a.dates.pop(),0}else if(r.push({agent:e.agent,dates:[e.date]}),sn(r)>n)return r.pop(),0;i=i.slice(1)};for(a.s();!(t=a.n()).done&&0!==o(););}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var an,on,un=function(){function e(t){A(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return R(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(he()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(BP){t(BP)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=C(E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,$t(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=C(E().mark((function e(t){var n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Xt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=C(E().mark((function e(t){var n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Xt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(je(r.heartbeats),je(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function sn(e){return J(JSON.stringify({version:2,heartbeats:e})).length}an="",Pt(new Ve("platform-logger",(function(e){return new kt(e)}),"PRIVATE")),Pt(new Ve("heartbeat",(function(e){return new tn(e)}),"PRIVATE")),zt(_t,wt,an),zt(_t,wt,"esm2017"),zt("fire-js","");var cn=function(){function e(t,n){var r=this;A(this,e),this._delegate=t,this.firebase=n,Ct(t,new Ve("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return R(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Vt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xt;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xt;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Ct(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){St(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),ln=(P(on={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),P(on,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),on),fn=new pe("app-compat","Firebase",ln);var hn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Ft(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ke(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:zt,setLogLevel:Wt,onLog:Bt,apps:null,SDK_VERSION:Mt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Pt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw fn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Z(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ke(n,e=e||xt))throw fn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(cn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Z(n,e)},createSubscribe:Pe,ErrorFactory:pe,deepExtend:Z}),n}(),dn=new Je("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){dn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var pn=self.firebase.SDK_VERSION;pn&&pn.indexOf("LITE")>=0&&dn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var vn=hn;!function(e){zt("@firebase/app-compat","0.2.20",e)}();function yn(){return yn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},yn.apply(this,arguments)}vn.registerVersion("firebase","10.5.0","app-compat");function mn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var gn,kn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},_n="EMAIL_SIGNIN",wn="PASSWORD_RESET",bn="RECOVER_EMAIL",xn="REVERT_SECOND_FACTOR_ADDITION",Tn="VERIFY_AND_CHANGE_EMAIL",En="VERIFY_EMAIL";function In(e){return void 0!==e&&void 0!==e.getResponse}function Cn(e){return void 0!==e&&void 0!==e.enterprise}var Sn=R((function e(t){if(A(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function Pn(){return P({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var An=function(){var e;return P(e={},"admin-restricted-operation","This operation is restricted to administrators only."),P(e,"argument-error",""),P(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),P(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),P(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),P(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),P(e,"cordova-not-ready","Cordova framework is not ready."),P(e,"cors-unsupported","This browser is not supported."),P(e,"credential-already-in-use","This credential is already associated with a different user account."),P(e,"custom-token-mismatch","The custom token corresponds to a different audience."),P(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),P(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),P(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),P(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),P(e,"email-already-in-use","The email address is already in use by another account."),P(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),P(e,"expired-action-code","The action code has expired."),P(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),P(e,"internal-error","An internal AuthError has occurred."),P(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),P(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),P(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),P(e,"invalid-auth-event","An internal AuthError has occurred."),P(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),P(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),P(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),P(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),P(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),P(e,"invalid-email","The email address is badly formatted."),P(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),P(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),P(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),P(e,"invalid-credential","The supplied auth credential is malformed or has expired."),P(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),P(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),P(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),P(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),P(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),P(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),P(e,"wrong-password","The password is invalid or the user does not have a password."),P(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),P(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),P(e,"invalid-provider-id","The specified provider ID is invalid."),P(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),P(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),P(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),P(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),P(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),P(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),P(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),P(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),P(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),P(e,"missing-continue-uri","A continue URL must be provided in the request."),P(e,"missing-iframe-start","An internal AuthError has occurred."),P(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),P(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),P(e,"missing-password","A non-empty password must be provided"),P(e,"missing-multi-factor-info","No second factor identifier is provided."),P(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),P(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),P(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),P(e,"app-deleted","This instance of FirebaseApp has been deleted."),P(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),P(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),P(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),P(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),P(e,"no-auth-event","An internal AuthError has occurred."),P(e,"no-such-provider","User was not linked to an account with the given provider."),P(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),P(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),P(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),P(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),P(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),P(e,"provider-already-linked","User can only be linked to one identity for the given provider."),P(e,"quota-exceeded","The project's quota for this operation has been exceeded."),P(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),P(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),P(e,"rejected-credential","The request contains malformed or mismatching credentials."),P(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),P(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),P(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),P(e,"timeout","The operation has timed out."),P(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),P(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),P(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),P(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),P(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),P(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),P(e,"unverified-email","The operation requires a verified email."),P(e,"user-cancelled","The user did not grant your application the permissions it requested."),P(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),P(e,"user-disabled","The user account has been disabled by an administrator."),P(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),P(e,"user-signed-out",""),P(e,"weak-password","The password must be 6 characters long or more."),P(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),P(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),P(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),P(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),P(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),P(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),P(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),P(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),P(e,"invalid-req-type","Invalid request parameters."),P(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),P(e,"unsupported-password-policy-schema-version","The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK."),P(e,"password-does-not-meet-requirements","The password does not meet the requirements."),e},Nn=Pn,Rn=new pe("auth","Firebase",Pn()),On=new Je("@firebase/auth");function Dn(e){if(On.logLevel<=We.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];On.warn.apply(On,["Auth (".concat(Mt,"): ").concat(e)].concat(n))}}function Ln(e){if(On.logLevel<=We.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];On.error.apply(On,["Auth (".concat(Mt,"): ").concat(e)].concat(n))}}function Mn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Vn.apply(void 0,[e].concat(n))}function Fn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Vn.apply(void 0,[e].concat(n))}function Un(e,t,n){var r=Object.assign(Object.assign({},Nn()),P({},t,n));return new pe("auth","Firebase",r).create(t,{appName:e.name})}function jn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Mn(e,"argument-error"),Un(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Vn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=je(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(je(o)))}return Rn.create.apply(Rn,[e].concat(n))}function qn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Vn.apply(void 0,[t].concat(r))}}function zn(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Ln(t),new Error(t)}function Bn(e,t){e||zn(t)}function Wn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Kn(){return"http:"===Hn()||"https:"===Hn()}function Hn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Gn=function(){function e(t,n){A(this,e),this.shortDelay=t,this.longDelay=n,Bn(n>t,"Short delay should be less than long delay!"),this.isMobile=oe()||ce()}return R(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Kn()||se()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Qn(e,t){Bn(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Yn=function(){function e(){A(this,e)}return R(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),$n=(P(gn={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),P(gn,"MISSING_CUSTOM_TOKEN","internal-error"),P(gn,"INVALID_IDENTIFIER","invalid-email"),P(gn,"MISSING_CONTINUE_URI","internal-error"),P(gn,"INVALID_PASSWORD","wrong-password"),P(gn,"MISSING_PASSWORD","missing-password"),P(gn,"EMAIL_EXISTS","email-already-in-use"),P(gn,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),P(gn,"INVALID_IDP_RESPONSE","invalid-credential"),P(gn,"INVALID_PENDING_TOKEN","invalid-credential"),P(gn,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),P(gn,"MISSING_REQ_TYPE","internal-error"),P(gn,"EMAIL_NOT_FOUND","user-not-found"),P(gn,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),P(gn,"EXPIRED_OOB_CODE","expired-action-code"),P(gn,"INVALID_OOB_CODE","invalid-action-code"),P(gn,"MISSING_OOB_CODE","internal-error"),P(gn,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),P(gn,"INVALID_ID_TOKEN","invalid-user-token"),P(gn,"TOKEN_EXPIRED","user-token-expired"),P(gn,"USER_NOT_FOUND","user-token-expired"),P(gn,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),P(gn,"PASSWORD_DOES_NOT_MEET_REQUIREMENTS","password-does-not-meet-requirements"),P(gn,"INVALID_CODE","invalid-verification-code"),P(gn,"INVALID_SESSION_INFO","invalid-verification-id"),P(gn,"INVALID_TEMPORARY_PROOF","invalid-credential"),P(gn,"MISSING_SESSION_INFO","missing-verification-id"),P(gn,"SESSION_EXPIRED","code-expired"),P(gn,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),P(gn,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),P(gn,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),P(gn,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),P(gn,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),P(gn,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),P(gn,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),P(gn,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),P(gn,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),P(gn,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),P(gn,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),P(gn,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),P(gn,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),P(gn,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),P(gn,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),P(gn,"MISSING_CLIENT_TYPE","missing-client-type"),P(gn,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),P(gn,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),P(gn,"INVALID_REQ_TYPE","invalid-req-type"),gn),Jn=new Gn(3e4,6e4);function Xn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Zn(e,t,n,r){return er.apply(this,arguments)}function er(){return er=C(E().mark((function e(t,n,r,i){var a,o=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",tr(t,a,C(E().mark((function e(){var a,o,u,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Ee(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Yn.fetch()(ar(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),er.apply(this,arguments)}function tr(e,t,n){return nr.apply(this,arguments)}function nr(){return(nr=C(E().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d,p;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},$n),n),e.prev=2,a=new or(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw ur(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),f=s(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw ur(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw ur(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw ur(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Un(t,p,d);case 34:Mn(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof de)){e.next=41;break}throw e.t0;case 41:Mn(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function rr(e,t,n,r){return ir.apply(this,arguments)}function ir(){return ir=C(E().mark((function e(t,n,r,i){var a,o,u=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Zn(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Mn(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),ir.apply(this,arguments)}function ar(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Qn(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var or=function(){function e(t){var n=this;A(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Fn(n.auth,"network-request-failed"))}),Jn.get())}))}return R(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function ur(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Fn(e,t,r);return i.customData._tokenResponse=n,i}function sr(e){return cr.apply(this,arguments)}function cr(){return(cr=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zn(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lr(e,t){return fr.apply(this,arguments)}function fr(){return(fr=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"GET","/v2/recaptchaConfig",Xn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hr(e,t){return dr.apply(this,arguments)}function dr(){return(dr=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pr(e,t){return vr.apply(this,arguments)}function vr(){return(vr=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yr(e,t){return mr.apply(this,arguments)}function mr(){return(mr=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function kr(){return kr=C(E().mark((function e(t){var n,r,i,a,o,u,s=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Fe(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,qn((a=wr(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:gr(_r(a.auth_time)),issuedAtTime:gr(_r(a.iat)),expirationTime:gr(_r(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),kr.apply(this,arguments)}function _r(e){return 1e3*Number(e)}function wr(e){var t=s(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Ln("JWT malformed, contained fewer than 3 sections"),null;try{var a=X(r);return a?JSON.parse(a):(Ln("Failed to decode base64 JWT payload"),null)}catch(o){return Ln("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function br(e,t){return xr.apply(this,arguments)}function xr(){return xr=C(E().mark((function e(t,n){var r=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof de&&Tr(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),xr.apply(this,arguments)}function Tr(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Er=function(){function e(t){A(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return R(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(C(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ir=function(){function e(t,n){A(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return R(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=gr(this.lastLoginAt),this.creationTime=gr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Cr(e){return Sr.apply(this,arguments)}function Sr(){return(Sr=C(E().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,br(t,yr(r,{idToken:i}));case 6:qn(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=mn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=Ar(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Ir(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pr(){return(Pr=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fe(t),e.next=3,Cr(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ar(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(je(n),je(t))}function Nr(e,t){return Rr.apply(this,arguments)}function Rr(){return(Rr=C(E().mark((function e(t,n){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tr(t,{},C(E().mark((function e(){var r,i,a,o,u,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ee({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=ar(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Yn.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Or=function(){function e(){A(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return R(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){qn(e.idToken,"internal-error"),qn("undefined"!==typeof e.idToken,"internal-error"),qn("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=wr(e);return qn(t,"internal-error"),qn("undefined"!==typeof t.exp,"internal-error"),qn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=C(E().mark((function e(t){var n,r=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],qn(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=C(E().mark((function e(t,n){var r,i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nr(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return zn("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(qn("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(qn("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(qn("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Dr(e,t){qn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Lr=function(){function e(t){A(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=mn(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Er(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?je(a.providerData):[],this.metadata=new Ir(a.createdAt||void 0,a.lastLoginAt||void 0)}return R(e,[{key:"getIdToken",value:function(){var e=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,br(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(qn(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return kr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Pr.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(qn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){qn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=C(E().mark((function e(t){var n,r,i=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Cr(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=C(E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,br(this,hr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,_=n.emailVerified,w=n.isAnonymous,b=n.providerData,x=n.stsTokenManager;qn(k&&x,t,"internal-error");var T=Or.fromJSON(this.name,x);qn("string"===typeof k,t,"internal-error"),Dr(f,t.name),Dr(h,t.name),qn("boolean"===typeof _,t,"internal-error"),qn("boolean"===typeof w,t,"internal-error"),Dr(d,t.name),Dr(p,t.name),Dr(v,t.name),Dr(y,t.name),Dr(m,t.name),Dr(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:_,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:T,createdAt:m,lastLoginAt:g});return b&&Array.isArray(b)&&(E.providerData=b.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=C(E().mark((function t(n,r){var i,a,o,u=arguments;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Or).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Cr(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Mr=new Map;function Fr(e){Bn(e instanceof Function,"Expected a class definition");var t=Mr.get(e);return t?(Bn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Mr.set(e,t),t)}var Ur=function(){function e(){A(this,e),this.type="NONE",this.storage={}}return R(e,[{key:"_isAvailable",value:function(){var e=C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Ur.type="NONE";var jr=Ur;function Vr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var qr=function(){function e(t,n,r){A(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Vr(this.userKey,a.apiKey,o),this.fullPersistenceKey=Vr("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return R(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=C(E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Lr._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=C(E().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Fr(jr),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Fr(jr),u=Vr(i,n.config.apiKey,n.name),s=null,c=O(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Lr._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function zr(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Hr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Br(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Qr(t))return"Blackberry";if(Yr(t))return"Webos";if(Wr(t))return"Safari";if((t.includes("chrome/")||Kr(t))&&!t.includes("edge/"))return"Chrome";if(Gr(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Br(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae();return/firefox\//i.test(e)}function Wr(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Kr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae();return/crios\//i.test(e)}function Hr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae();return/iemobile/i.test(e)}function Gr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae();return/android/i.test(e)}function Qr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae();return/blackberry/i.test(e)}function Yr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae();return/webos/i.test(e)}function $r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Jr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae();return $r(e)||Gr(e)||Yr(e)||Qr(e)||/windows phone/i.test(e)||Hr(e)}function Xr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=zr(ae());break;case"Worker":t="".concat(zr(ae()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Mt,"/").concat(r)}var Zr=function(){function e(t){A(this,e),this.auth=t,this.queue=[]}return R(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=C(E().mark((function e(t){var n,r,i,a,o,u,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=O(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=O(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ei(e){return ti.apply(this,arguments)}function ti(){return ti=C(E().mark((function e(t){var n,r=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Zn(t,"GET","/v2/passwordPolicy",Xn(t,n)));case 2:case"end":return e.stop()}}),e)}))),ti.apply(this,arguments)}var ni=function(){function e(t){var n,r,i,a;A(this,e);var o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=o.minPasswordLength)&&void 0!==n?n:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=t.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(a=t.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=t.schemaVersion}return R(e,[{key:"validatePassword",value:function(e){var t,n,r,i,a,o,u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=null===(t=u.meetsMinPasswordLength)||void 0===t||t),u.isValid&&(u.isValid=null===(n=u.meetsMaxPasswordLength)||void 0===n||n),u.isValid&&(u.isValid=null===(r=u.containsLowercaseLetter)||void 0===r||r),u.isValid&&(u.isValid=null===(i=u.containsUppercaseLetter)||void 0===i||i),u.isValid&&(u.isValid=null===(a=u.containsNumericCharacter)||void 0===a||a),u.isValid&&(u.isValid=null===(o=u.containsNonAlphanumericCharacter)||void 0===o||o),u}},{key:"validatePasswordLengthOptions",value:function(e,t){var n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}},{key:"validatePasswordCharacterOptions",value:function(e,t){var n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(var r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}},{key:"updatePasswordCharacterOptionsStatuses",value:function(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}]),e}(),ri=function(){function e(t,n,r,i){A(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ai(this),this.idTokenSubscription=new ai(this),this.beforeStateQueue=new Zr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return R(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Fr(t)),this._initializationPromise=this.queue(C(E().mark((function r(){var i,a;return E().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,qr.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=C(E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=C(E().mark((function e(t){var n,r,i,a,o,u,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return qn(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Cr(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Fe(t):null)&&qn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=C(E().mark((function e(t){var n,r=this,i=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&qn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(C(E().mark((function n(){return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Fr(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"validatePassword",value:function(){var e=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._getPasswordPolicyInternal()){e.next=3;break}return e.next=3,this._updatePasswordPolicy();case 3:if((n=this._getPasswordPolicyInternal()).schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION){e.next=6;break}return e.abrupt("return",Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})));case 6:return e.abrupt("return",n.validatePassword(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPasswordPolicyInternal",value:function(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}},{key:"_updatePasswordPolicy",value:function(){var e=C(E().mark((function e(){var t,n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ei(this);case 2:t=e.sent,n=new ni(t),null===this.tenantId?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new pe("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"authStateReady",value:function(){var e=this;return new Promise((function(t,n){if(e.currentUser)t();else var r=e.onAuthStateChanged((function(){r(),t()}),n)}))}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=C(E().mark((function e(t,n){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return qn(n=t&&Fr(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,qr.create(this,[Fr(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=C(E().mark((function e(t){var n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=C(E().mark((function e(t){var n=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(qn(u,this,"internal-error"),u.then((function(){o||a(i.currentUser)})),"function"===typeof t){var s=e.addObserver(t,n,r);return function(){o=!0,s()}}var c=e.addObserver(t);return function(){o=!0,c()}}},{key:"directlySetCurrentUser",value:function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return qn(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=C(E().mark((function e(){var t,n,r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=P({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=C(E().mark((function e(){var t,n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&Dn("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ii(e){return Fe(e)}var ai=function(){function e(t){var n=this;A(this,e),this.auth=t,this.observer=null,this.addObserver=Pe((function(e){return n.observer=e}))}return R(e,[{key:"next",get:function(){return qn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function oi(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Fn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function ui(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var si=function(){function e(t){A(this,e),this.type="recaptcha-enterprise",this.auth=ii(t)}return R(e,[{key:"verify",value:function(){var e=C(E().mark((function e(){var t,n,r,i,a,o=this,u=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;Cn(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=C(E().mark((function e(n,r){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:lr(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new Sn(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=u.length>0&&void 0!==u[0]?u[0]:"verify",n=u.length>1&&void 0!==u[1]&&u[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&Cn(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));oi("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ci(e,t,n){return li.apply(this,arguments)}function li(){return li=C(E().mark((function e(t,n,r){var i,a,o,u,s=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>3&&void 0!==s[3]&&s[3],a=new si(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return u=Object.assign({},n),i?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),li.apply(this,arguments)}function fi(e,t,n){var r=ii(e);qn(r._canInitEmulator,r,"emulator-config-failed"),qn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=hi(t),o=function(e){var t=hi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:di(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:di(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function hi(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function di(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var pi=function(){function e(t,n){A(this,e),this.providerId=t,this.signInMethod=n}return R(e,[{key:"toJSON",value:function(){return zn("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return zn("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return zn("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return zn("not implemented")}}]),e}();function vi(e,t){return yi.apply(this,arguments)}function yi(){return(yi=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"POST","/v1/accounts:resetPassword",Xn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mi(e,t){return gi.apply(this,arguments)}function gi(){return(gi=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ki(e,t){return _i.apply(this,arguments)}function _i(){return(_i=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"POST","/v1/accounts:update",Xn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wi(e,t){return bi.apply(this,arguments)}function bi(){return(bi=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rr(t,"POST","/v1/accounts:signInWithPassword",Xn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xi(e,t){return Ti.apply(this,arguments)}function Ti(){return(Ti=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"POST","/v1/accounts:sendOobCode",Xn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ei(e,t){return Ii.apply(this,arguments)}function Ii(){return(Ii=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xi(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ci(e,t){return Si.apply(this,arguments)}function Si(){return(Si=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xi(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pi(e,t){return Ai.apply(this,arguments)}function Ai(){return(Ai=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xi(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ni(e,t){return Ri.apply(this,arguments)}function Ri(){return(Ri=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xi(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oi(e,t){return Di.apply(this,arguments)}function Di(){return(Di=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rr(t,"POST","/v1/accounts:signInWithEmailLink",Xn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Li(e,t){return Mi.apply(this,arguments)}function Mi(){return(Mi=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rr(t,"POST","/v1/accounts:signInWithEmailLink",Xn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fi=function(e){M(n,e);var t=j(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return A(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return R(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=C(E().mark((function e(t){var n,r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,ci(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",wi(t,i));case 11:return e.abrupt("return",wi(t,r).catch(function(){var e=C(E().mark((function e(n){var i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,ci(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",wi(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",Oi(t,{email:this._email,oobCode:this._password}));case 13:Mn(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",mi(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Li(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Mn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(pi);function Ui(e,t){return ji.apply(this,arguments)}function ji(){return(ji=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rr(t,"POST","/v1/accounts:signInWithIdp",Xn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Vi=function(e){M(n,e);var t=j(n);function n(){var e;return A(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return R(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Ui(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ui(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ui(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ee(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mn("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=mn(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(pi);function qi(e,t){return zi.apply(this,arguments)}function zi(){return(zi=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"POST","/v1/accounts:sendVerificationCode",Xn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bi(){return(Bi=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rr(t,"POST","/v1/accounts:signInWithPhoneNumber",Xn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wi(){return(Wi=C(E().mark((function e(t,n){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rr(t,"POST","/v1/accounts:signInWithPhoneNumber",Xn(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw ur(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ki=P({},"USER_NOT_FOUND","user-not-found");function Hi(){return(Hi=C(E().mark((function e(t,n){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",rr(t,"POST","/v1/accounts:signInWithPhoneNumber",Xn(t,r),Ki));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Gi=function(e){M(n,e);var t=j(n);function n(e){var r;return A(this,n),(r=t.call(this,"phone","phone")).params=e,r}return R(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Bi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Wi.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Hi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(pi);var Qi=function(){function e(t){var n,r,i,a,o,u;A(this,e);var s=Ie(Ce(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);qn(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return R(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Ie(Ce(e)).link,n=t?Ie(Ce(t)).deep_link_id:null,r=Ie(Ce(e)).deep_link_id;return(r?Ie(Ce(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var Yi=function(){function e(){A(this,e),this.providerId=e.PROVIDER_ID}return R(e,null,[{key:"credential",value:function(e,t){return Fi._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Qi.parseLink(t);return qn(n,"argument-error"),Fi._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Yi.PROVIDER_ID="password",Yi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Yi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var $i=function(){function e(t){A(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return R(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Ji=function(e){M(n,e);var t=j(n);function n(){var e;return A(this,n),(e=t.apply(this,arguments)).scopes=[],e}return R(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return je(this.scopes)}}]),n}($i),Xi=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return qn(e.idToken||e.accessToken,"argument-error"),Vi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return qn("providerId"in t&&"signInMethod"in t,"argument-error"),Vi._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Ji),Zi=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.call(this,"facebook.com")}return R(n,null,[{key:"credential",value:function(e){return Vi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Ji);Zi.FACEBOOK_SIGN_IN_METHOD="facebook.com",Zi.PROVIDER_ID="facebook.com";var ea=function(e){M(n,e);var t=j(n);function n(){var e;return A(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return R(n,null,[{key:"credential",value:function(e,t){return Vi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Ji);ea.GOOGLE_SIGN_IN_METHOD="google.com",ea.PROVIDER_ID="google.com";var ta=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.call(this,"github.com")}return R(n,null,[{key:"credential",value:function(e){return Vi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Ji);ta.GITHUB_SIGN_IN_METHOD="github.com",ta.PROVIDER_ID="github.com";var na=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return R(n,[{key:"_getIdTokenResponse",value:function(e){return Ui(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ui(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ui(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(pi),ra=function(e){M(n,e);var t=j(n);function n(e){return A(this,n),qn(e.startsWith("saml."),"argument-error"),t.call(this,e)}return R(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=na.fromJSON(e);return qn(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return na._create(r,n)}catch(i){return null}}}]),n}($i),ia=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.call(this,"twitter.com")}return R(n,null,[{key:"credential",value:function(e,t){return Vi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Ji);function aa(e,t){return oa.apply(this,arguments)}function oa(){return(oa=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rr(t,"POST","/v1/accounts:signUp",Xn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}ia.TWITTER_SIGN_IN_METHOD="twitter.com",ia.PROVIDER_ID="twitter.com";var ua=function(){function e(t){A(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return R(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=C(E().mark((function t(n,r,i){var a,o,u,s,c=arguments;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Lr._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=sa(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=C(E().mark((function t(n,r,i){var a;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=sa(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function sa(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function ca(){return(ca=C(E().mark((function e(t){var n,r,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ii(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new ua({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,aa(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,ua._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var la=function(e){M(n,e);var t=j(n);function n(e,r,i,a){var o,u;return A(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(D(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return R(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(de);function fa(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw la._fromErrorAndOperation(e,n,t,r);throw n}))}function ha(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function da(e,t){return pa.apply(this,arguments)}function pa(){return pa=C(E().mark((function e(t,n){var r,i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fe(t),e.next=3,ma(!0,r,n);case 3:return e.t0=pr,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=ha(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),pa.apply(this,arguments)}function va(e,t){return ya.apply(this,arguments)}function ya(){return ya=C(E().mark((function e(t,n){var r,i,a=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=br,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",ua._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ya.apply(this,arguments)}function ma(e,t,n){return ga.apply(this,arguments)}function ga(){return(ga=C(E().mark((function e(t,n,r){var i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cr(n);case 2:i=ha(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",qn(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ka(e,t){return _a.apply(this,arguments)}function _a(){return _a=C(E().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,br(t,fa(i,a,n,t),r);case 6:return qn((o=e.sent).idToken,i,"internal-error"),qn(u=wr(o.idToken),i,"internal-error"),s=u.sub,qn(t.uid===s,i,"user-mismatch"),e.abrupt("return",ua._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Mn(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),_a.apply(this,arguments)}function wa(e,t){return ba.apply(this,arguments)}function ba(){return ba=C(E().mark((function e(t,n){var r,i,a,o,u=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,fa(t,i,n);case 4:return a=e.sent,e.next=7,ua._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),ba.apply(this,arguments)}function xa(e,t){return Ta.apply(this,arguments)}function Ta(){return(Ta=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wa(ii(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ea(e,t){return Ia.apply(this,arguments)}function Ia(){return(Ia=C(E().mark((function e(t,n){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fe(t),e.next=3,ma(!1,r,n.providerId);case 3:return e.abrupt("return",va(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ca(e,t){return Sa.apply(this,arguments)}function Sa(){return(Sa=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ka(Fe(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pa(e,t){return Aa.apply(this,arguments)}function Aa(){return(Aa=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rr(t,"POST","/v1/accounts:signInWithCustomToken",Xn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Na(){return(Na=C(E().mark((function e(t,n){var r,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ii(t),e.next=3,Pa(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,ua._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ra=function(){function e(t,n){A(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return R(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Oa._fromServerResponse(e,t):"totpInfo"in t?Da._fromServerResponse(e,t):Mn(e,"internal-error")}}]),e}(),Oa=function(e){M(n,e);var t=j(n);function n(e){var r;return A(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return R(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Ra),Da=function(e){M(n,e);var t=j(n);function n(e){return A(this,n),t.call(this,"totp",e)}return R(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Ra);function La(e,t,n){var r;qn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),qn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(qn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(qn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Ma(e){return Fa.apply(this,arguments)}function Fa(){return(Fa=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=ii(t))._getPasswordPolicyInternal()){e.next=4;break}return e.next=4,n._updatePasswordPolicy();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ua(){return Ua=C(E().mark((function e(t,n,r){var i,a,o,u;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ii(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,ci(a,o,"getOobCode",!0);case 5:return u=e.sent,r&&La(a,u,r),e.next=9,Ci(a,u);case 9:e.next=14;break;case 11:return r&&La(a,o,r),e.next=14,Ci(a,o).catch(function(){var e=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,ci(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&La(a,n,r),e.next=8,Ci(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),Ua.apply(this,arguments)}function ja(){return ja=C(E().mark((function e(t,n,r){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vi(Fe(t),{oobCode:n,newPassword:r}).catch(function(){var e=C(E().mark((function e(n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&Ma(t),n;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),ja.apply(this,arguments)}function Va(){return(Va=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ki(Fe(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qa(e,t){return za.apply(this,arguments)}function za(){return(za=C(E().mark((function e(t,n){var r,i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fe(t),e.next=3,vi(r,{oobCode:n});case 3:i=e.sent,qn(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return qn(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:qn(i.mfaInfo,r,"internal-error");case 13:qn(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Ra._fromServerResponse(ii(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ba(){return(Ba=C(E().mark((function e(t,n){var r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qa(Fe(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wa(e,t,n){return Ka.apply(this,arguments)}function Ka(){return Ka=C(E().mark((function e(t,n,r){var i,a,o,u,s,c,l;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ii(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,ci(a,o,"signUpPassword");case 5:s=e.sent,u=aa(a,s),e.next=10;break;case 9:u=aa(a,o).catch(function(){var e=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=6;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,ci(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",aa(a,n));case 6:throw t;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,u.catch((function(e){throw e.code==="auth/".concat("password-does-not-meet-requirements")&&Ma(t),e}));case 12:return c=e.sent,e.next=15,ua._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),Ka.apply(this,arguments)}function Ha(){return Ha=C(E().mark((function e(t,n,r){var i,a,o,u,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){qn(t.handleCodeInApp,a,"argument-error"),t&&La(a,e,t)},a=ii(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,ci(a,o,"getOobCode",!0);case 6:return s=e.sent,u(s,r),e.next=10,Pi(a,s);case 10:e.next=15;break;case 12:return u(o,r),e.next=15,Pi(a,o).catch(function(){var e=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,ci(a,o,"getOobCode",!0);case 4:return n=e.sent,u(n,r),e.next=8,Pi(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),Ha.apply(this,arguments)}function Ga(){return(Ga=C(E().mark((function e(t,n,r){var i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fe(t),qn((a=Yi.credentialWithLink(n,r||Wn()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",xa(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qa(e,t){return Ya.apply(this,arguments)}function Ya(){return(Ya=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"POST","/v1/accounts:createAuthUri",Xn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $a(){return($a=C(E().mark((function e(t,n){var r,i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kn()?Wn():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Qa(Fe(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ja(){return(Ja=C(E().mark((function e(t,n){var r,i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fe(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&La(r.auth,a,n),e.next=8,Ei(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xa(){return(Xa=C(E().mark((function e(t,n,r){var i,a,o,u;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fe(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&La(i.auth,o,r),e.next=8,Ni(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Za(e,t){return eo.apply(this,arguments)}function eo(){return(eo=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function to(){return(to=C(E().mark((function e(t,n){var r,i,a,o,u,s,c;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Fe(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,br(a,Za(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function no(e,t,n){return ro.apply(this,arguments)}function ro(){return(ro=C(E().mark((function e(t,n,r){var i,a,o,u;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,br(t,mi(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var io=R((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};A(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),ao=function(e){M(n,e);var t=j(n);function n(e,r,i,a){var o;return A(this,n),(o=t.call(this,e,r,i)).username=a,o}return R(n)}(io),oo=function(e){M(n,e);var t=j(n);function n(e,r){return A(this,n),t.call(this,e,"facebook.com",r)}return R(n)}(io),uo=function(e){M(n,e);var t=j(n);function n(e,r){return A(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return R(n)}(ao),so=function(e){M(n,e);var t=j(n);function n(e,r){return A(this,n),t.call(this,e,"google.com",r)}return R(n)}(io),co=function(e){M(n,e);var t=j(n);function n(e,r,i){return A(this,n),t.call(this,e,"twitter.com",r,i)}return R(n)}(ao);function lo(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=wr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new io(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new oo(a,i);case"github.com":return new uo(a,i);case"google.com":return new so(a,i);case"twitter.com":return new co(a,i,e.screenName||null);case"custom":case"anonymous":return new io(a,null);default:return new io(a,r,i)}}(n)}var fo=function(){function e(t,n,r){A(this,e),this.type=t,this.credential=n,this.user=r}return R(e,[{key:"toJSON",value:function(){return{multiFactorSession:P({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),ho=function(){function e(t,n,r){A(this,e),this.session=t,this.hints=n,this.signInResolver=r}return R(e,[{key:"resolveSignIn",value:function(){var e=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=ii(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Ra._fromServerResponse(r,e)}));qn(i.mfaPendingCredential,r,"internal-error");var o=fo._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=C(E().mark((function e(t){var a,u,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,ua._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return qn(n.user,r,"internal-error"),e.abrupt("return",ua._forOperation(n.user,n.operationType,u));case 17:Mn(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function po(e,t){return Zn(e,"POST","/v2/accounts/mfaEnrollment:start",Xn(e,t))}function vo(e,t){return Zn(e,"POST","/v2/accounts/mfaEnrollment:finalize",Xn(e,t))}var yo=function(){function e(t){var n=this;A(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Ra._fromServerResponse(t.auth,e)})))}))}return R(e,[{key:"getSession",value:function(){var e=C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fo,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=C(E().mark((function e(t,n){var r,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,br(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=C(E().mark((function e(t){var n,r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,br(this.user,Zn(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Xn(a,{idToken:r,mfaEnrollmentId:n})));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}var a}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),mo=new WeakMap;var go="__sak",ko=function(){function e(t,n){A(this,e),this.storageRetriever=t,this.type=n}return R(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(go,"1"),this.storage.removeItem(go),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var _o=function(e){M(n,e);var t=j(n);function n(){var e;return A(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=ae();return Wr(e)||$r(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Jr(),e._shouldAllowMigration=!0,e}return R(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);le()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=C(E().mark((function e(t,r){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn(F(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=C(E().mark((function e(t){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn(F(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn(F(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ko);_o.type="LOCAL";var wo=_o,bo=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return R(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(ko);bo.type="SESSION";var xo=bo;function To(e){return Promise.all(e.map(function(){var e=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Eo=function(){function e(t){A(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return R(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=C(E().mark((function e(t){var n,r,i,a,o,u,s,c;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,To(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Io(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Eo.receivers=[];var Co=function(){function e(t){A(this,e),this.target=t,this.handlers=new Set}return R(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=C(E().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Io("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function So(){return window}function Po(e){So().location.href=e}function Ao(){return"undefined"!==typeof So().WorkerGlobalScope&&"function"===typeof So().importScripts}function No(){return Ro.apply(this,arguments)}function Ro(){return(Ro=C(E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Oo(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Do="firebaseLocalStorageDb",Lo="firebaseLocalStorage",Mo="fbase_key",Fo=function(){function e(t){A(this,e),this.request=t}return R(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Uo(e,t){return e.transaction([Lo],t?"readwrite":"readonly").objectStore(Lo)}function jo(){var e=indexedDB.deleteDatabase(Do);return new Fo(e).toPromise()}function Vo(){var e=indexedDB.open(Do,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Lo,{keyPath:Mo})}catch(r){n(r)}})),e.addEventListener("success",C(E().mark((function n(){var r;return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Lo)){n.next=12;break}return r.close(),n.next=5,jo();case 5:return n.t0=t,n.next=8,Vo();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function qo(e,t,n){return zo.apply(this,arguments)}function zo(){return zo=C(E().mark((function e(t,n,r){var i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Uo(t,!0).put((P(i={},Mo,n),P(i,"value",r),i)),e.abrupt("return",new Fo(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),zo.apply(this,arguments)}function Bo(e,t){return Wo.apply(this,arguments)}function Wo(){return Wo=C(E().mark((function e(t,n){var r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uo(t,!1).get(n),e.next=3,new Fo(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Wo.apply(this,arguments)}function Ko(e,t){var n=Uo(e,!0).delete(t);return new Fo(n).toPromise()}var Ho=function(){function e(){A(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return R(e,[{key:"_openDb",value:function(){var e=C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Vo();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=C(E().mark((function e(t){var n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ao()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=C(E().mark((function e(){var t=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Eo._getInstance(Ao()?self:null),this.receiver._subscribe("keyChanged",function(){var e=C(E().mark((function e(n,r){var i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=C(E().mark((function e(){var t,n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,No();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Co(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Oo()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=C(E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Vo();case 5:return t=e.sent,e.next=8,qo(t,go,"1");case 8:return e.next=10,Ko(t,go);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=C(E().mark((function e(t,n){var r=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return qo(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Bo(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=C(E().mark((function e(t){var n=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ko(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=C(E().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Uo(e,!1).getAll();return new Fo(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=O(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(C(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Ho.type="LOCAL";var Go=Ho;function Qo(e,t){return Zn(e,"POST","/v2/accounts/mfaSignIn:start",Xn(e,t))}function Yo(e,t){return Zn(e,"POST","/v2/accounts/mfaSignIn:finalize",Xn(e,t))}var $o=1e12,Jo=function(){function e(t){A(this,e),this.auth=t,this.counter=$o,this._widgets=new Map}return R(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Xo(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||$o;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||$o;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=C(E().mark((function e(t){var n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||$o,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Xo=function(){function e(t,n,r){var i=this;A(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;qn(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return R(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Zo=ui("rcb"),eu=new Gn(3e4,6e4),tu=function(){function e(){var t;A(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=So().grecaptcha)||void 0===t?void 0:t.render)}return R(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return qn(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&In(So().grecaptcha)?Promise.resolve(So().grecaptcha):new Promise((function(r,i){var a=So().setTimeout((function(){i(Fn(e,"network-request-failed"))}),eu.get());So()[Zo]=function(){So().clearTimeout(a),delete So()[Zo];var o=So().grecaptcha;if(o&&In(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Fn(e,"internal-error"))},oi("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Ee({onload:Zo,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Fn(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=So().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var nu=function(){function e(){A(this,e)}return R(e,[{key:"load",value:function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Jo(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),ru="recaptcha",iu={theme:"light",type:"image"},au=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},iu);A(this,e),this.parameters=r,this.type=ru,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ii(t),this.isInvisible="invisible"===this.parameters.size,qn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof n?document.getElementById(n):n;qn(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nu:new tu,this.validateStartingState()}return R(e,[{key:"verify",value:function(){var e=C(E().mark((function e(){var t,n,r,i=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){qn(!this.parameters.sitekey,this.auth,"argument-error"),qn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),qn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=So()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){qn(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=C(E().mark((function e(){var t,n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=C(E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qn(Kn()&&!Ao(),this.auth,"internal-error"),e.next=3,ou();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,sr(this.auth);case 8:qn(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return qn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function ou(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var uu=function(){function e(t,n){A(this,e),this.verificationId=t,this.onConfirmation=n}return R(e,[{key:"confirm",value:function(e){var t=Gi._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function su(){return(su=C(E().mark((function e(t,n,r){var i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ii(t),e.next=3,hu(i,n,Fe(r));case 3:return a=e.sent,e.abrupt("return",new uu(a,(function(e){return xa(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cu(e,t,n){return lu.apply(this,arguments)}function lu(){return(lu=C(E().mark((function e(t,n,r){var i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fe(t),e.next=3,ma(!1,i,"phone");case 3:return e.next=5,hu(i.auth,n,Fe(r));case 5:return a=e.sent,e.abrupt("return",new uu(a,(function(e){return Ea(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fu(){return(fu=C(E().mark((function e(t,n,r){var i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fe(t),e.next=3,hu(i.auth,n,Fe(r));case 3:return a=e.sent,e.abrupt("return",new uu(a,(function(e){return Ca(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hu(e,t,n){return du.apply(this,arguments)}function du(){return(du=C(E().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,qn("string"===typeof a,t,"argument-error"),qn(r.type===ru,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return qn("enroll"===u.type,t,"internal-error"),e.next=13,po(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return qn("signin"===u.type,t,"internal-error"),qn(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Qo(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,qi(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])})))).apply(this,arguments)}function pu(){return(pu=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,va(Fe(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vu=function(){function e(t){A(this,e),this.providerId=e.PROVIDER_ID,this.auth=ii(t)}return R(e,[{key:"verifyPhoneNumber",value:function(e,t){return hu(this.auth,e,Fe(t))}}],[{key:"credential",value:function(e,t){return Gi._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Gi._fromTokenResponse(n,r):null}}]),e}();function yu(e,t){return t?Fr(t):(qn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}vu.PROVIDER_ID="phone",vu.PHONE_SIGN_IN_METHOD="phone";var mu=function(e){M(n,e);var t=j(n);function n(e){var r;return A(this,n),(r=t.call(this,"custom","custom")).params=e,r}return R(n,[{key:"_getIdTokenResponse",value:function(e){return Ui(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Ui(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Ui(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(pi);function gu(e){return wa(e.auth,new mu(e),e.bypassAuthState)}function ku(e){var t=e.auth,n=e.user;return qn(n,t,"internal-error"),ka(n,new mu(e),e.bypassAuthState)}function _u(e){return wu.apply(this,arguments)}function wu(){return(wu=C(E().mark((function e(t){var n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,qn(r=t.user,n,"internal-error"),e.abrupt("return",va(r,new mu(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bu=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];A(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return R(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=C(E().mark((function t(n,r){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=C(E().mark((function e(t){var n,r,i,a,o,u,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gu;case"linkViaPopup":case"linkViaRedirect":return _u;case"reauthViaPopup":case"reauthViaRedirect":return ku;default:Mn(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),xu=new Gn(2e3,1e4);function Tu(e,t,n){return Eu.apply(this,arguments)}function Eu(){return(Eu=C(E().mark((function e(t,n,r){var i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ii(t),jn(t,n,$i),a=yu(i,r),o=new Pu(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Iu(){return(Iu=C(E().mark((function e(t,n,r){var i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jn((i=Fe(t)).auth,n,$i),a=yu(i.auth,r),o=new Pu(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cu(e,t,n){return Su.apply(this,arguments)}function Su(){return(Su=C(E().mark((function e(t,n,r){var i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jn((i=Fe(t)).auth,n,$i),a=yu(i.auth,r),o=new Pu(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pu=function(e){M(n,e);var t=j(n);function n(e,r,i,a,o){var u;return A(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=D(u),u}return R(n,[{key:"executeNotNull",value:function(){var e=C(E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return qn(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=C(E().mark((function e(){var t,n=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bn(1===this.filter.length,"Popup operations only handle one event"),t=Io(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Fn(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Fn(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Fn(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,xu.get())}()}}]),n}(bu);Pu.currentPopupAction=null;var Au="pendingRedirect",Nu=new Map,Ru=function(e){M(n,e);var t=j(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return A(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return R(n,[{key:"execute",value:function(){var e=C(E().mark((function e(){var t,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Nu.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Ou(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,yn(F(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Nu.set(this.auth._key(),t);case 21:return this.bypassAuthState||Nu.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=C(E().mark((function e(t){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",yn(F(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",yn(F(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(bu);function Ou(e,t){return Du.apply(this,arguments)}function Du(){return(Du=C(E().mark((function e(t,n){var r,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ju(n),i=Uu(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lu(e,t){return Mu.apply(this,arguments)}function Mu(){return(Mu=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uu(t)._set(ju(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fu(e,t){Nu.set(e._key(),t)}function Uu(e){return Fr(e._redirectPersistence)}function ju(e){return Vr(Au,e.config.apiKey,e.name)}function Vu(e,t,n){return function(e,t,n){return qu.apply(this,arguments)}(e,t,n)}function qu(){return(qu=C(E().mark((function e(t,n,r){var i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ii(t),jn(t,n,$i),e.next=4,i._initializationPromise;case 4:return a=yu(i,r),e.next=7,Lu(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zu(e,t,n){return function(e,t,n){return Bu.apply(this,arguments)}(e,t,n)}function Bu(){return(Bu=C(E().mark((function e(t,n,r){var i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jn((i=Fe(t)).auth,n,$i),e.next=4,i.auth._initializationPromise;case 4:return a=yu(i.auth,r),e.next=7,Lu(a,i.auth);case 7:return e.next=9,$u(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wu(e,t,n){return function(e,t,n){return Ku.apply(this,arguments)}(e,t,n)}function Ku(){return(Ku=C(E().mark((function e(t,n,r){var i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jn((i=Fe(t)).auth,n,$i),e.next=4,i.auth._initializationPromise;case 4:return a=yu(i.auth,r),e.next=7,ma(!1,i,n.providerId);case 7:return e.next=9,Lu(a,i.auth);case 9:return e.next=11,$u(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hu(e,t){return Gu.apply(this,arguments)}function Gu(){return(Gu=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ii(t)._initializationPromise;case 2:return e.abrupt("return",Qu(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qu(e,t){return Yu.apply(this,arguments)}function Yu(){return Yu=C(E().mark((function e(t,n){var r,i,a,o,u,s=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=ii(t),a=yu(i,n),o=new Ru(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Yu.apply(this,arguments)}function $u(e){return Ju.apply(this,arguments)}function Ju(){return(Ju=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Io("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xu=function(){function e(t){A(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return R(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return es(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!es(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Fn(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zu(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Zu(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Zu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function es(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function ts(e){return ns.apply(this,arguments)}function ns(){return ns=C(E().mark((function e(t){var n,r=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Zn(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),ns.apply(this,arguments)}var rs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,is=/^https?/;function as(){return(as=C(E().mark((function e(t){var n,r,i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ts(t);case 4:n=e.sent,r=n.authorizedDomains,i=O(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!os(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Mn(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function os(e){var t=Wn(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!is.test(r))return!1;if(rs.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var us=new Gn(3e4,6e4);function ss(){var e=So().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=je(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var cs=null;function ls(e){return cs=cs||function(e){return new Promise((function(t,n){var r,i,a;function o(){ss(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){ss(),n(Fn(e,"network-request-failed"))},timeout:us.get()})}if(null===(i=null===(r=So().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=So().gapi)||void 0===a?void 0:a.load)){var u=ui("iframefcb");return So()[u]=function(){gapi.load?o():n(Fn(e,"network-request-failed"))},oi("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw cs=null,e}))}(e),cs}var fs=new Gn(5e3,15e3),hs="__/auth/iframe",ds="emulator/auth/iframe",ps={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ys(e){var t=e.config;qn(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Qn(t,ds):"https://".concat(e.config.authDomain,"/").concat(hs),r={apiKey:t.apiKey,appName:e.name,v:Mt},i=vs.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Ee(r).slice(1))}function ms(e){return gs.apply(this,arguments)}function gs(){return gs=C(E().mark((function e(t){var n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ls(t);case 2:return n=e.sent,qn(r=So().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:ys(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ps,dontclear:!0},(function(e){return new Promise(function(){var n=C(E().mark((function n(r,i){var a,o,u;return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){So().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Fn(t,"network-request-failed"),o=So().setTimeout((function(){i(a)}),fs.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),gs.apply(this,arguments)}var ks={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_s=function(){function e(t){A(this,e),this.window=t,this.associatedEvent=null}return R(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function ws(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},ks),{width:r.toString(),height:i.toString(),top:a,left:o}),l=ae().toLowerCase();n&&(u=Kr(l)?"_blank":n),Br(l)&&(t=t||"http://localhost",c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return $r(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new _s(null);var h=window.open(t||"",u,f);qn(h,e,"popup-blocked");try{h.focus()}catch(d){}return new _s(h)}var bs="__/auth/handler",xs="emulator/auth/handler",Ts=encodeURIComponent("fac");function Es(e,t,n,r,i,a){return Is.apply(this,arguments)}function Is(){return(Is=C(E().mark((function e(t,n,r,i,a,o){var u,c,l,f,h,d,p,v,y,m,g,k,_;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qn(t.config.authDomain,t,"auth-domain-config-required"),qn(t.config.apiKey,t,"invalid-api-key"),u={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Mt,eventId:a},n instanceof $i)for(n.setDefaultLanguage(t.languageCode),u.providerId=n.providerId||"",we(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters())),c=0,l=Object.entries(o||{});c<l.length;c++)f=s(l[c],2),h=f[0],d=f[1],u[h]=d;for(n instanceof Ji&&(p=n.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=p.join(",")),t.tenantId&&(u.tid=t.tenantId),v=u,y=0,m=Object.keys(v);y<m.length;y++)g=m[y],void 0===v[g]&&delete v[g];return e.next=10,t._getAppCheckToken();case 10:return k=e.sent,_=k?"#".concat(Ts,"=").concat(encodeURIComponent(k)):"",e.abrupt("return","".concat(Cs(t),"?").concat(Ee(v).slice(1)).concat(_));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cs(e){var t=e.config;return t.emulator?Qn(t,xs):"https://".concat(t.authDomain,"/").concat(bs)}var Ss="webStorageSupport",Ps=function(){function e(){A(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xo,this._completeRedirectFn=Qu,this._overrideRedirectResult=Fu}return R(e,[{key:"_openPopup",value:function(){var e=C(E().mark((function e(t,n,r,i){var a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bn(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,Es(t,n,r,Wn(),i);case 3:return o=e.sent,e.abrupt("return",ws(t,o,Io()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=C(E().mark((function e(t,n,r,i){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,Es(t,n,r,Wn(),i);case 4:return Po(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Bn(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=C(E().mark((function e(t){var n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ms(t);case 2:return n=e.sent,r=new Xu(t),n.register("authEvent",(function(e){return qn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Ss,{type:Ss},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Ss];void 0!==i&&t(!!i),Mn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return as.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Jr()||Wr()||$r()}}]),e}(),As=Ps,Ns=function(){function e(t){A(this,e),this.factorId=t}return R(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return zn("unexpected MultiFactorSessionType")}}}]),e}(),Rs=function(e){M(n,e);var t=j(n);function n(e){var r;return A(this,n),(r=t.call(this,"phone")).credential=e,r}return R(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Zn(e,"POST","/v2/accounts/mfaEnrollment:finalize",Xn(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Zn(e,"POST","/v2/accounts/mfaSignIn:finalize",Xn(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Ns),Os=function(){function e(){A(this,e)}return R(e,null,[{key:"assertion",value:function(e){return Rs._fromCredential(e)}}]),e}();Os.FACTOR_ID="phone";var Ds=function(){function e(){A(this,e)}return R(e,null,[{key:"assertionForEnrollment",value:function(e,t){return Ls._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return Ls._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=C(E().mark((function e(t){var n,r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qn("undefined"!==typeof(null===(n=(r=t).user)||void 0===n?void 0:n.auth),"internal-error"),e.next=4,a=r.user.auth,o={idToken:r.credential,totpEnrollmentInfo:{}},Zn(a,"POST","/v2/accounts/mfaEnrollment:start",Xn(a,o));case 4:return i=e.sent,e.abrupt("return",Ms._fromStartTotpMfaEnrollmentResponse(i,r.user.auth));case 6:case"end":return e.stop()}var a,o}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Ds.FACTOR_ID="totp";var Ls=function(e){M(n,e);var t=j(n);function n(e,r,i){var a;return A(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return R(n,[{key:"_finalizeEnroll",value:function(){var e=C(E().mark((function e(t,n,r){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qn("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",vo(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=C(E().mark((function e(t,n){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qn(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",Yo(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(Ns),Ms=function(){function e(t,n,r,i,a,o,u){A(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return R(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(Fs(e)||Fs(t))&&(r=!0),r&&(Fs(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Fs(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function Fs(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var Us="@firebase/auth",js="1.3.0",Vs=function(){function e(t){A(this,e),this.auth=t,this.internalListeners=new Map}return R(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){qn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var qs;!function(e){var t;null===(t=te())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function zs(){return window}qs="Browser",Pt(new Ve("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;qn(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:qs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xr(qs)},l=new ri(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Fr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Pt(new Ve("auth-internal",(function(e){return function(e){return new Vs(e)}(ii(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),zt(Us,js,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(qs)),zt(Us,js,"esm2017");var Bs=2e3;function Ws(e,t,n){return Ks.apply(this,arguments)}function Ks(){return(Ks=C(E().mark((function e(t,n,r){var i,a,o,u,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=zs(),o=a.BuildInfo,Bn(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Js(n.sessionId);case 4:return u=e.sent,s={},$r()?s.ibi=o.packageName:Gr()?s.apn=o.packageName:Mn(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Es(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hs(){return(Hs=C(E().mark((function e(t){var n,r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=zs(),r=n.BuildInfo,i={},$r()?i.iosBundleId=r.packageName:Gr()?i.androidPackageName=r.packageName:Mn(t,"operation-not-supported-in-this-environment"),e.next=5,ts(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gs(e){var t=zs().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Qs(e,t,n){return Ys.apply(this,arguments)}function Ys(){return Ys=C(E().mark((function e(t,n,r){var i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zs(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Fn(t,"redirect-cancelled-by-user"))}),Bs))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Gr()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Ys.apply(this,arguments)}function $s(e){var t,n,r,i,a,o,u,s,c,l,f=zs();qn("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),qn("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),qn("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),qn("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),qn("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Js(e){return Xs.apply(this,arguments)}function Xs(){return(Xs=C(E().mark((function e(t){var n,r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Zs(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zs(e){if(Bn(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var ec=20,tc=function(e){M(n,e);var t=j(n);function n(){var e;return A(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return R(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),yn(F(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Xu);function nc(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:uc(),postBody:null,tenantId:e.tenantId,error:Fn(e,"no-auth-event")}}function rc(e,t){return sc()._set(cc(e),t)}function ic(e){return ac.apply(this,arguments)}function ac(){return(ac=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sc()._get(cc(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,sc()._remove(cc(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oc(e,t){var n,r,i=function(e){var t=lc(e),n=t.link?decodeURIComponent(t.link):void 0,r=lc(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return lc(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=lc(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Fn(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function uc(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<ec;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function sc(){return Fr(wo)}function cc(e){return Vr("authEvent",e.config.apiKey,e.name)}function lc(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=i(t=n)||Ue(t)||o(t)||u();r[0];return Ie(r.slice(1).join("?"))}var fc=function(){function e(){A(this,e),this._redirectPersistence=xo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Qu,this._overrideRedirectResult=Fu}return R(e,[{key:"_initialize",value:function(){var e=C(E().mark((function e(t){var n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new tc(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Mn(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=C(E().mark((function e(t,n,r,i){var a,o,u,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $s(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Nu.clear(),e.next=10,this._originValidation(t);case 10:return o=nc(t,r,i),e.next=13,rc(t,o);case 13:return e.next=15,Ws(t,o,n);case 15:return u=e.sent,e.next=18,Gs(u);case 18:return s=e.sent,e.abrupt("return",Qs(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Hs.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=zs(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(C(E().mark((function n(){return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ic(e);case 2:t.onEvent(dc());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=C(E().mark((function n(r){var i,a;return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,ic(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=oc(i,r.url)),t.onEvent(a||dc());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");zs().handleOpenURL=function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),hc=fc;function dc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Fn("no-auth-event")}}var pc=1e3;function vc(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function yc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae();return!("file:"!==vc()&&"ionic:"!==vc()&&"capacitor:"!==vc()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function mc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae();return le()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae();return/Edge\/\d+/.test(e)}(e)}function gc(){try{var e=self.localStorage,t=Io();if(e)return e.setItem(t,"1"),e.removeItem(t),!mc()||he()}catch(n){return kc()&&he()}return!1}function kc(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function _c(){return("http:"===vc()||"https:"===vc()||se()||yc())&&!(ce()||ue())&&gc()&&!kc()}function wc(){return yc()&&"undefined"!==typeof document}function bc(){return xc.apply(this,arguments)}function xc(){return xc=C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(wc()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),pc);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)}))),xc.apply(this,arguments)}var Tc={LOCAL:"local",NONE:"none",SESSION:"session"},Ec=qn,Ic="persistence";function Cc(e,t){Ec(Object.values(Tc).includes(t),e,"invalid-persistence-type"),ce()?Ec(t!==Tc.SESSION,e,"unsupported-persistence-type"):ue()?Ec(t===Tc.NONE,e,"unsupported-persistence-type"):kc()?Ec(t===Tc.NONE||t===Tc.LOCAL&&he(),e,"unsupported-persistence-type"):Ec(t===Tc.NONE||gc(),e,"unsupported-persistence-type")}function Sc(e){return Pc.apply(this,arguments)}function Pc(){return(Pc=C(E().mark((function e(t){var n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Ac(),r=Vr(Ic,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ac(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Nc=qn,Rc=function(){function e(){A(this,e),this.browserResolver=Fr(As),this.cordovaResolver=Fr(hc),this.underlyingResolver=null,this._redirectPersistence=xo,this._completeRedirectFn=Qu,this._overrideRedirectResult=Fu}return R(e,[{key:"_initialize",value:function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=C(E().mark((function e(t,n,r,i){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=C(E().mark((function e(t,n,r,i){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return wc()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Nc(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=C(E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,bc();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Oc(e){return e.unwrap()}function Dc(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new jc(e,function(e,t){var n,r=Fe(e),i=t;return qn(t.customData.operationType,r,"argument-error"),qn(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ho._fromError(r,i)}(e,t));else if(r){var i=Lc(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Lc(e){var t=(e instanceof de?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof de)&&"temporaryProof"in t&&"phoneNumber"in t)return vu.credentialFromResult(e);var n,r=t.providerId;if(!r||r===kn.PASSWORD)return null;switch(r){case kn.GOOGLE:n=ea;break;case kn.FACEBOOK:n=Zi;break;case kn.GITHUB:n=ta;break;case kn.TWITTER:n=ia;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?na._create(r,u):Vi._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Xi(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof de?n.credentialFromError(e):n.credentialFromResult(e)}function Mc(e,t){return t.catch((function(t){throw t instanceof de&&Dc(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Lc(t)),additionalUserInfo:lo(e),user:Vc.getOrCreate(r)}}))}function Fc(e,t){return Uc.apply(this,arguments)}function Uc(){return(Uc=C(E().mark((function e(t,n){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Mc(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jc=function(){function e(t,n){A(this,e),this.resolver=n,this.auth=t.wrapped()}return R(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Mc(Oc(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Vc=function(){function e(t){A(this,e),this._delegate=t,this.multiFactor=function(e){var t=Fe(e);return mo.has(t)||mo.set(t,yo._fromUser(t)),mo.get(t)}(t)}return R(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mc(this.auth,Ea(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fc(this.auth,cu(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mc(this.auth,Cu(this._delegate,t,Rc)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sc(ii(this.auth));case 2:return e.abrupt("return",Wu(this._delegate,t,Rc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mc(this.auth,Ca(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Fc(this.auth,function(e,t,n){return fu.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Mc(this.auth,function(e,t,n){return Iu.apply(this,arguments)}(this._delegate,e,Rc))}},{key:"reauthenticateWithRedirect",value:function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sc(ii(this.auth));case 2:return e.abrupt("return",zu(this._delegate,t,Rc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Ja.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,da(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return no(Fe(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return no(Fe(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return pu.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return to.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Xa.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Vc.USER_MAP=new WeakMap;var qc=qn,zc=function(){function e(t,n){if(A(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;qc(r,"invalid-api-key",{appName:t.name}),qc(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Rc:void 0;this._delegate=n.initialize({options:{persistence:Wc(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(An),this.linkUnderlyingAuth()}return R(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Vc.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){fi(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Va.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return qa(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return ja.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mc(this._delegate,Wa(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return $a.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Qi.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=C(E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qc(_c(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Hu(this._delegate,Rc);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Mc(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){ii(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Bc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Bc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Ha.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Ua.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=C(E().mark((function e(t){var n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Cc(this._delegate,t),e.t0=t,e.next=e.t0===Tc.SESSION?4:e.t0===Tc.LOCAL?6:e.t0===Tc.NONE?11:13;break;case 4:return n=xo,e.abrupt("break",14);case 6:return e.next=8,Fr(Go)._isAvailable();case 8:return r=e.sent,n=r?Go:wo,e.abrupt("break",14);case 11:return n=jr,e.abrupt("break",14);case 13:return e.abrupt("return",Mn("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Mc(this._delegate,function(e){return ca.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Mc(this._delegate,xa(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Mc(this._delegate,function(e,t){return Na.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Mc(this._delegate,function(e,t,n){return xa(Fe(e),Yi.credential(t,n)).catch(function(){var t=C(E().mark((function t(n){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&Ma(e),n;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Mc(this._delegate,function(e,t,n){return Ga.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Fc(this._delegate,function(e,t,n){return su.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qc(_c(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Mc(this._delegate,Tu(this._delegate,t,Rc)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qc(_c(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Sc(this._delegate);case 3:return e.abrupt("return",Vu(this._delegate,t,Rc));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Ba.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Bc(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Vc.getOrCreate(e))},error:t,complete:n}}function Wc(e,t){var n=function(e,t){var n=Ac();if(!n)return[];var r=Vr(Ic,e,t);switch(n.getItem(r)){case Tc.NONE:return[jr];case Tc.LOCAL:return[Go,xo];case Tc.SESSION:return[xo];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Go)||n.push(Go),"undefined"!==typeof window)for(var r=0,i=[wo,xo];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(jr)||n.push(jr),n}zc.Persistence=Tc;var Kc=function(){function e(){A(this,e),this.providerId="phone",this._delegate=new vu(Oc(vn.auth()))}return R(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return vu.credential(e,t)}}]),e}();Kc.PHONE_SIGN_IN_METHOD=vu.PHONE_SIGN_IN_METHOD,Kc.PROVIDER_ID=vu.PROVIDER_ID;var Hc,Gc=qn,Qc=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vn.app();A(this,e),Gc(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new au(i.auth(),t,n),this.type=this._delegate.type}return R(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Hc=vn).INTERNAL.registerComponent(new Ve("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new zc(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:_n,PASSWORD_RESET:wn,RECOVER_EMAIL:bn,REVERT_SECOND_FACTOR_ADDITION:xn,VERIFY_AND_CHANGE_EMAIL:Tn,VERIFY_EMAIL:En}},EmailAuthProvider:Yi,FacebookAuthProvider:Zi,GithubAuthProvider:ta,GoogleAuthProvider:ea,OAuthProvider:Xi,SAMLAuthProvider:ra,PhoneAuthProvider:Kc,PhoneMultiFactorGenerator:Os,RecaptchaVerifier:Qc,TwitterAuthProvider:ia,Auth:zc,AuthCredential:pi,Error:de}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Hc.registerVersion("@firebase/auth-compat","0.4.6");var Yc,$c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Jc={},Xc=Xc||{},Zc=$c||self;function el(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function tl(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var nl="closure_uid_"+(1e9*Math.random()>>>0),rl=0;function il(e,t,n){return e.call.apply(e.bind,arguments)}function al(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ol(e,t,n){return(ol=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?il:al).apply(null,arguments)}function ul(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function sl(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function cl(){this.s=this.s,this.o=this.o}cl.prototype.s=!1,cl.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,nl)&&e[nl]||(e[nl]=++rl))},cl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ll=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function fl(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function hl(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(el(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function dl(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}dl.prototype.h=function(){this.defaultPrevented=!0};var pl=function(){if(!Zc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Zc.addEventListener("test",(function(){}),t),Zc.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function vl(e){return/^[\s\xa0]*$/.test(e)}function yl(){var e=Zc.navigator;return e&&(e=e.userAgent)?e:""}function ml(e){return-1!=yl().indexOf(e)}function gl(e){return gl[" "](e),e}gl[" "]=function(){};var kl,_l,wl=ml("Opera"),bl=ml("Trident")||ml("MSIE"),xl=ml("Edge"),Tl=xl||bl,El=ml("Gecko")&&!(-1!=yl().toLowerCase().indexOf("webkit")&&!ml("Edge"))&&!(ml("Trident")||ml("MSIE"))&&!ml("Edge"),Il=-1!=yl().toLowerCase().indexOf("webkit")&&!ml("Edge");function Cl(){var e=Zc.document;return e?e.documentMode:void 0}e:{var Sl="",Pl=function(){var e=yl();return El?/rv:([^\);]+)(\)|;)/.exec(e):xl?/Edge\/([\d\.]+)/.exec(e):bl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Il?/WebKit\/(\S+)/.exec(e):wl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Pl&&(Sl=Pl?Pl[1]:""),bl){var Al=Cl();if(null!=Al&&Al>parseFloat(Sl)){kl=String(Al);break e}}kl=Sl}if(Zc.document&&bl){var Nl=Cl();_l=Nl||(parseInt(kl,10)||void 0)}else _l=void 0;var Rl=_l;function Ol(e,t){if(dl.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(El){e:{try{gl(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Dl[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ol.$.h.call(this)}}sl(Ol,dl);var Dl={2:"touch",3:"pen",4:"mouse"};Ol.prototype.h=function(){Ol.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ll="closure_listenable_"+(1e6*Math.random()|0),Ml=0;function Fl(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Ml,this.fa=this.ia=!1}function Ul(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function jl(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Vl(e){var t={};for(var n in e)t[n]=e[n];return t}var ql="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zl(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<ql.length;a++)n=ql[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Bl(e){this.src=e,this.g={},this.h=0}function Wl(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=ll(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Ul(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Kl(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Bl.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Kl(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Fl(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Hl="closure_lm_"+(1e6*Math.random()|0),Gl={};function Ql(e,t,n,r,i){if(r&&r.once)return $l(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ql(e,t[a],n,r,i);return null}return n=rf(n),e&&e[Ll]?e.O(t,n,tl(r)?!!r.capture:!!r,i):Yl(e,t,n,!1,r,i)}function Yl(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=tl(i)?!!i.capture:!!i,u=tf(e);if(u||(e[Hl]=u=new Bl(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ef;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)pl||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Zl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function $l(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)$l(e,t[a],n,r,i);return null}return n=rf(n),e&&e[Ll]?e.P(t,n,tl(r)?!!r.capture:!!r,i):Yl(e,t,n,!0,r,i)}function Jl(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Jl(e,t[a],n,r,i);else r=tl(r)?!!r.capture:!!r,n=rf(n),e&&e[Ll]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Kl(a=e.g[t],n,r,i))&&(Ul(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=tf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Kl(t,n,r,i)),(n=-1<e?t[e]:null)&&Xl(n))}function Xl(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Ll])Wl(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Zl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=tf(t))?(Wl(n,e),0==n.h&&(n.src=null,t[Hl]=null)):Ul(e)}}}function Zl(e){return e in Gl?Gl[e]:Gl[e]="on"+e}function ef(e,t){if(e.fa)e=!0;else{t=new Ol(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Xl(e),e=n.call(r,t)}return e}function tf(e){return(e=e[Hl])instanceof Bl?e:null}var nf="__closure_events_fn_"+(1e9*Math.random()>>>0);function rf(e){return"function"===typeof e?e:(e[nf]||(e[nf]=function(t){return e.handleEvent(t)}),e[nf])}function af(){cl.call(this),this.i=new Bl(this),this.S=this,this.J=null}function of(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new dl(t,e);else if(t instanceof dl)t.target=t.target||e;else{var i=t;zl(t=new dl(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=uf(o,r,!0,t)&&i}if(i=uf(o=t.g=e,r,!0,t)&&i,i=uf(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=uf(o=t.g=n[a],r,!1,t)&&i}function uf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&Wl(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}sl(af,cl),af.prototype[Ll]=!0,af.prototype.removeEventListener=function(e,t,n,r){Jl(this,e,t,n,r)},af.prototype.N=function(){if(af.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ul(n[r]);delete t.g[e],t.h--}}this.J=null},af.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},af.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var sf=Zc.JSON.stringify,cf=function(){function e(t,n){A(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return R(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function lf(){var e=gf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ff=function(){function e(){A(this,e),this.h=this.g=null}return R(e,[{key:"add",value:function(e,t){var n=hf.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),hf=new cf((function(){return new df}),(function(e){return e.reset()})),df=function(){function e(){A(this,e),this.next=this.g=this.h=null}return R(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function pf(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function vf(e){Zc.setTimeout((function(){throw e}),0)}var yf,mf=!1,gf=new ff,kf=function(){var e=Zc.Promise.resolve(void 0);yf=function(){e.then(_f)}},_f=function(){for(var e;e=lf();){try{e.h.call(e.g)}catch(n){vf(n)}var t=hf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}mf=!1};function wf(e,t){af.call(this),this.h=e||1,this.g=t||Zc,this.j=ol(this.qb,this),this.l=Date.now()}function bf(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function xf(e,t,n){if("function"===typeof e)n&&(e=ol(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ol(e.handleEvent,e)}return 2147483647<Number(t)?-1:Zc.setTimeout(e,t||0)}function Tf(e){e.g=xf((function(){e.g=null,e.i&&(e.i=!1,Tf(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}sl(wf,af),(Yc=wf.prototype).ga=!1,Yc.T=null,Yc.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),of(this,"tick"),this.ga&&(bf(this),this.start()))}},Yc.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Yc.N=function(){wf.$.N.call(this),bf(this),delete this.g};var Ef=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return R(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Tf(this)}},{key:"N",value:function(){yn(F(n.prototype),"N",this).call(this),this.g&&(Zc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(cl);function If(e){cl.call(this),this.h=e,this.g={}}sl(If,cl);var Cf=[];function Sf(e,t,n,r){Array.isArray(n)||(n&&(Cf[0]=n.toString()),n=Cf);for(var i=0;i<n.length;i++){var a=Ql(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Pf(e){jl(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Xl(e)}),e),e.g={}}function Af(){this.g=!0}function Nf(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return sf(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}If.prototype.N=function(){If.$.N.call(this),Pf(this)},If.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Af.prototype.Ea=function(){this.g=!1},Af.prototype.info=function(){};var Rf={},Of=null;function Df(){return Of=Of||new af}function Lf(e){dl.call(this,Rf.Ta,e)}function Mf(e){var t=Df();of(t,new Lf(t))}function Ff(e,t){dl.call(this,Rf.STAT_EVENT,e),this.stat=t}function Uf(e){var t=Df();of(t,new Ff(t,e))}function jf(e,t){dl.call(this,Rf.Ua,e),this.size=t}function Vf(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Zc.setTimeout((function(){e()}),t)}Rf.Ta="serverreachability",sl(Lf,dl),Rf.STAT_EVENT="statevent",sl(Ff,dl),Rf.Ua="timingevent",sl(jf,dl);var qf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},zf={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Bf(){}function Wf(e){return e.h||(e.h=e.i())}function Kf(){}Bf.prototype.h=null;var Hf,Gf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Qf(){dl.call(this,"d")}function Yf(){dl.call(this,"c")}function $f(){}function Jf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new If(this),this.P=Zf,e=Tl?125:void 0,this.V=new wf(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Xf}function Xf(){this.i=null,this.g="",this.h=!1}sl(Qf,dl),sl(Yf,dl),sl($f,Bf),$f.prototype.g=function(){return new XMLHttpRequest},$f.prototype.i=function(){return{}},Hf=new $f;var Zf=45e3,eh={},th={};function nh(e,t,n){e.L=1,e.v=wh(yh(t)),e.s=n,e.S=!0,rh(e,null)}function rh(e,t){e.G=Date.now(),uh(e),e.A=yh(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Dh(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Xf,e.g=Ld(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Ef(ol(e.Pa,e,e.g),e.O)),Sf(e.U,e.g,"readystatechange",e.nb),t=e.I?Vl(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Mf(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function ih(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function ah(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=oh(e,n))==th){4==t&&(e.o=4,Uf(14),i=!1),Nf(e.j,e.m,null,"[Incomplete Response]");break}if(r==eh){e.o=4,Uf(15),Nf(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Nf(e.j,e.m,r,null),hh(e,r)}ih(e)&&r!=th&&r!=eh&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Uf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Cd(t),t.M=!0,Uf(11))):(Nf(e.j,e.m,n,"[Invalid Chunked Response]"),fh(e),lh(e))}function oh(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?th:(n=Number(t.substring(n,r)),isNaN(n)?eh:(r+=1)+n>t.length?th:(t=t.slice(r,r+n),e.C=r+n,t))}function uh(e){e.Y=Date.now()+e.P,sh(e,e.P)}function sh(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Vf(ol(e.lb,e),t)}function ch(e){e.B&&(Zc.clearTimeout(e.B),e.B=null)}function lh(e){0==e.l.H||e.J||Ad(e.l,e)}function fh(e){ch(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,bf(e.V),Pf(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function hh(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||qh(n.i,e)))if(!e.K&&qh(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Pd(n),kd(n)}Id(n),Uf(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Vf(ol(n.ib,n),6e3));if(1>=Vh(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else Rd(n,11)}else if((e.K||n.g==e)&&Pd(n),!vl(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(zh(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,_h(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Dd(r,r.J?r.pa:null,r.Y),d.K){Bh(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(ch(p),uh(p)),r.g=d}else Ed(r);0<n.j.length&&wd(n)}else"stop"!=a[0]&&"close"!=a[0]||Rd(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Rd(n,7):gd(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Mf()}catch(a){}}function dh(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(el(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(el(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(el(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Yc=Jf.prototype).setTimeout=function(e){this.P=e},Yc.nb=function(e){e=e.target;var t=this.M;t&&3==hd(e)?t.l():this.Pa(e)},Yc.Pa=function(e){try{if(e==this.g)e:{var t=hd(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Tl||this.g&&(this.h.h||this.g.ja()||dd(this.g)))){this.J||4!=t||7==n||Mf(),ch(this);var r=this.g.da();this.ca=r;t:if(ih(this)){var i=dd(this.g);e="";var a=i.length,o=4==hd(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){fh(this),lh(this);var u="";break t}this.h.i=new Zc.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vl(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Uf(12),fh(this),lh(this);break e}Nf(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hh(this,r)}this.S?(ah(this,t,u),Tl&&this.i&&3==t&&(Sf(this.U,this.V,"tick",this.mb),this.V.start())):(Nf(this.j,this.m,u,null),hh(this,u)),4==t&&fh(this),this.i&&!this.J&&(4==t?Ad(this.l,this):(this.i=!1,uh(this)))}else(function(e){var t={};e=(e.g&&2<=hd(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!vl(e[n])){var r=pf(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Uf(12)):(this.o=0,Uf(13)),fh(this),lh(this)}}}catch(t){}},Yc.mb=function(){if(this.g){var e=hd(this.g),t=this.g.ja();this.C<t.length&&(ch(this),ah(this,e,t),this.i&&4!=e&&uh(this))}},Yc.cancel=function(){this.J=!0,fh(this)},Yc.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Mf(),Uf(17)),fh(this),this.o=2,lh(this)):sh(this,this.Y-e)};var ph=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vh(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof vh){this.h=e.h,mh(this,e.j),this.s=e.s,this.g=e.g,gh(this,e.m),this.l=e.l;var t=e.i,n=new Ah;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),kh(this,n),this.o=e.o}else e&&(t=String(e).match(ph))?(this.h=!1,mh(this,t[1]||"",!0),this.s=bh(t[2]||""),this.g=bh(t[3]||"",!0),gh(this,t[4]),this.l=bh(t[5]||"",!0),kh(this,t[6]||"",!0),this.o=bh(t[7]||"")):(this.h=!1,this.i=new Ah(null,this.h))}function yh(e){return new vh(e)}function mh(e,t,n){e.j=n?bh(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function gh(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function kh(e,t,n){t instanceof Ah?(e.i=t,function(e,t){t&&!e.j&&(Nh(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Rh(this,t),Dh(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=xh(t,Sh)),e.i=new Ah(t,e.h))}function _h(e,t,n){e.i.set(t,n)}function wh(e){return _h(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function bh(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function xh(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Th),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Th(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}vh.prototype.toString=function(){var e=[],t=this.j;t&&e.push(xh(t,Eh,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(xh(t,Eh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(xh(n,"/"==n.charAt(0)?Ch:Ih,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",xh(n,Ph)),e.join("")};var Eh=/[#\/\?@]/g,Ih=/[#\?:]/g,Ch=/[#\?]/g,Sh=/[#\?@]/g,Ph=/#/g;function Ah(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Nh(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Rh(e,t){Nh(e),t=Lh(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Oh(e,t){return Nh(e),t=Lh(e,t),e.g.has(t)}function Dh(e,t,n){Rh(e,t),0<n.length&&(e.i=null,e.g.set(Lh(e,t),fl(n)),e.h+=n.length)}function Lh(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Yc=Ah.prototype).add=function(e,t){Nh(this),this.i=null,e=Lh(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Yc.forEach=function(e,t){Nh(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Yc.ta=function(){Nh(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Yc.Z=function(e){Nh(this);var t=[];if("string"===typeof e)Oh(this,e)&&(t=t.concat(this.g.get(Lh(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Yc.set=function(e,t){return Nh(this),this.i=null,Oh(this,e=Lh(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Yc.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Yc.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Mh=R((function e(t,n){A(this,e),this.g=t,this.map=n}));function Fh(e){this.l=e||Uh,Zc.PerformanceNavigationTiming?e=0<(e=Zc.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Zc.g&&Zc.g.Ka&&Zc.g.Ka()&&Zc.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Uh=10;function jh(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Vh(e){return e.h?1:e.g?e.g.size:0}function qh(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function zh(e,t){e.g?e.g.add(t):e.h=t}function Bh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Wh(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=O(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return fl(e.i)}Fh.prototype.cancel=function(){if(this.i=Wh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=O(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var Kh,Hh=function(){function e(){A(this,e)}return R(e,[{key:"stringify",value:function(e){return Zc.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Zc.JSON.parse(e,void 0)}}]),e}();function Gh(){this.g=new Hh}function Qh(e,t,n){var r=n||"";try{dh(e,(function(e,n){var i=e;tl(e)&&(i=sf(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Yh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function $h(e){this.l=e.ec||null,this.j=e.ob||!1}function Jh(e,t){af.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Xh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}sl($h,Bf),$h.prototype.g=function(){return new Jh(this.l,this.j)},$h.prototype.i=(Kh={},function(){return Kh}),sl(Jh,af);var Xh=0;function Zh(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ed(e){e.readyState=4,e.l=null,e.j=null,e.A=null,td(e)}function td(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Yc=Jh.prototype).open=function(e,t){if(this.readyState!=Xh)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,td(this)},Yc.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Zc).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Yc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ed(this)),this.readyState=Xh},Yc.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,td(this)),this.g&&(this.readyState=3,td(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Zc.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zh(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Yc.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ed(this):td(this),3==this.readyState&&Zh(this)}},Yc.Za=function(e){this.g&&(this.response=this.responseText=e,ed(this))},Yc.Ya=function(e){this.g&&(this.response=e,ed(this))},Yc.ka=function(){this.g&&ed(this)},Yc.setRequestHeader=function(e,t){this.v.append(e,t)},Yc.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Yc.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Jh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var nd=Zc.JSON.parse;function rd(e){af.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=id,this.L=this.M=!1}sl(rd,af);var id="",ad=/^https?$/i,od=["POST","PUT"];function ud(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,sd(e),ld(e)}function sd(e){e.F||(e.F=!0,of(e,"complete"),of(e,"error"))}function cd(e){if(e.h&&"undefined"!=typeof Xc&&(!e.C[1]||4!=hd(e)||2!=e.da()))if(e.v&&4==hd(e))xf(e.La,0,e);else if(of(e,"readystatechange"),4==hd(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(ph)[1]||null;!a&&Zc.self&&Zc.self.location&&(a=Zc.self.location.protocol.slice(0,-1)),i=!ad.test(a?a.toLowerCase():"")}t=i}if(t)of(e,"complete"),of(e,"success");else{e.m=6;try{var o=2<hd(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",sd(e)}}finally{ld(e)}}}function ld(e,t){if(e.g){fd(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||of(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function fd(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Zc.clearTimeout(e.A),e.A=null)}function hd(e){return e.g?e.g.readyState:0}function dd(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case id:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(_p){return null}}function pd(e){var t="";return jl(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function vd(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=pd(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):_h(e,t,n))}function yd(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function md(e){this.Ga=0,this.j=[],this.l=new Af,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=yd("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=yd("baseRetryDelayMs",5e3,e),this.hb=yd("retryDelaySeedMs",1e4,e),this.eb=yd("forwardChannelMaxRetries",2,e),this.xa=yd("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Fh(e&&e.concurrentRequestLimit),this.Ja=new Gh,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function gd(e){if(_d(e),3==e.H){var t=e.W++,n=yh(e.I);if(_h(n,"SID",e.K),_h(n,"RID",t),_h(n,"TYPE","terminate"),xd(e,n),(t=new Jf(e,e.l,t)).L=2,t.v=wh(yh(n)),n=!1,Zc.navigator&&Zc.navigator.sendBeacon)try{n=Zc.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Zc.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ld(t.l,null),t.g.ha(t.v)),t.G=Date.now(),uh(t)}Od(e)}function kd(e){e.g&&(Cd(e),e.g.cancel(),e.g=null)}function _d(e){kd(e),e.u&&(Zc.clearTimeout(e.u),e.u=null),Pd(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Zc.clearTimeout(e.m),e.m=null)}function wd(e){if(!jh(e.i)&&!e.m){e.m=!0;var t=e.Na;yf||kf(),mf||(yf(),mf=!0),gf.add(t,e),e.C=0}}function bd(e,t){var n;n=t?t.m:e.W++;var r=yh(e.I);_h(r,"SID",e.K),_h(r,"RID",n),_h(r,"AID",e.V),xd(e,r),e.o&&e.s&&vd(r,e.o,e.s),n=new Jf(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Td(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),zh(e.i,n),nh(n,r,t)}function xd(e,t){e.na&&jl(e.na,(function(e,n){_h(t,n,e)})),e.h&&dh({},(function(e,n){_h(t,n,e)}))}function Td(e,t,n){n=Math.min(e.j.length,n);var r=e.h?ol(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{Qh(l,o,"req"+c+"_")}catch(Uv){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function Ed(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;yf||kf(),mf||(yf(),mf=!0),gf.add(t,e),e.A=0}}function Id(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Vf(ol(e.Ma,e),Nd(e,e.A)),e.A++,!0)}function Cd(e){null!=e.B&&(Zc.clearTimeout(e.B),e.B=null)}function Sd(e){e.g=new Jf(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=yh(e.wa);_h(t,"RID","rpc"),_h(t,"SID",e.K),_h(t,"AID",e.V),_h(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&_h(t,"TO",e.qa),_h(t,"TYPE","xmlhttp"),xd(e,t),e.o&&e.s&&vd(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=wh(yh(t)),n.s=null,n.S=!0,rh(n,e)}function Pd(e){null!=e.v&&(Zc.clearTimeout(e.v),e.v=null)}function Ad(e,t){var n=null;if(e.g==t){Pd(e),Cd(e),e.g=null;var r=2}else{if(!qh(e.i,t))return;n=t.F,Bh(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;of(r=Df(),new jf(r,n)),wd(e)}else Ed(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Vh(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Vf(ol(e.Na,e,t),Nd(e,e.C)),e.C++,!0))}(e,t)||2==r&&Id(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Rd(e,5);break;case 4:Rd(e,10);break;case 3:Rd(e,6);break;default:Rd(e,2)}}function Nd(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Rd(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=ol(e.pb,e);n||(n=new vh("//www.google.com/images/cleardot.gif"),Zc.location&&"http"==Zc.location.protocol||mh(n,"https"),wh(n)),function(e,t){var n=new Af;if(Zc.Image){var r=new Image;r.onload=ul(Yh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ul(Yh,n,r,"TestLoadImage: error",!1,t),r.onabort=ul(Yh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ul(Yh,n,r,"TestLoadImage: timeout",!1,t),Zc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Uf(2);e.H=0,e.h&&e.h.za(t),Od(e),_d(e)}function Od(e){if(e.H=0,e.ma=[],e.h){var t=Wh(e.i);0==t.length&&0==e.j.length||(hl(e.ma,t),hl(e.ma,e.j),e.i.i.length=0,fl(e.j),e.j.length=0),e.h.ya()}}function Dd(e,t,n){var r=n instanceof vh?yh(n):new vh(n);if(""!=r.g)t&&(r.g=t+"."+r.g),gh(r,r.m);else{var i=Zc.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new vh(null);r&&mh(a,r),t&&(a.g=t),i&&gh(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&_h(r,n,t),_h(r,"VER",e.ra),xd(e,r),r}function Ld(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new rd(new $h({ob:!0})):new rd(e.va)).Oa(e.J),t}function Md(){}function Fd(){if(bl&&!(10<=Number(Rl)))throw Error("Environmental error: no available transport.")}function Ud(e,t){af.call(this),this.g=new md(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!vl(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!vl(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new qd(this)}function jd(e){Qf.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Vd(){Yf.call(this),this.status=1}function qd(e){this.g=e}function zd(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Bd(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Wd(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Yc=rd.prototype).Oa=function(e){this.M=e},Yc.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Hf.g(),this.C=this.u?Wf(this.u):Wf(Hf),this.g.onreadystatechange=ol(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void ud(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=O(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Zc.FormData&&e instanceof Zc.FormData,!(0<=ll(od,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,l=O(n);try{for(l.s();!(c=l.n()).done;){var f=s(c.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){l.e(p)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{fd(this),0<this.B&&((this.L=function(e){return bl&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ol(this.ua,this)):this.A=xf(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){ud(this,u)}},Yc.ua=function(){"undefined"!=typeof Xc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,of(this,"timeout"),this.abort(8))},Yc.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,of(this,"complete"),of(this,"abort"),ld(this))},Yc.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ld(this,!0)),rd.$.N.call(this)},Yc.La=function(){this.s||(this.G||this.v||this.l?cd(this):this.kb())},Yc.kb=function(){cd(this)},Yc.isActive=function(){return!!this.g},Yc.da=function(){try{return 2<hd(this)?this.g.status:-1}catch(Kh){return-1}},Yc.ja=function(){try{return this.g?this.g.responseText:""}catch(Kh){return""}},Yc.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),nd(t)}},Yc.Ia=function(){return this.m},Yc.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Yc=md.prototype).ra=8,Yc.H=1,Yc.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Jf(this,this.l,e),n=this.s;if(this.U&&(n?zl(n=Vl(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Td(this,t,r),_h(i=yh(this.I),"RID",e),_h(i,"CVER",22),this.F&&_h(i,"X-HTTP-Session-Id",this.F),xd(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(pd(n)))+"&"+r:this.o&&vd(i,this.o,n)),zh(this.i,t),this.bb&&_h(i,"TYPE","init"),this.P?(_h(i,"$req",r),_h(i,"SID","null"),t.aa=!0,nh(t,i,null)):nh(t,i,r),this.H=2}}else 3==this.H&&(e?bd(this,e):0==this.j.length||jh(this.i)||bd(this))},Yc.Ma=function(){if(this.u=null,Sd(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Vf(ol(this.jb,this),e)}},Yc.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Uf(10),kd(this),Sd(this))},Yc.ib=function(){null!=this.v&&(this.v=null,kd(this),Id(this),Uf(19))},Yc.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Uf(2)):(this.l.info("Failed to ping google.com"),Uf(1))},Yc.isActive=function(){return!!this.h&&this.h.isActive(this)},(Yc=Md.prototype).Ba=function(){},Yc.Aa=function(){},Yc.za=function(){},Yc.ya=function(){},Yc.isActive=function(){return!0},Yc.Va=function(){},Fd.prototype.g=function(e,t){return new Ud(e,t)},sl(Ud,af),Ud.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Uf(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Dd(e,null,e.Y),wd(e)},Ud.prototype.close=function(){gd(this.g)},Ud.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=sf(e),e=n);t.j.push(new Mh(t.fb++,e)),3==t.H&&wd(t)},Ud.prototype.N=function(){this.g.h=null,delete this.j,gd(this.g),delete this.g,Ud.$.N.call(this)},sl(jd,Qf),sl(Vd,Yf),sl(qd,Md),qd.prototype.Ba=function(){of(this.g,"a")},qd.prototype.Aa=function(e){of(this.g,new jd(e))},qd.prototype.za=function(e){of(this.g,new Vd)},qd.prototype.ya=function(){of(this.g,"b")},sl(zd,(function(){this.blockSize=-1})),zd.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},zd.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Bd(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Bd(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Bd(this,r),i=0;break}}this.h=i,this.i+=t},zd.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Kd={};function Hd(e){return-128<=e&&128>e?function(e,t){var n=Kd;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Wd([0|e],0>e?-1:0)})):new Wd([0|e],0>e?-1:0)}function Gd(e){if(isNaN(e)||!isFinite(e))return Yd;if(0>e)return ep(Gd(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Qd;return new Wd(t,0)}var Qd=4294967296,Yd=Hd(0),$d=Hd(1),Jd=Hd(16777216);function Xd(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Zd(e){return-1==e.h}function ep(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Wd(n,~e.h).add($d)}function tp(e,t){return e.add(ep(t))}function np(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function rp(e,t){this.g=e,this.h=t}function ip(e,t){if(Xd(t))throw Error("division by zero");if(Xd(e))return new rp(Yd,Yd);if(Zd(e))return t=ip(ep(e),t),new rp(ep(t.g),ep(t.h));if(Zd(t))return t=ip(e,ep(t)),new rp(ep(t.g),t.h);if(30<e.g.length){if(Zd(e)||Zd(t))throw Error("slowDivide_ only works with positive integers.");for(var n=$d,r=t;0>=r.X(e);)n=ap(n),r=ap(r);var i=op(n,1),a=op(r,1);for(r=op(r,2),n=op(n,2);!Xd(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=op(r,1),n=op(n,1)}return t=tp(e,i.R(t)),new rp(i,t)}for(i=Yd;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Gd(n)).R(t);Zd(o)||0<o.X(e);)o=(a=Gd(n-=r)).R(t);Xd(a)&&(a=$d),i=i.add(a),e=tp(e,o)}return new rp(i,e)}function ap(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Wd(n,e.h)}function op(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Wd(i,e.h)}(Yc=Wd.prototype).ea=function(){if(Zd(this))return-ep(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Qd+r)*t,t*=Qd}return e},Yc.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Xd(this))return"0";if(Zd(this))return"-"+ep(this).toString(e);for(var t=Gd(Math.pow(e,6)),n=this,r="";;){var i=ip(n,t).g,a=((0<(n=tp(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Xd(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Yc.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Yc.X=function(e){return Zd(e=tp(this,e))?-1:Xd(e)?0:1},Yc.abs=function(){return Zd(this)?ep(this):this},Yc.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Wd(n,-2147483648&n[n.length-1]?-1:0)},Yc.R=function(e){if(Xd(this)||Xd(e))return Yd;if(Zd(this))return Zd(e)?ep(this).R(ep(e)):ep(ep(this).R(e));if(Zd(e))return ep(this.R(ep(e)));if(0>this.X(Jd)&&0>e.X(Jd))return Gd(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,np(n,2*r+2*i),n[2*r+2*i+1]+=a*s,np(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,np(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,np(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Wd(n,0)},Yc.gb=function(e){return ip(this,e).h},Yc.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Wd(n,this.h&e.h)},Yc.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Wd(n,this.h|e.h)},Yc.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Wd(n,this.h^e.h)},Fd.prototype.createWebChannel=Fd.prototype.g,Ud.prototype.send=Ud.prototype.u,Ud.prototype.open=Ud.prototype.m,Ud.prototype.close=Ud.prototype.close,qf.NO_ERROR=0,qf.TIMEOUT=8,qf.HTTP_ERROR=6,zf.COMPLETE="complete",Kf.EventType=Gf,Gf.OPEN="a",Gf.CLOSE="b",Gf.ERROR="c",Gf.MESSAGE="d",af.prototype.listen=af.prototype.O,rd.prototype.listenOnce=rd.prototype.P,rd.prototype.getLastError=rd.prototype.Sa,rd.prototype.getLastErrorCode=rd.prototype.Ia,rd.prototype.getStatus=rd.prototype.da,rd.prototype.getResponseJson=rd.prototype.Wa,rd.prototype.getResponseText=rd.prototype.ja,rd.prototype.send=rd.prototype.ha,rd.prototype.setWithCredentials=rd.prototype.Oa,zd.prototype.digest=zd.prototype.l,zd.prototype.reset=zd.prototype.reset,zd.prototype.update=zd.prototype.j,Wd.prototype.add=Wd.prototype.add,Wd.prototype.multiply=Wd.prototype.R,Wd.prototype.modulo=Wd.prototype.gb,Wd.prototype.compare=Wd.prototype.X,Wd.prototype.toNumber=Wd.prototype.ea,Wd.prototype.toString=Wd.prototype.toString,Wd.prototype.getBits=Wd.prototype.D,Wd.fromNumber=Gd,Wd.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return ep(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Gd(Math.pow(n,8)),i=Yd,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=Gd(Math.pow(n,o)),i=i.R(o).add(Gd(u))):i=(i=i.R(r)).add(Gd(u))}return i};var up=Jc.createWebChannelTransport=function(){return new Fd},sp=Jc.getStatEventTarget=function(){return Df()},cp=Jc.ErrorCode=qf,lp=Jc.EventType=zf,fp=Jc.Event=Rf,hp=Jc.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},dp=(Jc.FetchXmlHttpFactory=$h,Jc.WebChannel=Kf),pp=Jc.XhrIo=rd,vp=Jc.Md5=zd,yp=Jc.Integer=Wd,mp="@firebase/firestore",gp=function(){function e(t){A(this,e),this.uid=t}return R(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();gp.UNAUTHENTICATED=new gp(null),gp.GOOGLE_CREDENTIALS=new gp("google-credentials-uid"),gp.FIRST_PARTY=new gp("first-party-uid"),gp.MOCK_USER=new gp("mock-user");var kp="10.5.0",_p=new Je("@firebase/firestore");function wp(){return _p.logLevel}function bp(e){if(_p.logLevel<=We.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ep);_p.debug.apply(_p,["Firestore (".concat(kp,"): ").concat(e)].concat(je(i)))}}function xp(e){if(_p.logLevel<=We.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ep);_p.error.apply(_p,["Firestore (".concat(kp,"): ").concat(e)].concat(je(i)))}}function Tp(e){if(_p.logLevel<=We.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ep);_p.warn.apply(_p,["Firestore (".concat(kp,"): ").concat(e)].concat(je(i)))}}function Ep(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ip(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(kp,") INTERNAL ASSERTION FAILED: ")+e;throw xp(t),new Error(t)}function Cp(e,t){e||Ip()}function Sp(e,t){return e}var Pp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ap=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return R(n)}(de),Np=R((function e(){var t=this;A(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Rp=R((function e(t,n){A(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Op=function(){function e(){A(this,e)}return R(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(gp.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Dp=function(){function e(t){A(this,e),this.token=t,this.changeListener=null}return R(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Lp=function(){function e(t){A(this,e),this.t=t,this.currentUser=gp.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return R(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Np;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Np,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){bp("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(bp("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Np)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(bp("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Cp("string"==typeof n.accessToken),new Rp(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Cp(null===e||"string"==typeof e),new gp(e)}}]),e}(),Mp=function(){function e(t,n,r){A(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=gp.FIRST_PARTY,this.I=new Map}return R(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),Fp=function(){function e(t,n,r){A(this,e),this.l=t,this.h=n,this.P=r}return R(e,[{key:"getToken",value:function(){return Promise.resolve(new Mp(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(gp.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Up=R((function e(t){A(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),jp=function(){function e(t){A(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return R(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&bp("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,bp("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){bp("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):bp("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Cp("string"==typeof t.token),e.R=t.token,new Up(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Vp(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var qp=function(){function e(){A(this,e)}return R(e,null,[{key:"V",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Vp(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function zp(e,t){return e<t?-1:e>t?1:0}function Bp(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Wp(e){return e+"\0"}var Kp=function(){function e(t,n){if(A(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Ap(Pp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ap(Pp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Ap(Pp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ap(Pp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return R(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?zp(this.nanoseconds,e.nanoseconds):zp(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Hp=function(){function e(t){A(this,e),this.timestamp=t}return R(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Kp(0,0))}},{key:"max",value:function(){return new e(new Kp(253402300799,999999999))}}]),e}(),Gp=function(){function e(t,n,r){A(this,e),void 0===n?n=0:n>t.length&&Ip(),void 0===r?r=t.length-n:r>t.length-n&&Ip(),this.segments=t,this.offset=n,this.len=r}return R(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Qp=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Ap(Pp.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,je(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Gp),Yp=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$p=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Yp.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Ap(Pp.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Ap(Pp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Ap(Pp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Ap(Pp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Gp),Jp=function(){function e(t){A(this,e),this.path=t}return R(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Qp.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Qp.fromString(t))}},{key:"fromName",value:function(t){return new e(Qp.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Qp.emptyPath())}},{key:"comparator",value:function(e,t){return Qp.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Qp(t.slice()))}}]),e}(),Xp=R((function e(t,n,r,i){A(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Zp(e){return e.fields.find((function(e){return 2===e.kind}))}function ev(e){return e.fields.filter((function(e){return 2!==e.kind}))}Xp.UNKNOWN_ID=-1;var tv=R((function e(t,n){A(this,e),this.fieldPath=t,this.kind=n}));var nv=function(){function e(t,n){A(this,e),this.sequenceNumber=t,this.offset=n}return R(e,null,[{key:"empty",value:function(){return new e(0,av.min())}}]),e}();function rv(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Hp.fromTimestamp(1e9===r?new Kp(n+1,0):new Kp(n,r));return new av(i,Jp.empty(),t)}function iv(e){return new av(e.readTime,e.key,-1)}var av=function(){function e(t,n,r){A(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return R(e,null,[{key:"min",value:function(){return new e(Hp.min(),Jp.empty(),-1)}},{key:"max",value:function(){return new e(Hp.max(),Jp.empty(),-1)}}]),e}();function ov(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Jp.comparator(e.documentKey,t.documentKey))?n:zp(e.largestBatchId,t.largestBatchId)}var uv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",sv=function(){function e(){A(this,e),this.onCommittedListeners=[]}return R(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function cv(e){return lv.apply(this,arguments)}function lv(){return(lv=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Pp.FAILED_PRECONDITION&&t.message===uv){e.next=2;break}throw t;case 2:bp("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fv=function(){function e(t){var n=this;A(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return R(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Ip(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=O(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),hv=function(){function e(t,n){var r=this;A(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.m=new Np,this.transaction.oncomplete=function(){r.m.resolve()},this.transaction.onabort=function(){n.error?r.m.reject(new vv(t,n.error)):r.m.resolve()},this.transaction.onerror=function(e){var n=_v(e.target.error);r.m.reject(new vv(t,n))}}return R(e,[{key:"g",get:function(){return this.m.promise}},{key:"abort",value:function(e){e&&this.m.reject(e),this.aborted||(bp("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"p",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new mv(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new vv(n,t)}}}]),e}(),dv=function(){function e(t,n,r){A(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(ae())&&xp("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return R(e,[{key:"N",value:function(){var e=C(E().mark((function e(t){var n=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return bp("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new vv(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Ap(Pp.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Ap(Pp.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new vv(t,n))},i.onupgradeneeded=function(e){bp("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.B(t,i.transaction,e.oldVersion,n.version).next((function(){bp("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.L&&(this.db.onversionchange=function(e){return n.L(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"k",value:function(e){this.L=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=C(E().mark((function e(t,n,r,i){var a,o,u,s,c=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=E().mark((function e(){var n,u,s,l;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.N(t);case 4:return c.db=e.sent,n=hv.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.p(),e})).catch((function(e){return n.abort(e),fv.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.g;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,bp("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if(!(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return bp("SimpleDb","Removing database:",e),gv(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!he())return!1;if(e.v())return!0;var t=ae(),n=e.D(t),r=0<n&&n<10,i=e.F(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"v",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/nwitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyDv4H2YYw1GZM4ci6BpJCxQD3fG-y5Ipj0",REACT_APP_APP_ID:"1:496165555411:web:5249d21e9d8d4787aad826",REACT_APP_AUTH_DOMAIN:"nwitter-bf428.firebaseapp.com",REACT_APP_DATABASE_URL:"",REACT_APP_MEASUR_ID:"",REACT_APP_MESSAGIN_ID:"496165555411",REACT_APP_PROJECT_ID:"nwitter-bf428",REACT_APP_STORAGE_BUCKET:"nwitter-bf428.appspot.com"})||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"F",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),pv=function(){function e(t){A(this,e),this.q=t,this.K=!1,this.$=null}return R(e,[{key:"isDone",get:function(){return this.K}},{key:"U",get:function(){return this.$}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.K=!0}},{key:"W",value:function(e){this.$=e}},{key:"delete",value:function(){return gv(this.q.delete())}}]),e}(),vv=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this,Pp.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return R(n)}(Ap);function yv(e){return"IndexedDbTransactionError"===e.name}var mv=function(){function e(t){A(this,e),this.store=t}return R(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(bp("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(bp("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),gv(n)}},{key:"add",value:function(e){return bp("SimpleDb","ADD",this.store.name,e,e),gv(this.store.add(e))}},{key:"get",value:function(e){var t=this;return gv(this.store.get(e)).next((function(n){return void 0===n&&(n=null),bp("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return bp("SimpleDb","DELETE",this.store.name,e),gv(this.store.delete(e))}},{key:"count",value:function(){return bp("SimpleDb","COUNT",this.store.name),gv(this.store.count())}},{key:"G",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.j(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new fv((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new fv((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){bp("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.j(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.j(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new fv((function(n,r){t.onerror=function(e){var t=_v(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"j",value:function(e,t){var n=[];return new fv((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new pv(i),o=t(i.primaryKey,i.value,a);if(o instanceof fv){var u=o.catch((function(e){return a.done(),fv.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return fv.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function gv(e){return new fv((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=_v(e.target.error);n(t)}}))}var kv=!1;function _v(e){var t=dv.D(ae());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Ap("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return kv||(kv=!0,setTimeout((function(){throw r}),0)),r}}return e}var wv=function(){function e(t,n){A(this,e),this.asyncQueue=t,this.ee=n,this.task=null}return R(e,[{key:"start",value:function(){this.te(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"te",value:function(e){var t=this;bp("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=bp,e.t1="Documents written: ",e.next=6,t.ee.ne();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!yv(e.t4)){e.next=17;break}bp("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,cv(e.t4);case 19:return e.next=21,t.te(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),bv=function(){function e(t,n){A(this,e),this.localStore=t,this.persistence=n}return R(e,[{key:"ne",value:function(){var e=C(E().mark((function e(){var t,n=this,r=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.re(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"re",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return fv.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return bp("IndexBackiller","Processing collection: ".concat(t)),n.ie(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"ie",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.se(i,n)})).next((function(n){return bp("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"se",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=iv(t);ov(r,n)>0&&(n=r)})),new av(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),xv=function(){function e(t,n){var r=this;A(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.oe(e)},this._e=function(e){return n.writeSequenceNumber(e)})}return R(e,[{key:"oe",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this._e&&this._e(e),e}}]),e}();function Tv(e){return null==e}function Ev(e){return 0===e&&1/e==-1/0}function Iv(e){return"number"==typeof e&&Number.isInteger(e)&&!Ev(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Cv(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Pv(t)),t=Sv(e.get(n),t);return Pv(t)}function Sv(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Pv(e){return e+"\x01\x01"}function Av(e){var t=e.length;if(Cp(t>=2),2===t)return Cp("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Qp.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Ip(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Ip()}a=o+2}return new Qp(r)}xv.ae=-1;var Nv=["userId","batchId"];function Rv(e,t){return[e,Cv(t)]}function Ov(e,t,n){return[e,Cv(t),n]}var Dv={},Lv=["prefixPath","collectionGroup","readTime","documentId"],Mv=["prefixPath","collectionGroup","documentId"],Fv=["collectionGroup","readTime","prefixPath","documentId"],Uv=["canonicalId","targetId"],jv=["targetId","path"],Vv=["path","targetId"],qv=["collectionId","parent"],zv=["indexId","uid"],Bv=["uid","sequenceNumber"],Wv=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Kv=["indexId","uid","orderedDocumentKey"],Hv=["userId","collectionPath","documentId"],Gv=["userId","collectionPath","largestBatchId"],Qv=["userId","collectionGroup","largestBatchId"],Yv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),$v=[].concat(je(Yv),["documentOverlays"]),Jv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Xv=Jv,Zv=[].concat(Xv,["indexConfiguration","indexState","indexEntries"]),ey=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this)).ue=e,i.currentSequenceNumber=r,i}return R(n)}(sv);function ty(e,t){var n=Sp(e);return dv.O(n.ue,t)}function ny(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ry(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function iy(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var ay=function(){function e(t,n){A(this,e),this.comparator=t,this.root=n||uy.EMPTY}return R(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,uy.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,uy.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new oy(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new oy(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new oy(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new oy(this.root,e,this.comparator,!0)}}]),e}(),oy=function(){function e(t,n,r,i){A(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return R(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),uy=function(){function e(t,n,r,i,a){A(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return R(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ip();if(this.right.isRed())throw Ip();var e=this.left.check();if(e!==this.right.check())throw Ip();return e+(this.isRed()?0:1)}}]),e}();uy.EMPTY=null,uy.RED=!0,uy.BLACK=!1,uy.EMPTY=new(function(){function e(){A(this,e),this.size=0}return R(e,[{key:"key",get:function(){throw Ip()}},{key:"value",get:function(){throw Ip()}},{key:"color",get:function(){throw Ip()}},{key:"left",get:function(){throw Ip()}},{key:"right",get:function(){throw Ip()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new uy(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var sy=function(){function e(t){A(this,e),this.comparator=t,this.data=new ay(this.comparator)}return R(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new cy(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new cy(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),cy=function(){function e(t){A(this,e),this.iter=t}return R(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function ly(e){return e.hasNext()?e.getNext():void 0}var fy=function(){function e(t){A(this,e),this.fields=t,t.sort($p.comparator)}return R(e,[{key:"unionWith",value:function(t){var n,r=new sy($p.comparator),i=O(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=O(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=O(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Bp(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),hy=function(e){M(n,e);var t=j(n);function n(){var e;return A(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return R(n)}(q(Error));var dy=function(e){function t(e){A(this,t),this.binaryString=e}return R(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return zp(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new hy("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();dy.EMPTY_BYTE_STRING=new dy("");var py=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vy(e){if(Cp(!!e),"string"==typeof e){var t=0,n=py.exec(e);if(Cp(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:yy(e.seconds),nanos:yy(e.nanos)}}function yy(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function my(e){return"string"==typeof e?dy.fromBase64String(e):dy.fromUint8Array(e)}function gy(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ky(e){var t=e.mapValue.fields.__previous_value__;return gy(t)?ky(t):t}function _y(e){var t=vy(e.mapValue.fields.__local_write_time__.timestampValue);return new Kp(t.seconds,t.nanos)}var wy=R((function e(t,n,r,i,a,o,u,s,c){A(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),by=function(){function e(t,n){A(this,e),this.projectId=t,this.database=n||"(default)"}return R(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),xy={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ty={nullValue:"NULL_VALUE"};function Ey(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?gy(e)?4:jy(e)?9007199254740991:10:Ip()}function Iy(e,t){if(e===t)return!0;var n=Ey(e);if(n!==Ey(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return _y(e).isEqual(_y(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=vy(e.timestampValue),r=vy(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return my(e.bytesValue).isEqual(my(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return yy(e.geoPointValue.latitude)===yy(t.geoPointValue.latitude)&&yy(e.geoPointValue.longitude)===yy(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return yy(e.integerValue)===yy(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=yy(e.doubleValue),r=yy(t.doubleValue);return n===r?Ev(n)===Ev(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Bp(e.arrayValue.values||[],t.arrayValue.values||[],Iy);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ny(n)!==ny(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Iy(n[i],r[i])))return!1;return!0}(e,t);default:return Ip()}}function Cy(e,t){return void 0!==(e.values||[]).find((function(e){return Iy(e,t)}))}function Sy(e,t){if(e===t)return 0;var n=Ey(e),r=Ey(t);if(n!==r)return zp(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return zp(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=yy(e.integerValue||e.doubleValue),r=yy(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Py(e.timestampValue,t.timestampValue);case 4:return Py(_y(e),_y(t));case 5:return zp(e.stringValue,t.stringValue);case 6:return function(e,t){var n=my(e),r=my(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=zp(n[i],r[i]);if(0!==a)return a}return zp(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=zp(yy(e.latitude),yy(t.latitude));return 0!==n?n:zp(yy(e.longitude),yy(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Sy(n[i],r[i]);if(a)return a}return zp(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===xy.mapValue&&t===xy.mapValue)return 0;if(e===xy.mapValue)return 1;if(t===xy.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=zp(r[o],a[o]);if(0!==u)return u;var s=Sy(n[r[o]],i[a[o]]);if(0!==s)return s}return zp(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Ip()}}function Py(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return zp(e,t);var n=vy(e),r=vy(t),i=zp(n.seconds,r.seconds);return 0!==i?i:zp(n.nanos,r.nanos)}function Ay(e){return Ny(e)}function Ny(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=vy(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return my(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Jp.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=O(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Ny(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=O(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Ny(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Ip()}function Ry(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Oy(e){return!!e&&"integerValue"in e}function Dy(e){return!!e&&"arrayValue"in e}function Ly(e){return!!e&&"nullValue"in e}function My(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Fy(e){return!!e&&"mapValue"in e}function Uy(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return ry(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Uy(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Uy(e.arrayValue.values[r]);return n}return Object.assign({},e)}function jy(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Vy(e){return"nullValue"in e?Ty:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ry(by.empty(),Jp.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ip()}function qy(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ry(by.empty(),Jp.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?xy:Ip()}function zy(e,t){var n=Sy(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function By(e,t){var n=Sy(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Wy=function(){function e(t){A(this,e),this.value=t}return R(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Fy(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uy(t)}},{key:"setAll",value:function(e){var t=this,n=$p.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Uy(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Fy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Iy(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Fy(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){ry(t,(function(t,n){return e[t]=n}));var r,i=O(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Uy(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Ky(e){var t=[];return ry(e.fields,(function(e,n){var r=new $p([e]);if(Fy(n)){var i=Ky(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=O(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new fy(t)}var Hy=function(){function e(t,n,r,i,a,o,u){A(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return R(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Hp.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Wy.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Wy.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Hp.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Hp.min(),Hp.min(),Hp.min(),Wy.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Hp.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Hp.min(),Hp.min(),Wy.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Hp.min(),Hp.min(),Wy.empty(),2)}}]),e}(),Gy=R((function e(t,n){A(this,e),this.position=t,this.inclusive=n}));function Qy(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Jp.comparator(Jp.fromName(o.referenceValue),n.key):Sy(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Yy(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Iy(e.position[n],t.position[n]))return!1;return!0}var $y=R((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";A(this,e),this.field=t,this.dir=n}));function Jy(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Xy=R((function e(){A(this,e)})),Zy=function(e){M(n,e);var t=j(n);function n(e,r,i){var a;return A(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return R(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Sy(t,this.value)):null!==t&&Ey(this.value)===Ey(t)&&this.matchesComparison(Sy(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ip()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new cm(e,t,r):"array-contains"===t?new dm(e,r):"in"===t?new pm(e,r):"not-in"===t?new vm(e,r):"array-contains-any"===t?new ym(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new lm(e,n):new fm(e,n)}}]),n}(Xy),em=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this)).filters=e,i.op=r,i.ce=null,i}return R(n,[{key:"matches",value:function(e){return tm(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Xy);function tm(e){return"and"===e.op}function nm(e){return"or"===e.op}function rm(e){return im(e)&&tm(e)}function im(e){var t,n=O(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof em)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function am(e){if(e instanceof Zy)return e.field.canonicalString()+e.op.toString()+Ay(e.value);if(rm(e))return e.filters.map((function(e){return am(e)})).join(",");var t=e.filters.map((function(e){return am(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function om(e,t){return e instanceof Zy?function(e,t){return t instanceof Zy&&e.op===t.op&&e.field.isEqual(t.field)&&Iy(e.value,t.value)}(e,t):e instanceof em?function(e,t){return t instanceof em&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&om(n,t.filters[r])}),!0)}(e,t):void Ip()}function um(e,t){var n=e.filters.concat(t);return em.create(n,e.op)}function sm(e){return e instanceof Zy?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ay(e.value))}(e):e instanceof em?function(e){return e.op.toString()+" {"+e.getFilters().map(sm).join(" ,")+"}"}(e):"Filter"}var cm=function(e){M(n,e);var t=j(n);function n(e,r,i){var a;return A(this,n),(a=t.call(this,e,r,i)).key=Jp.fromName(i.referenceValue),a}return R(n,[{key:"matches",value:function(e){var t=Jp.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Zy),lm=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e,"in",r)).keys=hm("in",r),i}return R(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Zy),fm=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e,"not-in",r)).keys=hm("not-in",r),i}return R(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Zy);function hm(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Jp.fromName(e.referenceValue)}))}var dm=function(e){M(n,e);var t=j(n);function n(e,r){return A(this,n),t.call(this,e,"array-contains",r)}return R(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Dy(t)&&Cy(t.arrayValue,this.value)}}]),n}(Zy),pm=function(e){M(n,e);var t=j(n);function n(e,r){return A(this,n),t.call(this,e,"in",r)}return R(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Cy(this.value.arrayValue,t)}}]),n}(Zy),vm=function(e){M(n,e);var t=j(n);function n(e,r){return A(this,n),t.call(this,e,"not-in",r)}return R(n,[{key:"matches",value:function(e){if(Cy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Cy(this.value.arrayValue,t)}}]),n}(Zy),ym=function(e){M(n,e);var t=j(n);function n(e,r){return A(this,n),t.call(this,e,"array-contains-any",r)}return R(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Dy(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Cy(t.value.arrayValue,e)}))}}]),n}(Zy),mm=R((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;A(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.le=null}));function gm(e){return new mm(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function km(e){var t=Sp(e);if(null===t.le){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return am(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Tv(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Ay(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Ay(e)})).join(",")),t.le=n}return t.le}function _m(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Jy(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!om(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Yy(e.startAt,t.startAt)&&Yy(e.endAt,t.endAt)}function wm(e){return Jp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function bm(e,t){return e.filters.filter((function(e){return e instanceof Zy&&e.field.isEqual(t)}))}function xm(e,t,n){var r,i=Ty,a=!0,o=O(bm(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Ty,c=!0;switch(u.op){case"<":case"<=":s=Vy(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Ty}zy({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];zy({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Tm(e,t,n){var r,i=xy,a=!0,o=O(bm(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=xy,c=!0;switch(u.op){case">=":case">":s=qy(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=xy}By({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];By({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Em=R((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;A(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.he=null,this.Pe=null,this.Ie=null,this.startAt,this.endAt}));function Im(e,t,n,r,i,a,o,u){return new Em(e,t,n,r,i,a,o,u)}function Cm(e){return new Em(e)}function Sm(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Pm(e){return null!==e.collectionGroup}function Am(e){var t=Sp(e);if(null===t.he){t.he=[];var n,r=new Set,i=O(t.explicitOrderBy);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.he.push(a),r.add(a.field.canonicalString())}}catch(s){i.e(s)}finally{i.f()}var o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",u=function(e){var t=new sy($p.comparator);return e.filters.forEach((function(e){e.getFlattenedFilters().forEach((function(e){e.isInequality()&&(t=t.add(e.field))}))})),t}(t);u.forEach((function(e){r.has(e.canonicalString())||e.isKeyField()||t.he.push(new $y(e,o))})),r.has($p.keyField().canonicalString())||t.he.push(new $y($p.keyField(),o))}return t.he}function Nm(e){var t=Sp(e);return t.Pe||(t.Pe=Rm(t,Am(e))),t.Pe}function Rm(e,t){if("F"===e.limitType)return gm(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);t=t.map((function(e){var t="desc"===e.dir?"asc":"desc";return new $y(e.field,t)}));var n=e.endAt?new Gy(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Gy(e.startAt.position,e.startAt.inclusive):null;return gm(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}function Om(e,t){var n=e.filters.concat([t]);return new Em(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Dm(e,t,n){return new Em(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Lm(e,t){return _m(Nm(e),Nm(t))&&e.limitType===t.limitType}function Mm(e){return"".concat(km(Nm(e)),"|lt:").concat(e.limitType)}function Fm(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return sm(e)})).join(", "),"]")),Tv(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Ay(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Ay(e)})).join(",")),"Target(".concat(t,")")}(Nm(e)),"; limitType=").concat(e.limitType,")")}function Um(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Jp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=O(Am(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=O(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Qy(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Am(e),t))&&!(e.endAt&&!function(e,t,n){var r=Qy(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Am(e),t))}(e,t)}function jm(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Vm(e){return function(t,n){var r,i=!1,a=O(Am(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=qm(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function qm(e,t,n){var r=e.field.isKeyField()?Jp.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Sy(r,i):Ip()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ip()}}var zm=function(){function e(t,n){A(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return R(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=O(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){ry(this.inner,(function(t,n){var r,i=O(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return iy(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Bm=new ay(Jp.comparator);function Wm(){return Bm}var Km=new ay(Jp.comparator);function Hm(){for(var e=Km,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Gm(e){var t=Km;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Qm(){return $m()}function Ym(){return $m()}function $m(){return new zm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Jm=new ay(Jp.comparator),Xm=new sy(Jp.comparator);function Zm(){for(var e=Xm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var eg=new sy(zp);function tg(){return eg}function ng(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ev(t)?"-0":t}}function rg(e){return{integerValue:""+e}}function ig(e,t){return Iv(t)?rg(t):ng(e,t)}var ag=R((function e(){A(this,e),this._=void 0}));function og(e,t,n){return e instanceof cg?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&gy(t)&&(t=ky(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof lg?fg(e,t):e instanceof hg?dg(e,t):function(e,t){var n=sg(e,t),r=vg(n)+vg(e.Te);return Oy(n)&&Oy(e.Te)?rg(r):ng(e.serializer,r)}(e,t)}function ug(e,t,n){return e instanceof lg?fg(e,t):e instanceof hg?dg(e,t):n}function sg(e,t){return e instanceof pg?function(e){return Oy(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var cg=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n)}(ag),lg=function(e){M(n,e);var t=j(n);function n(e){var r;return A(this,n),(r=t.call(this)).elements=e,r}return R(n)}(ag);function fg(e,t){var n,r=yg(t),i=O(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Iy(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var hg=function(e){M(n,e);var t=j(n);function n(e){var r;return A(this,n),(r=t.call(this)).elements=e,r}return R(n)}(ag);function dg(e,t){var n,r=yg(t),i=O(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Iy(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var pg=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this)).serializer=e,i.Te=r,i}return R(n)}(ag);function vg(e){return yy(e.integerValue||e.doubleValue)}function yg(e){return Dy(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var mg=R((function e(t,n){A(this,e),this.field=t,this.transform=n}));var gg=R((function e(t,n){A(this,e),this.version=t,this.transformResults=n})),kg=function(){function e(t,n){A(this,e),this.updateTime=t,this.exists=n}return R(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function _g(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var wg=R((function e(){A(this,e)}));function bg(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Dg(e.key,kg.none()):new Cg(e.key,e.data,kg.none());var n,r=e.data,i=Wy.empty(),a=new sy($p.comparator),o=O(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Sg(e.key,i,new fy(a.toArray()),kg.none())}function xg(e,t,n){e instanceof Cg?function(e,t,n){var r=e.value.clone(),i=Ag(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Sg?function(e,t,n){if(_g(e.precondition,t)){var r=Ag(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Pg(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Tg(e,t,n,r){return e instanceof Cg?function(e,t,n,r){if(!_g(e.precondition,t))return n;var i=e.value.clone(),a=Ng(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Sg?function(e,t,n,r){if(!_g(e.precondition,t))return n;var i=Ng(e.fieldTransforms,r,t),a=t.data;return a.setAll(Pg(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return _g(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Eg(e,t){var n,r=null,i=O(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=sg(a.transform,o||null);null!=u&&(null===r&&(r=Wy.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Ig(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Bp(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof lg&&t instanceof lg||e instanceof hg&&t instanceof hg?Bp(e.elements,t.elements,Iy):e instanceof pg&&t instanceof pg?Iy(e.Te,t.Te):e instanceof cg&&t instanceof cg}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Cg=function(e){M(n,e);var t=j(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return A(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return R(n,[{key:"getFieldMask",value:function(){return null}}]),n}(wg),Sg=function(e){M(n,e);var t=j(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return A(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return R(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(wg);function Pg(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Ag(e,t,n){var r=new Map;Cp(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,ug(o,u,n[i]))}return r}function Ng(e,t,n){var r,i=new Map,a=O(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,og(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Rg,Og,Dg=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return R(n,[{key:"getFieldMask",value:function(){return null}}]),n}(wg),Lg=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return R(n,[{key:"getFieldMask",value:function(){return null}}]),n}(wg),Mg=function(){function e(t,n,r,i){A(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return R(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&xg(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=O(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Tg(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=O(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Tg(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Ym();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=bg(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Hp.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Zm())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Bp(this.mutations,e.mutations,(function(e,t){return Ig(e,t)}))&&Bp(this.baseMutations,e.baseMutations,(function(e,t){return Ig(e,t)}))}}]),e}(),Fg=function(){function e(t,n,r,i){A(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return R(e,null,[{key:"from",value:function(t,n,r){Cp(t.mutations.length===r.length);for(var i=Jm,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Ug=function(){function e(t,n){A(this,e),this.largestBatchId=t,this.mutation=n}return R(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),jg=R((function e(t,n){A(this,e),this.count=t,this.unchangedNames=n}));function Vg(e){switch(e){default:return Ip();case Pp.CANCELLED:case Pp.UNKNOWN:case Pp.DEADLINE_EXCEEDED:case Pp.RESOURCE_EXHAUSTED:case Pp.INTERNAL:case Pp.UNAVAILABLE:case Pp.UNAUTHENTICATED:return!1;case Pp.INVALID_ARGUMENT:case Pp.NOT_FOUND:case Pp.ALREADY_EXISTS:case Pp.PERMISSION_DENIED:case Pp.FAILED_PRECONDITION:case Pp.ABORTED:case Pp.OUT_OF_RANGE:case Pp.UNIMPLEMENTED:case Pp.DATA_LOSS:return!0}}function qg(e){if(void 0===e)return xp("GRPC error has no .code"),Pp.UNKNOWN;switch(e){case Rg.OK:return Pp.OK;case Rg.CANCELLED:return Pp.CANCELLED;case Rg.UNKNOWN:return Pp.UNKNOWN;case Rg.DEADLINE_EXCEEDED:return Pp.DEADLINE_EXCEEDED;case Rg.RESOURCE_EXHAUSTED:return Pp.RESOURCE_EXHAUSTED;case Rg.INTERNAL:return Pp.INTERNAL;case Rg.UNAVAILABLE:return Pp.UNAVAILABLE;case Rg.UNAUTHENTICATED:return Pp.UNAUTHENTICATED;case Rg.INVALID_ARGUMENT:return Pp.INVALID_ARGUMENT;case Rg.NOT_FOUND:return Pp.NOT_FOUND;case Rg.ALREADY_EXISTS:return Pp.ALREADY_EXISTS;case Rg.PERMISSION_DENIED:return Pp.PERMISSION_DENIED;case Rg.FAILED_PRECONDITION:return Pp.FAILED_PRECONDITION;case Rg.ABORTED:return Pp.ABORTED;case Rg.OUT_OF_RANGE:return Pp.OUT_OF_RANGE;case Rg.UNIMPLEMENTED:return Pp.UNIMPLEMENTED;case Rg.DATA_LOSS:return Pp.DATA_LOSS;default:return Ip()}}(Og=Rg||(Rg={}))[Og.OK=0]="OK",Og[Og.CANCELLED=1]="CANCELLED",Og[Og.UNKNOWN=2]="UNKNOWN",Og[Og.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Og[Og.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Og[Og.NOT_FOUND=5]="NOT_FOUND",Og[Og.ALREADY_EXISTS=6]="ALREADY_EXISTS",Og[Og.PERMISSION_DENIED=7]="PERMISSION_DENIED",Og[Og.UNAUTHENTICATED=16]="UNAUTHENTICATED",Og[Og.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Og[Og.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Og[Og.ABORTED=10]="ABORTED",Og[Og.OUT_OF_RANGE=11]="OUT_OF_RANGE",Og[Og.UNIMPLEMENTED=12]="UNIMPLEMENTED",Og[Og.INTERNAL=13]="INTERNAL",Og[Og.UNAVAILABLE=14]="UNAVAILABLE",Og[Og.DATA_LOSS=15]="DATA_LOSS";var zg=null;function Bg(){return new TextEncoder}var Wg=new yp([4294967295,4294967295],0);function Kg(e){var t=Bg().encode(e),n=new vp;return n.update(t),new Uint8Array(n.digest())}function Hg(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new yp([n,r],0),new yp([i,a],0)]}var Gg=function(){function e(t,n,r){if(A(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Qg("Invalid padding: ".concat(n));if(r<0)throw new Qg("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new Qg("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new Qg("Invalid padding when bitmap length is 0: ".concat(n));this.Ee=8*t.length-n,this.de=yp.fromNumber(this.Ee)}return R(e,[{key:"Ae",value:function(e,t,n){var r=e.add(t.multiply(yp.fromNumber(n)));return 1===r.compare(Wg)&&(r=new yp([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}},{key:"Re",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.Ee)return!1;for(var t=s(Hg(Kg(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ae(n,r,i);if(!this.Re(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.Ee)for(var t=s(Hg(Kg(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ae(n,r,i);this.Ve(a)}}},{key:"Ve",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),Qg=function(e){M(n,e);var t=j(n);function n(){var e;return A(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return R(n)}(q(Error)),Yg=function(){function e(t,n,r,i,a){A(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return R(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,$g.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Hp.min(),i,new ay(zp),Wm(),Zm())}}]),e}(),$g=function(){function e(t,n,r,i,a){A(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return R(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Zm(),Zm(),Zm())}}]),e}(),Jg=R((function e(t,n,r,i){A(this,e),this.me=t,this.removedTargetIds=n,this.key=r,this.fe=i})),Xg=R((function e(t,n){A(this,e),this.targetId=t,this.ge=n})),Zg=R((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dy.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;A(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),ek=function(){function e(){A(this,e),this.pe=0,this.ye=rk(),this.we=dy.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}return R(e,[{key:"current",get:function(){return this.Se}},{key:"resumeToken",get:function(){return this.we}},{key:"De",get:function(){return 0!==this.pe}},{key:"Ce",get:function(){return this.be}},{key:"ve",value:function(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}},{key:"Fe",value:function(){var e=Zm(),t=Zm(),n=Zm();return this.ye.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ip()}})),new $g(this.we,this.Se,e,t,n)}},{key:"Me",value:function(){this.be=!1,this.ye=rk()}},{key:"xe",value:function(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}},{key:"Oe",value:function(e){this.be=!0,this.ye=this.ye.remove(e)}},{key:"Ne",value:function(){this.pe+=1}},{key:"Be",value:function(){this.pe-=1}},{key:"Le",value:function(){this.be=!0,this.Se=!0}}]),e}(),tk=function(){function e(t){A(this,e),this.ke=t,this.qe=new Map,this.Qe=Wm(),this.Ke=nk(),this.$e=new ay(zp)}return R(e,[{key:"Ue",value:function(e){var t,n=O(e.me);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.fe&&e.fe.isFoundDocument()?this.We(r,e.fe):this.Ge(r,e.key,e.fe)}}catch(u){n.e(u)}finally{n.f()}var i,a=O(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Ge(o,e.key,e.fe)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ze",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.je(n);switch(e.state){case 0:t.He(n)&&r.ve(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.ve(e.resumeToken);break;case 2:r.Be(),r.De||t.removeTarget(n);break;case 3:t.He(n)&&(r.Le(),r.ve(e.resumeToken));break;case 4:t.He(n)&&(t.Je(n),r.ve(e.resumeToken));break;default:Ip()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((function(e,r){n.He(r)&&t(r)}))}},{key:"Ye",value:function(e){var t=e.targetId,n=e.ge.count,r=this.Ze(t);if(r){var i=r.target;if(wm(i))if(0===n){var a=new Jp(i.path);this.Ge(t,a,Hy.newNoDocument(a,Hp.min()))}else Cp(1===n);else{var o=this.Xe(t);if(o!==n){var u=this.et(e),s=u?this.tt(u,e,o):1;if(0!==s){this.Je(t);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.$e=this.$e.insert(t,c)}null==zg||zg.nt(function(e,t,n,r,i){var a,o,u,s,c,l,f={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(f.bloomFilter={applied:0===i,hashCount:null!==(a=null==h?void 0:h.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(s=null===(u=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===u?void 0:u.length)&&void 0!==s?s:0,padding:null!==(l=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:function(e){var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),f}(o,e.ge,this.ke.rt(),u,s))}}}}},{key:"et",value:function(e){var t=e.ge.unchangedNames;if(!t||!t.bits)return null;var n,r,i=t.bits,a=i.bitmap,o=void 0===a?"":a,u=i.padding,s=void 0===u?0:u,c=t.hashCount,l=void 0===c?0:c;try{n=my(o).toUint8Array()}catch(e){if(e instanceof hy)return Tp("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new Gg(n,s,l)}catch(e){return Tp(e instanceof Qg?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.Ee?null:r}},{key:"tt",value:function(e,t,n){return t.ge.count===n-this.it(e,t.targetId)?0:2}},{key:"it",value:function(e,t){var n=this,r=this.ke.getRemoteKeysForTarget(t),i=0;return r.forEach((function(r){var a=n.ke.rt(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());e.mightContain(o)||(n.Ge(t,r,null),i++)})),i}},{key:"st",value:function(e){var t=this,n=new Map;this.qe.forEach((function(r,i){var a=t.Ze(i);if(a){if(r.current&&wm(a.target)){var o=new Jp(a.target.path);null!==t.Qe.get(o)||t.ot(i,o)||t.Ge(i,o,Hy.newNoDocument(o,e))}r.Ce&&(n.set(i,r.Fe()),r.Me())}}));var r=Zm();this.Ke.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ze(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Qe.forEach((function(t,n){return n.setReadTime(e)}));var i=new Yg(e,n,this.$e,this.Qe,r);return this.Qe=Wm(),this.Ke=nk(),this.$e=new ay(zp),i}},{key:"We",value:function(e,t){if(this.He(e)){var n=this.ot(e,t.key)?2:0;this.je(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.Ke=this.Ke.insert(t.key,this._t(t.key).add(e))}}},{key:"Ge",value:function(e,t,n){if(this.He(e)){var r=this.je(e);this.ot(e,t)?r.xe(t,1):r.Oe(t),this.Ke=this.Ke.insert(t,this._t(t).delete(e)),n&&(this.Qe=this.Qe.insert(t,n))}}},{key:"removeTarget",value:function(e){this.qe.delete(e)}},{key:"Xe",value:function(e){var t=this.je(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ne",value:function(e){this.je(e).Ne()}},{key:"je",value:function(e){var t=this.qe.get(e);return t||(t=new ek,this.qe.set(e,t)),t}},{key:"_t",value:function(e){var t=this.Ke.get(e);return t||(t=new sy(zp),this.Ke=this.Ke.insert(e,t)),t}},{key:"He",value:function(e){var t=null!==this.Ze(e);return t||bp("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ze",value:function(e){var t=this.qe.get(e);return t&&t.De?null:this.ke.ut(e)}},{key:"Je",value:function(e){var t=this;this.qe.set(e,new ek),this.ke.getRemoteKeysForTarget(e).forEach((function(n){t.Ge(e,n,null)}))}},{key:"ot",value:function(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}]),e}();function nk(){return new ay(Jp.comparator)}function rk(){return new ay(Jp.comparator)}var ik={asc:"ASCENDING",desc:"DESCENDING"},ak={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ok={and:"AND",or:"OR"},uk=R((function e(t,n){A(this,e),this.databaseId=t,this.useProto3Json=n}));function sk(e,t){return e.useProto3Json||Tv(t)?t:{value:t}}function ck(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function lk(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function fk(e,t){return ck(e,t.toTimestamp())}function hk(e){return Cp(!!e),Hp.fromTimestamp(function(e){var t=vy(e);return new Kp(t.seconds,t.nanos)}(e))}function dk(e,t){return function(e){return new Qp(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function pk(e){var t=Qp.fromString(e);return Cp(Fk(t)),t}function vk(e,t){return dk(e.databaseId,t.path)}function yk(e,t){var n=pk(t);if(n.get(1)!==e.databaseId.projectId)throw new Ap(Pp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ap(Pp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Jp(_k(n))}function mk(e,t){return dk(e.databaseId,t)}function gk(e){var t=pk(e);return 4===t.length?Qp.emptyPath():_k(t)}function kk(e){return new Qp(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function _k(e){return Cp(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function wk(e,t,n){return{name:vk(e,t),fields:n.value.mapValue.fields}}function bk(e,t,n){var r=yk(e,t.name),i=hk(t.updateTime),a=t.createTime?hk(t.createTime):Hp.min(),o=new Wy({mapValue:{fields:t.fields}}),u=Hy.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function xk(e,t){return"found"in t?function(e,t){Cp(!!t.found),t.found.name,t.found.updateTime;var n=yk(e,t.found.name),r=hk(t.found.updateTime),i=t.found.createTime?hk(t.found.createTime):Hp.min(),a=new Wy({mapValue:{fields:t.found.fields}});return Hy.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Cp(!!t.missing),Cp(!!t.readTime);var n=yk(e,t.missing),r=hk(t.readTime);return Hy.newNoDocument(n,r)}(e,t):Ip()}function Tk(e,t){var n;if(t instanceof Cg)n={update:wk(e,t.key,t.value)};else if(t instanceof Dg)n={delete:vk(e,t.key)};else if(t instanceof Sg)n={update:wk(e,t.key,t.data),updateMask:Mk(t.fieldMask)};else{if(!(t instanceof Lg))return Ip();n={verify:vk(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof cg)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof lg)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof hg)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof pg)return{fieldPath:t.field.canonicalString(),increment:n.Te};throw Ip()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:fk(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ip()}(e,t.precondition)),n}function Ek(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?kg.updateTime(hk(e.updateTime)):void 0!==e.exists?kg.exists(e.exists):kg.none()}(t.currentDocument):kg.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Cp("REQUEST_TIME"===t.setToServerValue),n=new cg;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new lg(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new hg(i)}else"increment"in t?n=new pg(e,t.increment):Ip();var a=$p.fromServerFormat(t.fieldPath);return new mg(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=yk(e,t.update.name),a=new Wy({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new fy(t.map((function(e){return $p.fromServerFormat(e)})))}(t.updateMask);return new Sg(i,a,o,n,r)}return new Cg(i,a,n,r)}if(t.delete){var u=yk(e,t.delete);return new Dg(u,n)}if(t.verify){var s=yk(e,t.verify);return new Lg(s,n)}return Ip()}function Ik(e,t){return{documents:[mk(e,t.path)]}}function Ck(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=mk(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=mk(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Lk(em.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Ok(e.field),direction:Ak(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=sk(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Sk(e){var t=gk(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Cp(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Pk(e);return t instanceof em&&rm(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=function(e){return e.map((function(e){return function(e){return new $y(Dk(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var s=null;n.limit&&(s=function(e){var t;return Tv(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Gy(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Gy(n,t)}(n.endAt)),Im(t,i,u,o,s,"F",c,l)}function Pk(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Dk(e.unaryFilter.field);return Zy.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Dk(e.unaryFilter.field);return Zy.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Dk(e.unaryFilter.field);return Zy.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Dk(e.unaryFilter.field);return Zy.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ip()}}(e):void 0!==e.fieldFilter?function(e){return Zy.create(Dk(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ip()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return em.create(e.compositeFilter.filters.map((function(e){return Pk(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ip()}}(e.compositeFilter.op))}(e):Ip()}function Ak(e){return ik[e]}function Nk(e){return ak[e]}function Rk(e){return ok[e]}function Ok(e){return{fieldPath:e.canonicalString()}}function Dk(e){return $p.fromServerFormat(e.fieldPath)}function Lk(e){return e instanceof Zy?function(e){if("=="===e.op){if(My(e.value))return{unaryFilter:{field:Ok(e.field),op:"IS_NAN"}};if(Ly(e.value))return{unaryFilter:{field:Ok(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(My(e.value))return{unaryFilter:{field:Ok(e.field),op:"IS_NOT_NAN"}};if(Ly(e.value))return{unaryFilter:{field:Ok(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ok(e.field),op:Nk(e.op),value:e.value}}}(e):e instanceof em?function(e){var t=e.getFilters().map((function(e){return Lk(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Rk(e.op),filters:t}}}(e):Ip()}function Mk(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Fk(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Uk=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Hp.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Hp.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:dy.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;A(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return R(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),jk=R((function e(t){A(this,e),this.ct=t}));function Vk(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:qk(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:vk(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ck(e,t.version.toTimestamp()),createTime:ck(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:zk(t.version)};else{if(!t.isUnknownDocument())return Ip();r.unknownDocument={path:n.path.toArray(),version:zk(t.version)}}return r}function qk(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function zk(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Bk(e){var t=new Kp(e.seconds,e.nanoseconds);return Hp.fromTimestamp(t)}function Wk(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Ek(e.ct,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Ek(e.ct,t)})),u=Kp.fromMillis(t.localWriteTimeMs);return new Mg(t.batchId,u,n,o)}function Kk(e){var t,n=Bk(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?Bk(e.lastLimboFreeSnapshotVersion):Hp.min();return t=function(e){return void 0!==e.documents}(e.query)?function(e){return Cp(1===e.documents.length),Nm(Cm(gk(e.documents[0])))}(e.query):function(e){return Nm(Sk(e))}(e.query),new Uk(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,dy.fromBase64String(e.resumeToken))}function Hk(e,t){var n,r=zk(t.snapshotVersion),i=zk(t.lastLimboFreeSnapshotVersion);n=wm(t.target)?Ik(e.ct,t.target):Ck(e.ct,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:km(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Gk(e){var t=Sk({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Dm(t,t.limit,"L"):t}function Qk(e,t){return new Ug(t.largestBatchId,Ek(e.ct,t.overlayMutation))}function Yk(e,t){var n=t.path.lastSegment();return[e,Cv(t.path.popLast()),n]}function $k(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:zk(r.readTime),documentKey:Cv(r.documentKey.path),largestBatchId:r.largestBatchId}}var Jk=function(){function e(){A(this,e)}return R(e,[{key:"getBundleMetadata",value:function(e,t){return Xk(e).get(t).next((function(e){if(e)return function(e){return{id:e.bundleId,createTime:Bk(e.createTime),version:e.version}}(e)}))}},{key:"saveBundleMetadata",value:function(e,t){return Xk(e).put(function(e){return{bundleId:e.id,createTime:zk(hk(e.createTime)),version:e.version}}(t))}},{key:"getNamedQuery",value:function(e,t){return Zk(e).get(t).next((function(e){if(e)return function(e){return{name:e.name,query:Gk(e.bundledQuery),readTime:Bk(e.readTime)}}(e)}))}},{key:"saveNamedQuery",value:function(e,t){return Zk(e).put(function(e){return{name:e.name,readTime:zk(hk(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Xk(e){return ty(e,"bundles")}function Zk(e){return ty(e,"namedQueries")}var e_=function(){function e(t,n){A(this,e),this.serializer=t,this.userId=n}return R(e,[{key:"getOverlay",value:function(e,t){var n=this;return t_(e).get(Yk(this.userId,t)).next((function(e){return e?Qk(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Qm();return fv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Ug(t,a);i.push(r.ht(e,o))})),fv.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Cv(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(t_(e).J("collectionPathOverlayIndex",i))})),fv.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Qm(),a=Cv(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return t_(e).G("collectionPathOverlayIndex",o).next((function(e){var t,n=O(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Qk(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Qm(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return t_(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Qk(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ht",value:function(e,t){return t_(e).put(function(e,t,n){var r=s(Yk(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Tk(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"lt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function t_(e){return ty(e,"documentOverlays")}var n_=function(){function e(){A(this,e)}return R(e,[{key:"Pt",value:function(e,t){this.It(e,t),t.Tt()}},{key:"It",value:function(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(yy(e.integerValue));else if("doubleValue"in e){var n=yy(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Ev(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){var r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At("".concat(r.seconds||"")),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(my(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.Et(t,45),t.dt(i.latitude||0),t.dt(i.longitude||0)}else"mapValue"in e?jy(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Ip()}},{key:"Rt",value:function(e,t){this.Et(t,25),this.St(e,t)}},{key:"St",value:function(e,t){t.At(e)}},{key:"yt",value:function(e,t){var n=e.fields||{};this.Et(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Rt(a,t),this.It(n[a],t)}}},{key:"wt",value:function(e,t){var n=e.values||[];this.Et(t,50);var r,i=O(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.It(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"gt",value:function(e,t){var n=this;this.Et(t,37),Jp.fromName(e).path.forEach((function(e){n.Et(t,60),n.St(e,t)}))}},{key:"Et",value:function(e,t){e.dt(t)}},{key:"Vt",value:function(e){e.dt(2)}}]),e}();function r_(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function i_(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=r_(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}n_.bt=new n_;var a_=function(){function e(){A(this,e),this.buffer=new Uint8Array(1024),this.position=0}return R(e,[{key:"Dt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ct(n.value),n=t.next();this.vt()}},{key:"Ft",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Mt(n.value),n=t.next();this.xt()}},{key:"Ot",value:function(e){var t,n=O(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{var a=r.codePointAt(0);this.Ct(240|a>>>18),this.Ct(128|63&a>>>12),this.Ct(128|63&a>>>6),this.Ct(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.vt()}},{key:"Nt",value:function(e){var t,n=O(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{var a=r.codePointAt(0);this.Mt(240|a>>>18),this.Mt(128|63&a>>>12),this.Mt(128|63&a>>>6),this.Mt(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.xt()}},{key:"Bt",value:function(e){var t=this.Lt(e),n=i_(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"qt",value:function(e){var t=this.Lt(e),n=i_(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Qt",value:function(){this.Kt(255),this.Kt(255)}},{key:"$t",value:function(){this.Ut(255),this.Ut(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Wt",value:function(){return this.buffer.slice(0,this.position)}},{key:"Lt",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ct",value:function(e){var t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}},{key:"Mt",value:function(e){var t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}},{key:"vt",value:function(){this.Kt(0),this.Kt(1)}},{key:"xt",value:function(){this.Ut(0),this.Ut(1)}},{key:"Kt",value:function(e){this.kt(1),this.buffer[this.position++]=e}},{key:"Ut",value:function(e){this.kt(1),this.buffer[this.position++]=~e}},{key:"kt",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),o_=function(){function e(t){A(this,e),this.Gt=t}return R(e,[{key:"ft",value:function(e){this.Gt.Dt(e)}},{key:"At",value:function(e){this.Gt.Ot(e)}},{key:"dt",value:function(e){this.Gt.Bt(e)}},{key:"Tt",value:function(){this.Gt.Qt()}}]),e}(),u_=function(){function e(t){A(this,e),this.Gt=t}return R(e,[{key:"ft",value:function(e){this.Gt.Ft(e)}},{key:"At",value:function(e){this.Gt.Nt(e)}},{key:"dt",value:function(e){this.Gt.qt(e)}},{key:"Tt",value:function(){this.Gt.$t()}}]),e}(),s_=function(){function e(){A(this,e),this.Gt=new a_,this.zt=new o_(this.Gt),this.jt=new u_(this.Gt)}return R(e,[{key:"seed",value:function(e){this.Gt.seed(e)}},{key:"Ht",value:function(e){return 0===e?this.zt:this.jt}},{key:"Wt",value:function(){return this.Gt.Wt()}},{key:"reset",value:function(){this.Gt.reset()}}]),e}(),c_=function(){function e(t,n,r,i){A(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return R(e,[{key:"Jt",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function l_(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=f_(e.arrayValue,t.arrayValue))?n:0!==(n=f_(e.directionalValue,t.directionalValue))?n:Jp.comparator(e.documentKey,t.documentKey)}function f_(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var h_=function(){function e(t){A(this,e),this.Yt=new sy((function(e,t){return $p.comparator(e.field,t.field)})),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Zt=t.orderBy,this.Xt=[];var n,r=O(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}catch(a){r.e(a)}finally{r.f()}}return R(e,[{key:"en",get:function(){return this.Yt.size>1}},{key:"tn",value:function(e){if(Cp(e.collectionGroup===this.collectionId),this.en)return!1;var t=Zp(e);if(void 0!==t&&!this.nn(t))return!1;for(var n=ev(e),r=new Set,i=0,a=0;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){var o=this.Yt.getIterator().getNext();if(!r.has(o.field.canonicalString())){var u=n[i];if(!this.rn(o,u)||!this.sn(this.Zt[a++],u))return!1}++i}for(;i<n.length;++i){var s=n[i];if(a>=this.Zt.length||!this.sn(this.Zt[a++],s))return!1}return!0}},{key:"on",value:function(){if(this.en)return null;var e,t=new sy($p.comparator),n=[],r=O(this.Xt);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)n.push(new tv(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),n.push(new tv(i.field,0))}}}catch(s){r.e(s)}finally{r.f()}var a,o=O(this.Zt);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||t.has(u.field)||(t=t.add(u.field),n.push(new tv(u.field,"asc"===u.dir?0:1)))}}catch(s){o.e(s)}finally{o.f()}return new Xp(Xp.UNKNOWN_ID,this.collectionId,n,nv.empty())}},{key:"nn",value:function(e){var t,n=O(this.Xt);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.rn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"rn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function d_(e){var t,n;if(Cp(e instanceof Zy||e instanceof em),e instanceof Zy){if(e instanceof pm){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Zy.create(e.field,"==",t)})))||[];return em.create(r,"or")}return e}var i=e.filters.map((function(e){return d_(e)}));return em.create(i,e.op)}function p_(e){if(0===e.getFilters().length)return[];var t=g_(d_(e));return Cp(m_(t)),v_(t)||y_(t)?[t]:t.getFilters()}function v_(e){return e instanceof Zy}function y_(e){return e instanceof em&&rm(e)}function m_(e){return v_(e)||y_(e)||function(e){if(e instanceof em&&nm(e)){var t,n=O(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!v_(r)&&!y_(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function g_(e){if(Cp(e instanceof Zy||e instanceof em),e instanceof Zy)return e;if(1===e.filters.length)return g_(e.filters[0]);var t=e.filters.map((function(e){return g_(e)})),n=em.create(t,e.op);return m_(n=w_(n))?n:(Cp(n instanceof em),Cp(tm(n)),Cp(n.filters.length>1),n.filters.reduce((function(e,t){return k_(e,t)})))}function k_(e,t){var n;return Cp(e instanceof Zy||e instanceof em),Cp(t instanceof Zy||t instanceof em),n=e instanceof Zy?t instanceof Zy?function(e,t){return em.create([e,t],"and")}(e,t):__(e,t):t instanceof Zy?__(t,e):function(e,t){if(Cp(e.filters.length>0&&t.filters.length>0),tm(e)&&tm(t))return um(e,t.getFilters());var n=nm(e)?e:t,r=nm(e)?t:e,i=n.filters.map((function(e){return k_(e,r)}));return em.create(i,"or")}(e,t),w_(n)}function __(e,t){if(tm(t))return um(t,e.getFilters());var n=t.filters.map((function(t){return k_(e,t)}));return em.create(n,"or")}function w_(e){if(Cp(e instanceof Zy||e instanceof em),e instanceof Zy)return e;var t=e.getFilters();if(1===t.length)return w_(t[0]);if(im(e))return e;var n=t.map((function(e){return w_(e)})),r=[];return n.forEach((function(t){t instanceof Zy?r.push(t):t instanceof em&&(t.op===e.op?r.push.apply(r,je(t.filters)):r.push(t))})),1===r.length?r[0]:em.create(r,e.op)}var b_=function(){function e(){A(this,e),this._n=new x_}return R(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this._n.add(t),fv.resolve()}},{key:"getCollectionParents",value:function(e,t){return fv.resolve(this._n.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return fv.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return fv.resolve()}},{key:"deleteAllFieldIndexes",value:function(e){return fv.resolve()}},{key:"createTargetIndexes",value:function(e,t){return fv.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return fv.resolve(null)}},{key:"getIndexType",value:function(e,t){return fv.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return fv.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return fv.resolve(null)}},{key:"getMinOffset",value:function(e,t){return fv.resolve(av.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return fv.resolve(av.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return fv.resolve()}},{key:"updateIndexEntries",value:function(e,t){return fv.resolve()}}]),e}(),x_=function(){function e(){A(this,e),this.index={}}return R(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new sy(Qp.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new sy(Qp.comparator)).toArray()}}]),e}(),T_=new Uint8Array(0),E_=function(){function e(t,n){A(this,e),this.user=t,this.databaseId=n,this.an=new x_,this.un=new zm((function(e){return km(e)}),(function(e,t){return _m(e,t)})),this.uid=t.uid||""}return R(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.an.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.an.add(t)}));var a={collectionId:r,parent:Cv(i)};return I_(e).put(a)}return fv.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Wp(t),""],!1,!0);return I_(e).G(r).next((function(e){var r,i=O(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Av(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=S_(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=P_(e);return a.next((function(e){o.put($k(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=S_(e),r=P_(e),i=C_(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"deleteAllFieldIndexes",value:function(e){var t=S_(e),n=C_(e),r=P_(e);return t.J().next((function(){return n.J()})).next((function(){return r.J()}))}},{key:"createTargetIndexes",value:function(e,t){var n=this;return fv.forEach(this.cn(t),(function(t){return n.getIndexType(e,t).next((function(r){if(0===r||1===r){var i=new h_(t).on();if(null!=i)return n.addFieldIndex(e,i)}}))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=C_(e),i=!0,a=new Map;return fv.forEach(this.cn(t),(function(t){return n.ln(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Zm(),o=[];return fv.forEach(a,(function(i,a){bp("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(","))}(i)," to execute ").concat(km(t)));var u=function(e,t){var n=Zp(t);if(void 0===n)return null;var r,i=O(bm(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=O(ev(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=O(bm(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=[],i=!0,a=O(ev(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?xm(e,o.fieldPath,e.startAt):Tm(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Gy(r,i)}(a,i),l=function(e,t){var n,r=[],i=!0,a=O(ev(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Tm(e,o.fieldPath,e.endAt):xm(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Gy(r,i)}(a,i),f=n.hn(i,a,c),h=n.hn(i,a,l),d=n.Pn(i,a,s),p=n.In(i.indexId,u,f,c.inclusive,h,l.inclusive,d);return fv.forEach(p,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Jp.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return fv.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:p_(em.create(e.filters,"and")).map((function(t){return gm(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"In",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.Tn(t[h/c]):T_,f=u.En(e,s,n[h%c],r),d=u.dn(e,s,i[h%c],a),p=o.map((function(t){return u.En(e,s,t,!0)}));l.push.apply(l,je(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"En",value:function(e,t,n,r){var i=new c_(e,Jp.empty(),t,n);return r?i:i.Jt()}},{key:"dn",value:function(e,t,n,r){var i=new c_(e,Jp.empty(),t,n);return r?i.Jt():i}},{key:"ln",value:function(e,t){var n=new h_(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=O(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return fv.forEach(i,(function(t){return n.ln(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new sy($p.comparator),r=!1,i=O(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=O(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=O(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"An",value:function(e,t){var n,r=new s_,i=O(ev(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ht(a.kind);n_.bt.Pt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Wt()}},{key:"Tn",value:function(e){var t=new s_;return n_.bt.Pt(e,t.Ht(0)),t.Wt()}},{key:"Rn",value:function(e,t){var n=new s_;return n_.bt.Pt(Ry(this.databaseId,t),n.Ht(function(e){var t=ev(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}},{key:"Pn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new s_);var i,a=0,o=O(ev(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=O(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.Vn(t,s.fieldPath)&&Dy(c))r=this.mn(r,s,c);else{var h=f.Ht(s.kind);n_.bt.Pt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.fn(r)}},{key:"hn",value:function(e,t,n){return this.Pn(e,t,n.position)}},{key:"fn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Wt();return t}},{key:"mn",value:function(e,t,n){var r,i=je(e),a=[],o=O(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=O(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new s_;f.seed(l.Wt()),n_.bt.Pt(s,f.Ht(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"Vn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Zy&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=S_(e),i=P_(e);return(t?r.G("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.G()).next((function(e){var t=[];return fv.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new nv(t.sequenceNumber,new av(Bk(t.readTime),new Jp(Av(t.documentKey)),t.largestBatchId)):nv.empty(),r=e.fields.map((function(e){var t=s(e,2),n=t[0],r=t[1];return new tv($p.fromServerFormat(n),r)}));return new Xp(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:zp(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=S_(e),a=P_(e);return this.gn(e).next((function(e){return i.G("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return fv.forEach(t,(function(t){return a.put($k(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return fv.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?fv.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),fv.forEach(a,(function(r){return n.pn(e,t,r).next((function(t){var a=n.yn(i,r);return t.isEqual(a)?fv.resolve():n.wn(e,i,r,t,a)}))}))}))}))}},{key:"Sn",value:function(e,t,n,r){return C_(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"bn",value:function(e,t,n,r){return C_(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}},{key:"pn",value:function(e,t,n){var r=C_(e),i=new sy(l_);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},(function(e,r){i=i.add(new c_(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"yn",value:function(e,t){var n=new sy(l_),r=this.An(t,e);if(null==r)return n;var i=Zp(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Dy(a)){var o,u=O(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new c_(t.indexId,e.key,this.Tn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new c_(t.indexId,e.key,T_,r));return n}},{key:"wn",value:function(e,t,n,r,i){var a=this;bp("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=ly(a),s=ly(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=ly(o)):l?(i(u),u=ly(a)):(u=ly(a),s=ly(o))}}(r,i,l_,(function(r){o.push(a.Sn(e,t,n,r))}),(function(r){o.push(a.bn(e,t,n,r))})),fv.waitFor(o)}},{key:"gn",value:function(e){var t=1;return P_(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return l_(e,t)})).filter((function(e,t,n){return!t||0!==l_(e,n[t-1])}));var r=[];r.push(e);var i,a=O(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=l_(o,e),s=l_(o,t);if(0===u)r[0]=e.Jt();else if(u>0&&s<0)r.push(o),r.push(o.Jt());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Dn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,T_,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,T_,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Dn",value:function(e,t){return l_(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(A_)}},{key:"getMinOffset",value:function(e,t){var n=this;return fv.mapArray(this.cn(t),(function(t){return n.ln(e,t).next((function(e){return e||Ip()}))})).next(A_)}}]),e}();function I_(e){return ty(e,"collectionParents")}function C_(e){return ty(e,"indexEntries")}function S_(e){return ty(e,"indexConfiguration")}function P_(e){return ty(e,"indexState")}function A_(e){Cp(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;ov(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new av(t.readTime,t.documentKey,n)}var N_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},R_=function(){function e(t,n,r){A(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return R(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function O_(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Cp(1===u)})));var c,l=[],f=O(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Ov(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return fv.waitFor(a).next((function(){return l}))}function D_(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ip();t=e.noDocument}return JSON.stringify(t).length}R_.DEFAULT_COLLECTION_PERCENTILE=10,R_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,R_.DEFAULT=new R_(41943040,R_.DEFAULT_COLLECTION_PERCENTILE,R_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),R_.DISABLED=new R_(-1,0,0);var L_=function(){function e(t,n,r,i){A(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}return R(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return F_(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=U_(e),o=F_(e);return o.add({}).next((function(u){Cp("number"==typeof u);var s,c=new Mg(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Tk(e.ct,t)})),i=n.mutations.map((function(t){return Tk(e.ct,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new sy((function(e,t){return zp(e.canonicalString(),t.canonicalString())})),d=O(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Ov(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Dv))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Cn[u]=c.keys()})),fv.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return F_(e).get(t).next((function(e){return e?(Cp(e.userId===n.userId),Wk(n.serializer,e)):null}))}},{key:"vn",value:function(e,t){var n=this;return this.Cn[t]?fv.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Cn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return F_(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Cp(t.batchId>=r),a=Wk(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return F_(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return F_(e).G("userMutationsIndex",n).next((function(e){return e.map((function(e){return Wk(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Rv(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return U_(e).Z({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],f=u[2],h=Av(l);if(c===n.userId&&t.path.isEqual(h))return F_(e).get(f).next((function(e){if(!e)throw Ip();Cp(e.userId===n.userId),a.push(Wk(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new sy(zp),i=[];return t.forEach((function(t){var a=Rv(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=U_(e).Z({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],f=Av(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),fv.waitFor(i).next((function(){return n.Fn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Rv(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new sy(zp);return U_(e).Z({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],f=o[2],h=Av(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.Fn(e,u)}))}},{key:"Fn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(F_(e).get(t).next((function(e){if(null===e)throw Ip();Cp(e.userId===n.userId),r.push(Wk(n.serializer,e))})))})),fv.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return O_(e.ue,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Mn(t.batchId)})),fv.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Mn",value:function(e){delete this.Cn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return fv.resolve();var r=IDBKeyRange.lowerBound(function(e){return[e]}(t.userId)),i=[];return U_(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Av(e[1]);i.push(a)}else r.done()})).next((function(){Cp(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return M_(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return j_(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"lt",value:function(t,n,r,i){return Cp(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function M_(e,t,n){var r=Rv(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return U_(e).Z({range:a,Y:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function F_(e){return ty(e,"mutations")}function U_(e){return ty(e,"documentMutations")}function j_(e){return ty(e,"mutationQueues")}var V_=function(){function e(t){A(this,e),this.On=t}return R(e,[{key:"next",value:function(){return this.On+=2,this.On}}],[{key:"Nn",value:function(){return new e(0)}},{key:"Bn",value:function(){return new e(-1)}}]),e}(),q_=function(){function e(t,n){A(this,e),this.referenceDelegate=t,this.serializer=n}return R(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Ln(e).next((function(n){var r=new V_(n.highestTargetId);return n.highestTargetId=r.next(),t.kn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Ln(e).next((function(e){return Hp.fromTimestamp(new Kp(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Ln(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Ln(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.kn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.qn(e,t).next((function(){return n.Ln(e).next((function(r){return r.targetCount+=1,n.Qn(t,r),n.kn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.qn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return z_(e).delete(t.targetId)})).next((function(){return n.Ln(e)})).next((function(t){return Cp(t.targetCount>0),t.targetCount-=1,n.kn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return z_(e).Z((function(o,u){var s=Kk(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return fv.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return z_(e).Z((function(e,n){var r=Kk(n);t(r)}))}},{key:"Ln",value:function(e){return B_(e).get("targetGlobalKey").next((function(e){return Cp(null!==e),e}))}},{key:"kn",value:function(e,t){return B_(e).put("targetGlobalKey",t)}},{key:"qn",value:function(e,t){return z_(e).put(Hk(this.serializer,t))}},{key:"Qn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Ln(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=km(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return z_(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Kk(n);_m(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=W_(e);return t.forEach((function(t){var o=Cv(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),fv.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=W_(e);return fv.forEach(t,(function(t){var a=Cv(t.path);return fv.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=W_(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=W_(e),i=Zm();return r.Z({range:n,Y:!0},(function(e,t,n){var r=Av(e[1]),a=new Jp(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Cv(t.path),r=IDBKeyRange.bound([n],[Wp(n)],!1,!0),i=0;return W_(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ut",value:function(e,t){return z_(e).get(t).next((function(e){return e?Kk(e):null}))}}]),e}();function z_(e){return ty(e,"targets")}function B_(e){return ty(e,"targetGlobal")}function W_(e){return ty(e,"targetDocuments")}function K_(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=zp(r,o);return 0===c?zp(i,u):c}var H_=function(){function e(t){A(this,e),this.Kn=t,this.buffer=new sy(K_),this.$n=0}return R(e,[{key:"Un",value:function(){return++this.$n}},{key:"Wn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();K_(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),G_=function(){function e(t,n,r){A(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return R(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"zn",value:function(e){var t=this;bp("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!yv(e.t0)){e.next=12;break}bp("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,cv(e.t0);case 14:return e.next=16,t.zn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Q_=function(){function e(t,n){A(this,e),this.jn=t,this.params=n}return R(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.Hn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return fv.resolve(xv.ae);var r=new H_(t);return this.jn.forEachTarget(e,(function(e){return r.Wn(e.sequenceNumber)})).next((function(){return n.jn.Jn(e,(function(e){return r.Wn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(bp("LruGarbageCollector","Garbage collection skipped; disabled"),fv.resolve(N_)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(bp("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),N_):n.Yn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Yn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(bp("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),wp()<=We.DEBUG&&bp("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),fv.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function Y_(e,t){return new Q_(e,t)}var $_=function(){function e(t,n){A(this,e),this.db=t,this.garbageCollector=Y_(this,n)}return R(e,[{key:"Hn",value:function(e){var t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Zn",value:function(e){var t=0;return this.Jn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Jn",value:function(e,t){return this.Xn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return J_(e,n)}},{key:"removeReference",value:function(e,t,n){return J_(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return J_(e,t)}},{key:"er",value:function(e,t){return function(e,t){var n=!1;return j_(e).X((function(r){return M_(e,r,t).next((function(e){return e&&(n=!0),fv.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Xn(e,(function(o,u){if(u<=t){var s=n.er(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Hp.min()),W_(e).delete(function(e){return[0,Cv(e.path)]}(o))}))}));i.push(s)}})).next((function(){return fv.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return J_(e,t)}},{key:"Xn",value:function(e,t){var n,r=W_(e),i=xv.ae;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==xv.ae&&t(new Jp(Av(n)),i),i=c,n=u):i=xv.ae})).next((function(){i!==xv.ae&&t(new Jp(Av(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function J_(e,t){return W_(e).put(function(e,t){return{targetId:0,path:Cv(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var X_=function(){function e(){A(this,e),this.changes=new zm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return R(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Hy.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?fv.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Z_=function(){function e(t){A(this,e),this.serializer=t}return R(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return rw(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return rw(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],qk(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.tr(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Hy.newInvalidDocument(t);return rw(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(iw(t))},(function(e,i){r=n.nr(t,i)})).next((function(){return r}))}},{key:"rr",value:function(e,t){var n=this,r={size:0,document:Hy.newInvalidDocument(t)};return rw(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(iw(t))},(function(e,i){r={document:n.nr(t,i),size:D_(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Wm();return this.ir(e,t,(function(e,t){var i=n.nr(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"sr",value:function(e,t){var n=this,r=Wm(),i=new ay(Jp.comparator);return this.ir(e,t,(function(e,t){var a=n.nr(e,t);r=r.insert(e,a),i=i.insert(e,D_(t))})).next((function(){return{documents:r,_r:i}}))}},{key:"ir",value:function(e,t,n){if(t.isEmpty())return fv.resolve();var r=new sy(ow);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(iw(r.first()),iw(r.last())),a=r.getIterator(),o=a.getNext();return rw(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Jp.fromSegments([].concat(je(t.prefixPath),[t.collectionGroup,t.documentId]));o&&ow(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.W(iw(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r,i){var a=this,o=t.path,u=[o.popLast().toArray(),o.lastSegment(),qk(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return rw(e).G(IDBKeyRange.bound(u,s,!0)).next((function(e){null==i||i.incrementDocumentReadCount(e.length);var n,o=Wm(),u=O(e);try{for(u.s();!(n=u.n()).done;){var s=n.value,c=a.nr(Jp.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);c.isFoundDocument()&&(Um(t,c)||r.has(c.key))&&(o=o.insert(c.key,c))}}catch(l){u.e(l)}finally{u.f()}return o}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Wm(),o=aw(t,n),u=aw(t,av.max());return rw(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.nr(Jp.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new tw(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return nw(e).get("remoteDocumentGlobalKey").next((function(e){return Cp(!!e),e}))}},{key:"tr",value:function(e,t){return nw(e).put("remoteDocumentGlobalKey",t)}},{key:"nr",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=bk(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Jp.fromSegments(t.noDocument.path),i=Bk(t.noDocument.readTime);n=Hy.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ip();var a=Jp.fromSegments(t.unknownDocument.path),o=Bk(t.unknownDocument.version);n=Hy.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Kp(e[0],e[1]);return Hp.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Hp.min()))return n}return Hy.newInvalidDocument(e)}}]),e}();function ew(e){return new Z_(e)}var tw=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this)).ar=e,i.trackRemovals=r,i.ur=new zm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return R(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new sy((function(e,t){return zp(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.ur.get(a);if(n.push(t.ar.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Vk(t.ar.serializer,o);i=i.add(a.path.popLast());var c=D_(s);r+=c-u.size,n.push(t.ar.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Vk(t.ar.serializer,o.convertToNoDocument(Hp.min()));n.push(t.ar.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.ar.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.ar.updateMetadata(e,r)),fv.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.ar.rr(e,t).next((function(e){return n.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.ar.sr(e,t).next((function(e){var t=e.documents;return e._r.forEach((function(e,r){n.ur.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(X_);function nw(e){return ty(e,"remoteDocumentGlobal")}function rw(e){return ty(e,"remoteDocumentsV14")}function iw(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function aw(e,t){var n=t.documentKey.path.toArray();return[e,qk(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ow(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=zp(n[a],r[a]))return i;return(i=zp(n.length,r.length))||((i=zp(n[n.length-2],r[r.length-2]))||zp(n[n.length-1],r[r.length-1]))}var uw=R((function e(t,n){A(this,e),this.overlayedDocument=t,this.mutatedFields=n})),sw=function(){function e(t,n,r,i){A(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return R(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Tg(r.mutation,e,fy.empty(),Kp.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Zm()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zm(),i=Qm();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Hm();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Qm();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Zm())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Wm(),a=$m(),o=$m();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Sg)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Tg(o.mutation,t,o.mutation.getFieldMask(),Kp.now())):a.set(t.key,fy.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new uw(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=$m(),i=new ay((function(e,t){return e-t})),a=Zm();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=O(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||fy.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Zm()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Ym();c.forEach((function(e){if(!a.has(e)){var n=bg(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return fv.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){return function(e){return Jp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Pm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):fv.resolve(Qm()),u=-1,s=a;return o.next((function(t){return fv.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?fv.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Zm())})).next((function(e){return{batchId:u,changes:Gm(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Jp(t)).next((function(e){var t=Hm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n,r){var i=this,a=t.collectionGroup,o=Hm();return this.indexManager.getCollectionParents(e,a).next((function(u){return fv.forEach(u,(function(u){var s=function(e,t){return new Em(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,u.child(a));return i.getDocumentsMatchingCollectionQuery(e,s,n,r).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n,r){var i,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(o){return i=o,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)})).next((function(e){i.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Hy.newInvalidDocument(r)))}));var n=Hm();return e.forEach((function(e,r){var a=i.get(e);void 0!==a&&Tg(a.mutation,r,fy.empty(),Kp.now()),Um(t,r)&&(n=n.insert(e,r))})),n}))}}]),e}(),cw=function(){function e(t){A(this,e),this.serializer=t,this.cr=new Map,this.lr=new Map}return R(e,[{key:"getBundleMetadata",value:function(e,t){return fv.resolve(this.cr.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:hk(e.createTime)}}(t)),fv.resolve()}},{key:"getNamedQuery",value:function(e,t){return fv.resolve(this.lr.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:Gk(e.bundledQuery),readTime:hk(e.readTime)}}(t)),fv.resolve()}}]),e}(),lw=function(){function e(){A(this,e),this.overlays=new ay(Jp.comparator),this.hr=new Map}return R(e,[{key:"getOverlay",value:function(e,t){return fv.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Qm();return fv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ht(e,t,i)})),fv.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.hr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.hr.delete(n)),fv.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Qm(),i=t.length+1,a=new Jp(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return fv.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new ay((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Qm(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Qm(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return fv.resolve(s)}},{key:"ht",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Ug(t,n));var a=this.hr.get(t);void 0===a&&(a=Zm(),this.hr.set(t,a)),this.hr.set(t,a.add(n.key))}}]),e}(),fw=function(){function e(){A(this,e),this.Pr=new sy(hw.Ir),this.Tr=new sy(hw.Er)}return R(e,[{key:"isEmpty",value:function(){return this.Pr.isEmpty()}},{key:"addReference",value:function(e,t){var n=new hw(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}},{key:"dr",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ar(new hw(e,t))}},{key:"Rr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Vr",value:function(e){var t=this,n=new Jp(new Qp([])),r=new hw(n,e),i=new hw(n,e+1),a=[];return this.Tr.forEachInRange([r,i],(function(e){t.Ar(e),a.push(e.key)})),a}},{key:"mr",value:function(){var e=this;this.Pr.forEach((function(t){return e.Ar(t)}))}},{key:"Ar",value:function(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}},{key:"gr",value:function(e){var t=new Jp(new Qp([])),n=new hw(t,e),r=new hw(t,e+1),i=Zm();return this.Tr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new hw(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),hw=function(){function e(t,n){A(this,e),this.key=t,this.pr=n}return R(e,null,[{key:"Ir",value:function(e,t){return Jp.comparator(e.key,t.key)||zp(e.pr,t.pr)}},{key:"Er",value:function(e,t){return zp(e.pr,t.pr)||Jp.comparator(e.key,t.key)}}]),e}(),dw=function(){function e(t,n){A(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new sy(hw.Ir)}return R(e,[{key:"checkEmpty",value:function(e){return fv.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Mg(i,t,n,r);this.mutationQueue.push(a);var o,u=O(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.wr=this.wr.add(new hw(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return fv.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return fv.resolve(this.Sr(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.br(n),i=r<0?0:r;return fv.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return fv.resolve(0===this.mutationQueue.length?-1:this.yr-1)}},{key:"getAllMutationBatches",value:function(e){return fv.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new hw(t,0),i=new hw(t,Number.POSITIVE_INFINITY),a=[];return this.wr.forEachInRange([r,i],(function(e){var t=n.Sr(e.pr);a.push(t)})),fv.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new sy(zp);return t.forEach((function(e){var t=new hw(e,0),i=new hw(e,Number.POSITIVE_INFINITY);n.wr.forEachInRange([t,i],(function(e){r=r.add(e.pr)}))})),fv.resolve(this.Dr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Jp.isDocumentKey(i)||(i=i.child(""));var a=new hw(new Jp(i),0),o=new sy(zp);return this.wr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),a),fv.resolve(this.Dr(o))}},{key:"Dr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Sr(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Cp(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();var r=this.wr;return fv.forEach(t.mutations,(function(i){var a=new hw(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.wr=r}))}},{key:"Mn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new hw(t,0),r=this.wr.firstAfterOrEqual(n);return fv.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,fv.resolve()}},{key:"Cr",value:function(e,t){return this.br(e)}},{key:"br",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Sr",value:function(e){var t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),pw=function(){function e(t){A(this,e),this.vr=t,this.docs=new ay(Jp.comparator),this.size=0}return R(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return fv.resolve(n?n.document.mutableCopy():Hy.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Wm();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Hy.newInvalidDocument(e))})),fv.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Wm(),a=t.path,o=new Jp(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||ov(iv(l),n)<=0||(r.has(l.key)||Um(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return fv.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Ip()}},{key:"Fr",value:function(e,t){return fv.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new vw(this)}},{key:"getSize",value:function(e){return fv.resolve(this.size)}}]),e}(),vw=function(e){M(n,e);var t=j(n);function n(e){var r;return A(this,n),(r=t.call(this)).ar=e,r}return R(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.ar.addEntry(e,i)):t.ar.removeEntry(r)})),fv.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.ar.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.ar.getEntries(e,t)}}]),n}(X_),yw=function(){function e(t){A(this,e),this.persistence=t,this.Mr=new zm((function(e){return km(e)}),_m),this.lastRemoteSnapshotVersion=Hp.min(),this.highestTargetId=0,this.Or=0,this.Nr=new fw,this.targetCount=0,this.Br=V_.Nn()}return R(e,[{key:"forEachTarget",value:function(e,t){return this.Mr.forEach((function(e,n){return t(n)})),fv.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return fv.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return fv.resolve(this.Or)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Br.next(),fv.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),fv.resolve()}},{key:"qn",value:function(e){this.Mr.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Br=new V_(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.qn(t),this.targetCount+=1,fv.resolve()}},{key:"updateTargetData",value:function(e,t){return this.qn(t),fv.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,fv.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Mr.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Mr.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),fv.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return fv.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Mr.get(t)||null;return fv.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Nr.dr(t,n),fv.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Nr.Rr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),fv.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Nr.Vr(t),fv.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Nr.gr(t);return fv.resolve(n)}},{key:"containsKey",value:function(e,t){return fv.resolve(this.Nr.containsKey(t))}}]),e}(),mw=function(){function e(t,n){var r=this;A(this,e),this.Lr={},this.overlays={},this.kr=new xv(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new yw(this),this.indexManager=new b_,this.remoteDocumentCache=function(e){return new pw(e)}((function(e){return r.referenceDelegate.Kr(e)})),this.serializer=new jk(n),this.$r=new cw(this.serializer)}return R(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.qr=!1,Promise.resolve()}},{key:"started",get:function(){return this.qr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new lw,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Lr[e.toKey()];return n||(n=new dw(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Qr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.$r}},{key:"runTransaction",value:function(e,t,n){var r=this;bp("MemoryPersistence","Starting transaction:",e);var i=new gw(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((function(e){return r.referenceDelegate.Wr(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gr",value:function(e,t){return fv.or(Object.values(this.Lr).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),gw=function(e){M(n,e);var t=j(n);function n(e){var r;return A(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return R(n)}(sv),kw=function(){function e(t){A(this,e),this.persistence=t,this.zr=new fw,this.jr=null}return R(e,[{key:"Jr",get:function(){if(this.jr)return this.jr;throw Ip()}},{key:"addReference",value:function(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),fv.resolve()}},{key:"removeReference",value:function(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),fv.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Jr.add(t.toString()),fv.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.zr.Vr(t.targetId).forEach((function(e){return n.Jr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Jr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ur",value:function(){this.jr=new Set}},{key:"Wr",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fv.forEach(this.Jr,(function(r){var i=Jp.fromPath(r);return t.Yr(e,i).next((function(e){e||n.removeEntry(i,Hp.min())}))})).next((function(){return t.jr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Yr(e,t).next((function(e){e?n.Jr.delete(t.toString()):n.Jr.add(t.toString())}))}},{key:"Kr",value:function(e){return 0}},{key:"Yr",value:function(e,t){var n=this;return fv.or([function(){return fv.resolve(n.zr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gr(e,t)}])}}],[{key:"Hr",value:function(t){return new e(t)}}]),e}(),_w=function(){function e(t){A(this,e),this.serializer=t}return R(e,[{key:"B",value:function(e,t,n,r){var i=this,a=new hv("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nv,{unique:!0}),e.createObjectStore("documentMutations")}(e),ww(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=fv.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),ww(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Hp.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").G().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nv,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return fv.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Xr(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.ei(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.ti(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ni(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ri(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Hv});t.createIndex("collectionPathOverlayIndex",Gv,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Qv,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Lv});t.createIndex("documentKeyIndex",Mv),t.createIndex("collectionGroupIndex",Fv)}(e)})).next((function(){return i.ii(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:zv}).createIndex("sequenceNumberIndex",Bv,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Wv}).createIndex("documentKeyIndex",Kv,{unique:!1})}(e)}))),o}},{key:"ei",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=D_(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Xr",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next((function(n){return fv.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",i).next((function(r){return fv.forEach(r,(function(r){Cp(r.userId===n.userId);var i=Wk(t.serializer,r);return O_(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"ti",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new Qp(n),o=function(e){return[0,Cv(e)]}(a);r.push(t.get(o).next((function(n){return n?fv.resolve():function(n){return t.put({targetId:0,path:Cv(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return fv.waitFor(r)}))}))}},{key:"ni",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:qv});var n=t.store("collectionParents"),r=new x_,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Cv(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new Qp(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],Av(r));return i(a.popLast())}))}))}},{key:"ri",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=Kk(r),a=Hk(t.serializer,i);return n.put(a)}))}},{key:"ii",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i=t.store("remoteDocumentsV14"),a=function(e){return e.document?new Jp(Qp.fromString(e.document.name).popFirst(5)):e.noDocument?Jp.fromSegments(e.noDocument.path):e.unknownDocument?Jp.fromSegments(e.unknownDocument.path):Ip()}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((function(){return fv.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=ew(this.serializer),a=new mw(kw.Hr,this.serializer.ct);return r.G().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Zm();Wk(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),fv.forEach(r,(function(e,r){var o=new gp(r),u=e_.lt(n.serializer,o),s=a.getIndexManager(o),c=L_.lt(o,n.serializer,s,a.referenceDelegate);return new sw(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new ey(t,xv.ae),e).next()}))}))}}]),e}();function ww(e){e.createObjectStore("targetDocuments",{keyPath:jv}).createIndex("documentTargetsIndex",Vv,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Uv,{unique:!0}),e.createObjectStore("targetGlobal")}var bw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",xw=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(A(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.oi=a,this.window=o,this.document=u,this._i=c,this.ai=l,this.ui=f,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=function(e){return Promise.resolve()},!e.C())throw new Ap(Pp.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $_(this,i),this.Ti=n+"main",this.serializer=new jk(s),this.Ei=new dv(this.Ti,this.ui,new _w(this.serializer)),this.Qr=new q_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ew(this.serializer),this.$r=new Jk,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===l&&xp("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return R(e,[{key:"start",value:function(){var e=this;return this.Ai().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Ap(Pp.FAILED_PRECONDITION,bw);return e.Ri(),e.Vi(),e.mi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Qr.getHighestSequenceNumber(t)}))})).then((function(t){e.kr=new xv(t,e._i)})).then((function(){e.qr=!0})).catch((function(t){return e.Ei&&e.Ei.close(),Promise.reject(t)}))}},{key:"fi",value:function(e){var t=this;return this.Ii=function(){var n=C(E().mark((function n(r){return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ei.k(function(){var t=C(E().mark((function t(n){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ai();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ai",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Ew(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.gi(t).next((function(t){t||(e.isPrimary=!1,e.oi.enqueueRetryable((function(){return e.Ii(!1)})))}))})).next((function(){return e.pi(t)})).next((function(n){return e.isPrimary&&!n?e.yi(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(yv(t))return bp("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return bp("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.oi.enqueueRetryable((function(){return e.Ii(t)})),e.isPrimary=t}))}},{key:"gi",value:function(e){var t=this;return Tw(e).get("owner").next((function(e){return fv.resolve(t.Si(e))}))}},{key:"bi",value:function(e){return Ew(e).delete(this.clientId)}},{key:"Di",value:function(){var e=C(E().mark((function e(){var t,n,r,i,a=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ci(this.Pi,18e5)){e.next=6;break}return this.Pi=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=ty(e,"clientMetadata");return t.G().next((function(e){var n=a.vi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return fv.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.di){n=O(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.di.removeItem(this.Fi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mi",value:function(){var e=this;this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ai().then((function(){return e.Di()})).then((function(){return e.mi()}))}))}},{key:"Si",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"pi",value:function(e){var t=this;return this.ai?fv.resolve(!0):Tw(e).get("owner").next((function(n){if(null!==n&&t.Ci(n.leaseTimestampMs,5e3)&&!t.Mi(n.ownerId)){if(t.Si(n)&&t.networkEnabled)return!0;if(!t.Si(n)){if(!n.allowTabSynchronization)throw new Ap(Pp.FAILED_PRECONDITION,bw);return!1}}return!(!t.networkEnabled||!t.inForeground)||Ew(e).G().next((function(e){return void 0===t.vi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&bp("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=C(E().mark((function e(){var t=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),e.next=7,this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new ey(e,xv.ae);return t.yi(n).next((function(){return t.bi(n)}))}));case 7:this.Ei.close(),this.Bi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vi",value:function(e,t){var n=this;return e.filter((function(e){return n.Ci(e.updateTimeMs,t)&&!n.Mi(e.clientId)}))}},{key:"Li",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Ew(t).G().next((function(t){return e.vi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.qr}},{key:"getMutationQueue",value:function(e,t){return L_.lt(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Qr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new E_(e,this.serializer.ct.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return e_.lt(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.$r}},{key:"runTransaction",value:function(e,t,n){var r=this;bp("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite",o=function(e){return 15===e?Zv:14===e?Xv:13===e?Jv:12===e?$v:11===e?Yv:void Ip()}(this.ui);return this.Ei.runTransaction(e,a,o,(function(a){return i=new ey(a,r.kr?r.kr.next():xv.ae),"readwrite-primary"===t?r.gi(i).next((function(e){return!!e||r.pi(i)})).next((function(t){if(!t)throw xp("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.oi.enqueueRetryable((function(){return r.Ii(!1)})),new Ap(Pp.FAILED_PRECONDITION,uv);return n(i)})).next((function(e){return r.wi(i).next((function(){return e}))})):r.ki(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"ki",value:function(e){var t=this;return Tw(e).get("owner").next((function(e){if(null!==e&&t.Ci(e.leaseTimestampMs,5e3)&&!t.Mi(e.ownerId)&&!t.Si(e)&&!(t.ai||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Ap(Pp.FAILED_PRECONDITION,bw)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Tw(e).put("owner",t)}},{key:"yi",value:function(e){var t=this,n=Tw(e);return n.get("owner").next((function(e){return t.Si(e)?(bp("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):fv.resolve()}))}},{key:"Ci",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(xp("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"Ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=function(){e.oi.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ai()}))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}},{key:"Oi",value:function(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}},{key:"Vi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;!ue()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.oi.enterRestrictedMode(!0),t.oi.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"Ni",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Mi",value:function(e){var t;try{var n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return bp("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return xp("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){xp("Failed to set zombie client id.",e)}}},{key:"Bi",value:function(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}},{key:"Fi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return dv.C()}}]),e}();function Tw(e){return ty(e,"owner")}function Ew(e){return ty(e,"clientMetadata")}function Iw(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Cw=function(){function e(t,n,r,i){A(this,e),this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}return R(e,null,[{key:"Ki",value:function(t,n){var r,i=Zm(),a=Zm(),o=O(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Sw=function(){function e(){A(this,e),this._documentReadCount=0}return R(e,[{key:"documentReadCount",get:function(){return this._documentReadCount}},{key:"incrementDocumentReadCount",value:function(e){this._documentReadCount+=e}}]),e}(),Pw=function(){function e(){A(this,e),this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=8}return R(e,[{key:"initialize",value:function(e,t){this.zi=e,this.indexManager=t,this.$i=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a={result:null};return this.ji(e,t).next((function(e){a.result=e})).next((function(){if(!a.result)return i.Hi(e,t,r,n).next((function(e){a.result=e}))})).next((function(){if(!a.result){var n=new Sw;return i.Ji(e,t,n).next((function(r){if(a.result=r,i.Ui)return i.Yi(e,t,n,r.size)}))}})).next((function(){return a.result}))}},{key:"Yi",value:function(e,t,n,r){return n.documentReadCount<this.Wi?(wp()<=We.DEBUG&&bp("QueryEngine","SDK will not create cache indexes for query:",Fm(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),fv.resolve()):(wp()<=We.DEBUG&&bp("QueryEngine","Query:",Fm(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(wp()<=We.DEBUG&&bp("QueryEngine","The SDK decides to create cache indexes for query:",Fm(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nm(t))):fv.resolve())}},{key:"ji",value:function(e,t){var n=this;if(Sm(t))return fv.resolve(null);var r=Nm(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Dm(t,null,"F"),r=Nm(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Zm.apply(void 0,je(i));return n.zi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Zi(t,i);return n.Xi(t,o,a,r.readTime)?n.ji(e,Dm(t,null,"F")):n.es(e,o,t,r)}))}))})))}))}},{key:"Hi",value:function(e,t,n,r){var i=this;return Sm(t)||r.isEqual(Hp.min())?fv.resolve(null):this.zi.getDocuments(e,n).next((function(a){var o=i.Zi(t,a);return i.Xi(t,o,n,r)?fv.resolve(null):(wp()<=We.DEBUG&&bp("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Fm(t)),i.es(e,o,t,rv(r,-1)).next((function(e){return e})))}))}},{key:"Zi",value:function(e,t){var n=new sy(Vm(e));return t.forEach((function(t,r){Um(e,r)&&(n=n.add(r))})),n}},{key:"Xi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ji",value:function(e,t,n){return wp()<=We.DEBUG&&bp("QueryEngine","Using full collection scan to execute query:",Fm(t)),this.zi.getDocumentsMatchingQuery(e,t,av.min(),n)}},{key:"es",value:function(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Aw=function(){function e(t,n,r,i){A(this,e),this.persistence=t,this.ts=n,this.serializer=i,this.ns=new ay(zp),this.rs=new zm((function(e){return km(e)}),_m),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}return R(e,[{key:"_s",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sw(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ns)}))}}]),e}();function Nw(e,t,n,r){return new Aw(e,t,n,r)}function Rw(e,t){return Ow.apply(this,arguments)}function Ow(){return Ow=C(E().mark((function e(t,n){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sp(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r._s(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Zm(),s=O(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=O(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=O(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=O(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{us:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Ow.apply(this,arguments)}function Dw(e,t){var n=Sp(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=fv.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Cp(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Zm(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Lw(e){var t=Sp(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Qr.getLastRemoteSnapshotVersion(e)}))}function Mw(e,t){var n=Sp(e),r=t.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Qr.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Qr.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(dy.EMPTY_BYTE_STRING,Hp.min()).withLastLimboFreeSnapshotVersion(Hp.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Qr.updateTargetData(e,c))}}));var u=Wm(),s=Zm();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Fw(e,a,t.documentUpdates).next((function(e){u=e.cs,s=e.ls}))),!r.isEqual(Hp.min())){var c=n.Qr.getLastRemoteSnapshotVersion(e).next((function(t){return n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return fv.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.ns=i,e}))}function Fw(e,t,n){var r=Zm(),i=Zm();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Wm();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Hp.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):bp("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{cs:r,ls:i}}))}function Uw(e,t){var n=Sp(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function jw(e,t){var n=Sp(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Qr.getTargetData(e,t).next((function(i){return i?(r=i,fv.resolve(r)):n.Qr.allocateTargetId(e).next((function(i){return r=new Uk(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}function Vw(e,t,n){return qw.apply(this,arguments)}function qw(){return qw=C(E().mark((function e(t,n,r){var i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Sp(t),a=i.ns.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),yv(e.t1)){e.next=12;break}throw e.t1;case 12:bp("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ns=i.ns.remove(n),i.rs.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),qw.apply(this,arguments)}function zw(e,t,n){var r=Sp(e),i=Hp.min(),a=Zm();return r.persistence.runTransaction("Execute query","readwrite",(function(e){return function(e,t,n){var r=Sp(e),i=r.rs.get(n);return void 0!==i?fv.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Nm(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ts.getDocumentsMatchingQuery(e,t,n?i:Hp.min(),n?a:Zm())})).next((function(e){return Kw(r,jm(t),e),{documents:e,hs:a}}))}))}function Bw(e,t){var n=Sp(e),r=Sp(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ut(e,t).next((function(e){return e?e.target:null}))}))}function Ww(e,t){var n=Sp(e),r=n.ss.get(t)||Hp.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.os.getAllFromCollectionGroup(e,t,rv(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Kw(n,t,e),e}))}function Kw(e,t,n){var r=e.ss.get(t)||Hp.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}function Hw(e,t,n,r){return Gw.apply(this,arguments)}function Gw(){return Gw=C(E().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Sp(t),o=Zm(),u=Wm(),s=O(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Ps(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Is(l)).setReadTime(n.Ts(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.os.newChangeBuffer({trackRemovals:!0}),e.next=7,jw(a,function(e){return Nm(Cm(Qp.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Fw(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Qr.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Qr.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls)})).next((function(){return t.cs}))}))})));case 9:case"end":return e.stop()}}),e)}))),Gw.apply(this,arguments)}function Qw(e,t){return Yw.apply(this,arguments)}function Yw(){return Yw=C(E().mark((function e(t,n){var r,i,a,o=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Zm(),e.next=3,jw(t,Nm(Gk(n.bundledQuery)));case 3:return i=e.sent,a=Sp(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=hk(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.$r.saveNamedQuery(e,n);var o=i.withResumeToken(dy.EMPTY_BYTE_STRING,t);return a.ns=a.ns.insert(o.targetId,o),a.Qr.updateTargetData(e,o).next((function(){return a.Qr.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Qr.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.$r.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Yw.apply(this,arguments)}function $w(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Jw(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Xw(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Zw=function(){function e(t,n,r,i){A(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return R(e,[{key:"ds",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Es",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Ap(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(xp("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),eb=function(){function e(t,n,r){A(this,e),this.targetId=t,this.state=n,this.error=r}return R(e,[{key:"ds",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Es",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ap(i.error.code,i.error.message))),a?new e(t,i.state,r):(xp("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),tb=function(){function e(t,n){A(this,e),this.clientId=t,this.activeTargetIds=n}return R(e,null,[{key:"Es",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=tg(),o=0;i&&o<r.activeTargetIds.length;++o)i=Iv(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(xp("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),nb=function(){function e(t,n){A(this,e),this.clientId=t,this.onlineState=n}return R(e,null,[{key:"Es",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(xp("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),rb=function(){function e(){A(this,e),this.activeTargetIds=tg()}return R(e,[{key:"As",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Rs",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"ds",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),ib=function(){function e(t,n,r,i,a){A(this,e),this.window=t,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new ay(zp),this.started=!1,this.ys=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ws=$w(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new rb),this.bs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}return R(e,[{key:"start",value:function(){var e=C(E().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Li();case 2:t=e.sent,n=O(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Vs){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem($w(this.persistenceKey,i)))&&(o=tb.Es(i,a))&&(this.ps=this.ps.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Ms(),(u=this.storage.getItem(this.vs))&&(s=this.xs(u))&&this.Os(s),c=O(this.ys);try{for(c.s();!(l=c.n()).done;)f=l.value,this.gs(f)}catch(d){c.e(d)}finally{c.f()}this.ys=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ss,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ns(this.ps)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ps.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Bs(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Bs(e,t,n),this.Ls(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Xw(this.persistenceKey,e));if(n){var r=eb.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}},{key:"removeLocalQueryTarget",value:function(e){this.ks.Rs(e),this.Ms()}},{key:"isLocalQueryTarget",value:function(e){return this.ks.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Xw(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.qs(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ls(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Qs(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ks(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return bp("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){bp("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){bp("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"gs",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(bp("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void xp("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(C(E().mark((function e(){var r,i,a,o,u,s,c;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.bs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.$s(n.key),e.abrupt("return",t.Us(r,null));case 6:if(!(i=t.Ws(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Us(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Ds.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Gs(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.zs(a));case 16:e.next=41;break;case 18:if(!t.Cs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.js(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Hs(o));case 23:e.next=41;break;case 25:if(n.key!==t.vs){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.xs(n.newValue))){e.next=30;break}return e.abrupt("return",t.Os(u));case 30:e.next=41;break;case 32:if(n.key!==t.Ss){e.next=37;break}s=function(e){var t=xv.ae;if(null!=e)try{var n=JSON.parse(e);Cp("number"==typeof n),t=n}catch(e){xp("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==xv.ae&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Fs){e.next=41;break}return c=t.Js(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Ys(e)})));case 41:e.next=44;break;case 43:t.ys.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"ks",get:function(){return this.ps.get(this.Vs)}},{key:"Ms",value:function(){this.setItem(this.ws,this.ks.ds())}},{key:"Bs",value:function(e,t,n){var r=new Zw(this.currentUser,e,t,n),i=Jw(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}},{key:"Ls",value:function(e){var t=Jw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Qs",value:function(e){var t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}},{key:"qs",value:function(e,t,n){var r=Xw(this.persistenceKey,e),i=new eb(e,t,n);this.setItem(r,i.ds())}},{key:"Ks",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}},{key:"$s",value:function(e){var t=this.bs.exec(e);return t?t[1]:null}},{key:"Ws",value:function(e,t){var n=this.$s(e);return tb.Es(n,t)}},{key:"Gs",value:function(e,t){var n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Zw.Es(new gp(i),r,t)}},{key:"js",value:function(e,t){var n=this.Cs.exec(e),r=Number(n[1]);return eb.Es(r,t)}},{key:"xs",value:function(e){return nb.Es(e)}},{key:"Js",value:function(e){return JSON.parse(e)}},{key:"zs",value:function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Zs(t.batchId,t.state,t.error));case 2:bp("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Hs",value:function(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}},{key:"Us",value:function(e,t){var n=this,r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),a=this.Ns(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.eo(o,u).then((function(){n.ps=r}))}},{key:"Os",value:function(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ns",value:function(e){var t=tg();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),ab=function(){function e(){A(this,e),this.no=new rb,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return R(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.no.As(e),this.ro[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.ro[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.no.Rs(e)}},{key:"isLocalQueryTarget",value:function(e){return this.no.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.ro[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.no.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.no.activeTargetIds.has(e)}},{key:"start",value:function(){return this.no=new rb,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),ob=function(){function e(){A(this,e)}return R(e,[{key:"io",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),ub=function(){function e(){var t=this;A(this,e),this.so=function(){return t.oo()},this._o=function(){return t.ao()},this.uo=[],this.co()}return R(e,[{key:"io",value:function(e){this.uo.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}},{key:"co",value:function(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}},{key:"oo",value:function(){bp("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=O(this.uo);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"ao",value:function(){bp("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=O(this.uo);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),sb=null;function cb(){return null===sb?sb=268435456+Math.round(2147483648*Math.random()):sb++,"0x"+sb.toString(16)}var lb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},fb=function(){function e(t){A(this,e),this.lo=t.lo,this.ho=t.ho}return R(e,[{key:"Po",value:function(e){this.Io=e}},{key:"To",value:function(e){this.Eo=e}},{key:"onMessage",value:function(e){this.Ao=e}},{key:"close",value:function(){this.ho()}},{key:"send",value:function(e){this.lo(e)}},{key:"Ro",value:function(){this.Io()}},{key:"Vo",value:function(e){this.Eo(e)}},{key:"mo",value:function(e){this.Ao(e)}}]),e}(),hb="WebChannelConnection",db=function(e){M(n,e);var t=j(n);function n(e){var r;return A(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return R(n,[{key:"Co",value:function(e,t,n,r){var i=cb();return new Promise((function(a,o){var u=new pp;u.setWithCredentials(!0),u.listenOnce(lp.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case cp.NO_ERROR:var t=u.getResponseJson();bp(hb,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case cp.TIMEOUT:bp(hb,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Ap(Pp.DEADLINE_EXCEEDED,"Request time out"));break;case cp.HTTP_ERROR:var n=u.getStatus();if(bp(hb,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Pp).indexOf(t)>=0?t:Pp.UNKNOWN}(s.status);o(new Ap(c,s.message))}else o(new Ap(Pp.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Ap(Pp.UNAVAILABLE,"Connection failed."));break;default:Ip()}}finally{bp(hb,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);bp(hb,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Fo",value:function(e,t,n){var r=cb(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=up(),o=sp(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");bp(hb,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new fb({lo:function(t){h?bp(hb,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(bp(hb,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),bp(hb,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},ho:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,dp.EventType.OPEN,(function(){h||bp(hb,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,dp.EventType.CLOSE,(function(){h||(h=!0,bp(hb,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.Vo())})),p(l,dp.EventType.ERROR,(function(t){h||(h=!0,Tp(hb,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.Vo(new Ap(Pp.UNAVAILABLE,"The operation could not be completed")))})),p(l,dp.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];Cp(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){bp(hb,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=Rg[e];if(void 0!==t)return qg(t)}(u),c=o.message;void 0===s&&(s=Pp.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.Vo(new Ap(s,c)),l.close()}else bp(hb,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.mo(i)}})),p(o,fp.STAT_EVENT,(function(t){t.stat===hp.PROXY?bp(hb,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===hp.NOPROXY&&bp(hb,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.Ro()}),0),d}}]),n}(function(){function e(t){A(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=n+"://"+t.host,this.po="projects/".concat(r,"/databases/").concat(i),this.yo="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}return R(e,[{key:"wo",get:function(){return!1}},{key:"So",value:function(e,t,n,r,i){var a=cb(),o=this.bo(e,t);bp("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,r,i),this.Co(e,o,u,n).then((function(t){return bp("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Tp("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.So(e,t,n,r,i)}},{key:"Do",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+kp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"bo",value:function(e,t){var n=lb[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}}]),e}());function pb(){return"undefined"!=typeof window?window:null}function vb(){return"undefined"!=typeof document?document:null}function yb(e){return new uk(e,!0)}var mb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;A(this,e),this.oi=t,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=a,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}return R(e,[{key:"reset",value:function(){this.No=0}},{key:"ko",value:function(){this.No=this.Oo}},{key:"qo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&bp("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,(function(){return t.Lo=Date.now(),e()})),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}},{key:"Ko",value:function(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}},{key:"cancel",value:function(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Qo",value:function(){return(Math.random()-.5)*this.No}}]),e}(),gb=function(){function e(t,n,r,i,a,o,u,s){A(this,e),this.oi=t,this.$o=r,this.Uo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new mb(t,n)}return R(e,[{key:"Ho",value:function(){return 1===this.state||5===this.state||this.Jo()}},{key:"Jo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Yo()}},{key:"stop",value:function(){var e=C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Ho(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zo",value:function(){this.state=0,this.jo.reset()}},{key:"Xo",value:function(){var e=this;this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(function(){return e.e_()})))}},{key:"t_",value:function(e){this.n_(),this.stream.send(e)}},{key:"e_",value:function(){var e=C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Jo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"n_",value:function(){this.Go&&(this.Go.cancel(),this.Go=null)}},{key:"r_",value:function(){this.zo&&(this.zo.cancel(),this.zo=null)}},{key:"close",value:function(){var e=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==t?this.jo.reset():n&&n.code===Pp.RESOURCE_EXHAUSTED?(xp(n.toString()),xp("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===Pp.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.To(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"i_",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.Wo===n&&e.o_(i,a)}),(function(n){t((function(){var t=new Ap(Pp.UNKNOWN,"Fetching auth token failed: "+n.message);return e.__(t)}))}))}},{key:"o_",value:function(e,t){var n=this,r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((function(){r((function(){return n.state=2,n.zo=n.oi.enqueueAfterDelay(n.Uo,1e4,(function(){return n.Jo()&&(n.state=3),Promise.resolve()})),n.listener.Po()}))})),this.stream.To((function(e){r((function(){return n.__(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Yo",value:function(){var e=this;this.state=5,this.jo.qo(C(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"__",value:function(e){return bp("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"s_",value:function(e){var t=this;return function(n){t.oi.enqueueAndForget((function(){return t.Wo===e?n():(bp("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),kb=function(e){M(n,e);var t=j(n);function n(e,r,i,a,o,u){var s;return A(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return R(n,[{key:"a_",value:function(e,t){return this.connection.Fo("Listen",e,t)}},{key:"onMessage",value:function(e){this.jo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ip()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Cp(void 0===t||"string"==typeof t),dy.fromBase64String(t||"")):(Cp(void 0===t||t instanceof Uint8Array),dy.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Pp.UNKNOWN:qg(e.code);return new Ap(t,e.message||"")}(o);n=new Zg(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=yk(e,s.document.name),l=hk(s.document.updateTime),f=s.document.createTime?hk(s.document.createTime):Hp.min(),h=new Wy({mapValue:{fields:s.document.fields}}),d=Hy.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new Jg(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=yk(e,y.document),g=y.readTime?hk(y.readTime):Hp.min(),k=Hy.newNoDocument(m,g),_=y.removedTargetIds||[];n=new Jg([],_,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=yk(e,w.document),x=w.removedTargetIds||[];n=new Jg([],x,b,null)}else{if(!("filter"in t))return Ip();t.filter;var T=t.filter;T.targetId;var E=T.count,I=void 0===E?0:E,C=T.unchangedNames,S=new jg(I,C),P=T.targetId;n=new Xg(P,S)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Hp.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Hp.min():t.readTime?hk(t.readTime):Hp.min()}(e);return this.listener.u_(t,n)}},{key:"c_",value:function(e){var t={};t.database=kk(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=wm(r)?{documents:Ik(e,r)}:{query:Ck(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=lk(e,t.resumeToken);var i=sk(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Hp.min())>0){n.readTime=ck(e,t.snapshotVersion.toTimestamp());var a=sk(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ip()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}},{key:"l_",value:function(e){var t={};t.database=kk(this.serializer),t.removeTarget=e,this.t_(t)}}]),n}(gb),_b=function(e){M(n,e);var t=j(n);function n(e,r,i,a,o,u){var s;return A(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.h_=!1,s}return R(n,[{key:"P_",get:function(){return this.h_}},{key:"start",value:function(){this.h_=!1,this.lastStreamToken=void 0,yn(F(n.prototype),"start",this).call(this)}},{key:"i_",value:function(){this.h_&&this.I_([])}},{key:"a_",value:function(e,t){return this.connection.Fo("Write",e,t)}},{key:"onMessage",value:function(e){if(Cp(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();var t=function(e,t){return e&&e.length>0?(Cp(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?hk(e.updateTime):hk(t);return n.isEqual(Hp.min())&&(n=hk(t)),new gg(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=hk(e.commitTime);return this.listener.T_(n,t)}return Cp(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}},{key:"d_",value:function(){var e={};e.database=kk(this.serializer),this.t_(e)}},{key:"I_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Tk(t.serializer,e)}))};this.t_(n)}}]),n}(gb),wb=function(e){M(n,e);var t=j(n);function n(e,r,i,a){var o;return A(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.A_=!1,o}return R(n,[{key:"R_",value:function(){if(this.A_)throw new Ap(Pp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"So",value:function(e,t,n){var r=this;return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.connection.So(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Pp.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Ap(Pp.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=s(a,2),u=o[0],c=o[1];return i.connection.vo(e,t,n,u,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Pp.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Ap(Pp.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.A_=!0}}]),n}(R((function e(){A(this,e)})));var bb=function(){function e(t,n){A(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}return R(e,[{key:"p_",value:function(){var e=this;0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.f_=null,e.w_("Backend didn't respond within 10 seconds."),e.y_("Offline"),Promise.resolve()})))}},{key:"S_",value:function(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}},{key:"set",value:function(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}},{key:"y_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"w_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(xp(t),this.g_=!1):bp("OnlineStateTracker",t)}},{key:"b_",value:function(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}]),e}(),xb=R((function e(t,n,r,i,a){var o=this;A(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=a,this.M_.io((function(e){r.enqueueAndForget(C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Db(o),!e.t0){e.next=5;break}return bp("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Sp(t)).v_.add(4),e.next=4,Ib(n);case 4:return n.x_.set("Unknown"),n.v_.delete(4),e.next=8,Tb(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.x_=new bb(r,i)}));function Tb(e){return Eb.apply(this,arguments)}function Eb(){return(Eb=C(E().mark((function e(t){var n,r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Db(t)){e.next=18;break}n=O(t.F_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function Ib(e){return Cb.apply(this,arguments)}function Cb(){return(Cb=C(E().mark((function e(t){var n,r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=O(t.F_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function Sb(e,t){var n=Sp(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Ob(n)?Rb(n):cx(n).Jo()&&Ab(n,t))}function Pb(e,t){var n=Sp(e),r=cx(n);n.C_.delete(t),r.Jo()&&Nb(n,t),0===n.C_.size&&(r.Jo()?r.Xo():Db(n)&&n.x_.set("Unknown"))}function Ab(e,t){if(e.O_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Hp.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}cx(e).c_(t)}function Nb(e,t){e.O_.Ne(t),cx(e).l_(t)}function Rb(e){e.O_=new tk({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ut:function(t){return e.C_.get(t)||null},rt:function(){return e.datastore.serializer.databaseId}}),cx(e).start(),e.x_.p_()}function Ob(e){return Db(e)&&!cx(e).Ho()&&e.C_.size>0}function Db(e){return 0===Sp(e).v_.size}function Lb(e){e.O_=void 0}function Mb(e){return Fb.apply(this,arguments)}function Fb(){return(Fb=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.C_.forEach((function(e,n){Ab(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ub(e,t){return jb.apply(this,arguments)}function jb(){return(jb=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Lb(t),Ob(t)?(t.x_.S_(n),Rb(t)):t.x_.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vb(e,t,n){return qb.apply(this,arguments)}function qb(){return qb=C(E().mark((function e(t,n,r){var i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.x_.set("Online"),!(n instanceof Zg&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=C(E().mark((function e(t,n){var r,i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=O(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.C_.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.C_.delete(o),t.O_.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),bp("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,zb(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Jg?t.O_.Ue(n):n instanceof Xg?t.O_.Ye(n):t.O_.ze(n),r.isEqual(Hp.min())){e.next=29;break}return e.prev=14,e.next=17,Lw(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.O_.st(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.C_.get(t);if(r){e.C_.set(t,r.withResumeToken(dy.EMPTY_BYTE_STRING,r.snapshotVersion)),Nb(e,t);var i=new Uk(r.target,t,n,r.sequenceNumber);Ab(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),bp("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,zb(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),qb.apply(this,arguments)}function zb(e,t,n){return Bb.apply(this,arguments)}function Bb(){return(Bb=C(E().mark((function e(t,n,r){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yv(n)){e.next=2;break}throw n;case 2:return t.v_.add(1),e.next=5,Ib(t);case 5:t.x_.set("Offline"),r||(r=function(){return Lw(t.localStore)}),t.asyncQueue.enqueueRetryable(C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bp("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.v_.delete(1),e.next=6,Tb(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wb(e,t){return t().catch((function(n){return zb(e,n,t)}))}function Kb(e){return Hb.apply(this,arguments)}function Hb(){return Hb=C(E().mark((function e(t){var n,r,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Sp(t),r=lx(n),i=n.D_.length>0?n.D_[n.D_.length-1].batchId:-1;case 2:if(!Gb(n)){e.next=19;break}return e.prev=3,e.next=6,Uw(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.D_.length&&r.Xo(),e.abrupt("break",19);case 10:i=a.batchId,Qb(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,zb(n,e.t0);case 17:e.next=2;break;case 19:Yb(n)&&$b(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Hb.apply(this,arguments)}function Gb(e){return Db(e)&&e.D_.length<10}function Qb(e,t){e.D_.push(t);var n=lx(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Yb(e){return Db(e)&&!lx(e).Ho()&&e.D_.length>0}function $b(e){lx(e).start()}function Jb(e){return Xb.apply(this,arguments)}function Xb(){return(Xb=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:lx(t).d_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zb(e){return ex.apply(this,arguments)}function ex(){return(ex=C(E().mark((function e(t){var n,r,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=lx(t),r=O(t.D_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.I_(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tx(e,t,n){return nx.apply(this,arguments)}function nx(){return nx=C(E().mark((function e(t,n,r){var i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.D_.shift(),a=Fg.from(i,n,r),e.next=3,Wb(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Kb(t);case 5:case"end":return e.stop()}}),e)}))),nx.apply(this,arguments)}function rx(e,t){return ix.apply(this,arguments)}function ix(){return ix=C(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&lx(t).P_,!e.t0){e.next=4;break}return e.next=4,function(){var e=C(E().mark((function e(t,n){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return Vg(e)&&e!==Pp.ABORTED}(n.code)){e.next=7;break}return r=t.D_.shift(),lx(t).Zo(),e.next=5,Wb(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Kb(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Yb(t)&&$b(t);case 5:case"end":return e.stop()}}),e)}))),ix.apply(this,arguments)}function ax(e,t){return ox.apply(this,arguments)}function ox(){return ox=C(E().mark((function e(t,n){var r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Sp(t)).asyncQueue.verifyOperationInProgress(),bp("RemoteStore","RemoteStore received new credentials"),i=Db(r),r.v_.add(3),e.next=6,Ib(r);case 6:return i&&r.x_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.v_.delete(3),e.next=12,Tb(r);case 12:case"end":return e.stop()}}),e)}))),ox.apply(this,arguments)}function ux(e,t){return sx.apply(this,arguments)}function sx(){return(sx=C(E().mark((function e(t,n){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Sp(t),!n){e.next=7;break}return r.v_.delete(2),e.next=5,Tb(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.v_.add(2),e.next=12,Ib(r);case 12:r.x_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cx(e){return e.N_||(e.N_=function(e,t,n){var r=Sp(e);return r.R_(),new kb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Mb.bind(null,e),To:Ub.bind(null,e),u_:Vb.bind(null,e)}),e.F_.push(function(){var t=C(E().mark((function t(n){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.N_.Zo(),Ob(e)?Rb(e):e.x_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.N_.stop();case 6:Lb(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.N_}function lx(e){return e.B_||(e.B_=function(e,t,n){var r=Sp(e);return r.R_(),new _b(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Jb.bind(null,e),To:rx.bind(null,e),E_:Zb.bind(null,e),T_:tx.bind(null,e)}),e.F_.push(function(){var t=C(E().mark((function t(n){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.B_.Zo(),t.next=4,Kb(e);case 4:t.next=9;break;case 6:return t.next=8,e.B_.stop();case 8:e.D_.length>0&&(bp("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.B_}var fx=function(){function e(t,n,r,i,a){A(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Np,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return R(e,[{key:"promise",get:function(){return this.deferred.promise}},{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ap(Pp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function hx(e,t){if(xp("AsyncQueue","".concat(t,": ").concat(e)),yv(e))return new Ap(Pp.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var dx=function(){function e(t){A(this,e),this.comparator=t?function(e,n){return t(e,n)||Jp.comparator(e.key,n.key)}:function(e,t){return Jp.comparator(e.key,t.key)},this.keyedMap=Hm(),this.sortedSet=new ay(this.comparator)}return R(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),px=function(){function e(){A(this,e),this.L_=new ay(Jp.comparator)}return R(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):Ip():this.L_=this.L_.insert(t,e)}},{key:"k_",value:function(){var e=[];return this.L_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),vx=function(){function e(t,n,r,i,a,o,u,s,c){A(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return R(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,dx.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),yx=R((function e(){A(this,e),this.q_=void 0,this.listeners=[]})),mx=R((function e(){A(this,e),this.queries=new zm((function(e){return Mm(e)}),Lm),this.onlineState="Unknown",this.Q_=new Set}));function gx(e,t){return kx.apply(this,arguments)}function kx(){return kx=C(E().mark((function e(t,n){var r,i,a,o,u;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Sp(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new yx),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.q_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=hx(e.t0,"Initialization of query '".concat(Fm(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.K_(r.onlineState),o.q_&&n.U_(o.q_)&&Tx(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),kx.apply(this,arguments)}function _x(e,t){return wx.apply(this,arguments)}function wx(){return wx=C(E().mark((function e(t,n){var r,i,a,o,u;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Sp(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),wx.apply(this,arguments)}function bx(e,t){var n,r=Sp(e),i=!1,a=O(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=O(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.U_(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.q_=o}}}catch(f){a.e(f)}finally{a.f()}i&&Tx(r)}function xx(e,t,n){var r=Sp(e),i=r.queries.get(t);if(i){var a,o=O(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Tx(e){e.Q_.forEach((function(e){e.next()}))}var Ex=function(){function e(t,n,r){A(this,e),this.query=t,this.W_=n,this.G_=!1,this.z_=null,this.onlineState="Unknown",this.options=r||{}}return R(e,[{key:"U_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=O(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new vx(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.G_?this.j_(e)&&(this.W_.next(e),a=!0):this.H_(e,this.onlineState)&&(this.J_(e),a=!0),this.z_=e,a}},{key:"onError",value:function(e){this.W_.error(e)}},{key:"K_",value:function(e){this.onlineState=e;var t=!1;return this.z_&&!this.G_&&this.H_(this.z_,e)&&(this.J_(this.z_),t=!0),t}},{key:"H_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Y_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"j_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.z_&&this.z_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"J_",value:function(e){e=vx.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.G_=!0,this.W_.next(e)}}]),e}(),Ix=function(){function e(t,n){A(this,e),this.Z_=t,this.byteLength=n}return R(e,[{key:"X_",value:function(){return"metadata"in this.Z_}}]),e}(),Cx=function(){function e(t){A(this,e),this.serializer=t}return R(e,[{key:"Ps",value:function(e){return yk(this.serializer,e)}},{key:"Is",value:function(e){return e.metadata.exists?bk(this.serializer,e.document,!1):Hy.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}},{key:"Ts",value:function(e){return hk(e)}}]),e}(),Sx=function(){function e(t,n,r){A(this,e),this.ea=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Px(t)}return R(e,[{key:"ta",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Z_.namedQuery)this.queries.push(e.Z_.namedQuery);else if(e.Z_.documentMetadata){this.documents.push({metadata:e.Z_.documentMetadata}),e.Z_.documentMetadata.exists||++t;var n=Qp.fromString(e.Z_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Z_.document&&(this.documents[this.documents.length-1].document=e.Z_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"na",value:function(e){var t,n=new Map,r=new Cx(this.serializer),i=O(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ps(a.metadata.name),s=O(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Zm()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=C(E().mark((function e(){var t,n,r,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hw(this.localStore,new Cx(this.serializer),this.documents,this.ea.id);case 2:t=e.sent,n=this.na(this.documents),r=O(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Qw(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,ra:this.collectionGroups,ia:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Px(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Ax=R((function e(t){A(this,e),this.key=t})),Nx=R((function e(t){A(this,e),this.key=t})),Rx=function(){function e(t,n){A(this,e),this.query=t,this.sa=n,this.oa=null,this.hasCachedResults=!1,this.current=!1,this._a=Zm(),this.mutatedKeys=Zm(),this.aa=Vm(t),this.ua=new dx(this.aa)}return R(e,[{key:"ca",get:function(){return this.sa}},{key:"la",value:function(e,t){var n=this,r=t?t.ha:new px,i=t?t.ua:this.ua,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Um(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Pa(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.aa(f,s)>0||c&&n.aa(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ua:o,ha:r,Xi:u,mutatedKeys:a}}},{key:"Pa",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ua;this.ua=e.ua,this.mutatedKeys=e.mutatedKeys;var a=e.ha.k_();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ip()}};return n(e)-n(t)}(e.type,t.type)||r.aa(e.doc,t.doc)})),this.Ia(n);var o=t?this.Ta():[],u=0===this._a.size&&this.current?1:0,s=u!==this.oa;return this.oa=u,0!==a.length||s?{snapshot:new vx(this.query,e.ua,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ea:o}:{Ea:o}}},{key:"K_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ua:this.ua,ha:new px,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Ea:[]}}},{key:"da",value:function(e){return!this.sa.has(e)&&!!this.ua.has(e)&&!this.ua.get(e).hasLocalMutations}},{key:"Ia",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.sa=t.sa.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.sa=t.sa.delete(e)})),this.current=e.current)}},{key:"Ta",value:function(){var e=this;if(!this.current)return[];var t=this._a;this._a=Zm(),this.ua.forEach((function(t){e.da(t.key)&&(e._a=e._a.add(t.key))}));var n=[];return t.forEach((function(t){e._a.has(t)||n.push(new Nx(t))})),this._a.forEach((function(e){t.has(e)||n.push(new Ax(e))})),n}},{key:"Aa",value:function(e){this.sa=e.hs,this._a=Zm();var t=this.la(e.documents);return this.applyChanges(t,!0)}},{key:"Ra",value:function(){return vx.fromInitialDocuments(this.query,this.ua,this.mutatedKeys,0===this.oa,this.hasCachedResults)}}]),e}(),Ox=R((function e(t,n,r){A(this,e),this.query=t,this.targetId=n,this.view=r})),Dx=R((function e(t){A(this,e),this.key=t,this.Va=!1})),Lx=function(){function e(t,n,r,i,a,o){A(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.ma={},this.fa=new zm((function(e){return Mm(e)}),Lm),this.ga=new Map,this.pa=new Set,this.ya=new ay(Jp.comparator),this.wa=new Map,this.Sa=new fw,this.ba={},this.Da=new Map,this.Ca=V_.Bn(),this.onlineState="Unknown",this.va=void 0}return R(e,[{key:"isPrimaryClient",get:function(){return!0===this.va}}]),e}();function Mx(e,t){return Fx.apply(this,arguments)}function Fx(){return Fx=C(E().mark((function e(t,n){var r,i,a,o,u,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=PT(t),!(o=r.fa.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Ra(),e.next=15;break;case 6:return e.next=8,jw(r.localStore,Nm(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,Ux(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&Sb(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Fx.apply(this,arguments)}function Ux(e,t,n,r,i){return jx.apply(this,arguments)}function jx(){return jx=C(E().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Fa=function(e,n,r){return function(){var e=C(E().mark((function e(t,n,r,i){var a,o,u;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.la(r),e.t0=a.Xi,!e.t0){e.next=6;break}return e.next=5,zw(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.la(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(aT(t,n.targetId,u.Ea),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,zw(t.localStore,n,!0);case 3:return o=e.sent,u=new Rx(n,o.hs),s=u.la(o.documents),c=$g.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),aT(t,r,l.Ea),f=new Ox(n,r,u),e.abrupt("return",(t.fa.set(n,f),t.ga.has(r)?t.ga.get(r).push(n):t.ga.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),jx.apply(this,arguments)}function Vx(e,t){return qx.apply(this,arguments)}function qx(){return qx=C(E().mark((function e(t,n){var r,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Sp(t),i=r.fa.get(n),!((a=r.ga.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ga.set(i.targetId,a.filter((function(e){return!Lm(e,n)}))),void r.fa.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Vw(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Pb(r.remoteStore,i.targetId),rT(r,i.targetId)})).catch(cv);case 9:e.next=14;break;case 11:return rT(r,i.targetId),e.next=14,Vw(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),qx.apply(this,arguments)}function zx(e,t,n){return Bx.apply(this,arguments)}function Bx(){return Bx=C(E().mark((function e(t,n,r){var i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=AT(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Sp(e),a=Kp.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Zm());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Wm(),s=Zm();return i.os.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=O(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Eg(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Sg(c.key,l,Ky(l.value.mapValue),kg.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Gm(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ba[e.currentUser.toKey()];r||(r=new ay(zp)),r=r.insert(t,n),e.ba[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,sT(i,a.changes);case 9:return e.next=11,Kb(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=hx(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Bx.apply(this,arguments)}function Wx(e,t){return Kx.apply(this,arguments)}function Kx(){return Kx=C(E().mark((function e(t,n){var r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sp(t),e.prev=1,e.next=4,Mw(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.wa.get(t);n&&(Cp(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Va=!0:e.modifiedDocuments.size>0?Cp(n.Va):e.removedDocuments.size>0&&(Cp(n.Va),n.Va=!1))})),e.next=8,sT(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,cv(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Kx.apply(this,arguments)}function Hx(e,t,n){var r=Sp(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.fa.forEach((function(e,n){var r=n.view.K_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Sp(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=O(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.K_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Tx(n)}(r.eventManager,t),i.length&&r.ma.u_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Gx(e,t,n){return Qx.apply(this,arguments)}function Qx(){return Qx=C(E().mark((function e(t,n,r){var i,a,o,u,s,c;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Sp(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.wa.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new ay(Jp.comparator)).insert(o,Hy.newNoDocument(o,Hp.min())),s=Zm().add(o),c=new Yg(Hp.min(),new Map,new ay(zp),u,s),e.next=9,Wx(i,c);case 9:i.ya=i.ya.remove(o),i.wa.delete(n),uT(i),e.next=16;break;case 14:return e.next=16,Vw(i.localStore,n,!1).then((function(){return rT(i,n,r)})).catch(cv);case 16:case"end":return e.stop()}}),e)}))),Qx.apply(this,arguments)}function Yx(e,t){return $x.apply(this,arguments)}function $x(){return $x=C(E().mark((function e(t,n){var r,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sp(t),i=n.batch.batchId,e.prev=1,e.next=4,Dw(r.localStore,n);case 4:return a=e.sent,nT(r,i,null),tT(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,sT(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,cv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),$x.apply(this,arguments)}function Jx(e,t,n){return Xx.apply(this,arguments)}function Xx(){return Xx=C(E().mark((function e(t,n,r){var i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Sp(t),e.prev=1,e.next=4,function(e,t){var n=Sp(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Cp(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,nT(i,n,r),tT(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,sT(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,cv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Xx.apply(this,arguments)}function Zx(e,t){return eT.apply(this,arguments)}function eT(){return eT=C(E().mark((function e(t,n){var r,i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Db((r=Sp(t)).remoteStore)||bp("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Sp(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Da.get(i)||[]).push(n),r.Da.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=hx(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),eT.apply(this,arguments)}function tT(e,t){(e.Da.get(t)||[]).forEach((function(e){e.resolve()})),e.Da.delete(t)}function nT(e,t,n){var r=Sp(e),i=r.ba[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ba[r.currentUser.toKey()]=i}}function rT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=O(e.ga.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.fa.delete(a),n&&e.ma.Ma(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ga.delete(t),e.isPrimaryClient&&e.Sa.Vr(t).forEach((function(t){e.Sa.containsKey(t)||iT(e,t)}))}function iT(e,t){e.pa.delete(t.path.canonicalString());var n=e.ya.get(t);null!==n&&(Pb(e.remoteStore,n),e.ya=e.ya.remove(t),e.wa.delete(n),uT(e))}function aT(e,t,n){var r,i=O(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Ax?(e.Sa.addReference(a.key,t),oT(e,a)):a instanceof Nx?(bp("SyncEngine","Document no longer in limbo: "+a.key),e.Sa.removeReference(a.key,t),e.Sa.containsKey(a.key)||iT(e,a.key)):Ip()}}catch(o){i.e(o)}finally{i.f()}}function oT(e,t){var n=t.key,r=n.path.canonicalString();e.ya.get(n)||e.pa.has(r)||(bp("SyncEngine","New document in limbo: "+n),e.pa.add(r),uT(e))}function uT(e){for(;e.pa.size>0&&e.ya.size<e.maxConcurrentLimboResolutions;){var t=e.pa.values().next().value;e.pa.delete(t);var n=new Jp(Qp.fromString(t)),r=e.Ca.next();e.wa.set(r,new Dx(n)),e.ya=e.ya.insert(n,r),Sb(e.remoteStore,new Uk(Nm(Cm(n.path)),r,"TargetPurposeLimboResolution",xv.ae))}}function sT(e,t,n){return cT.apply(this,arguments)}function cT(){return cT=C(E().mark((function e(t,n,r){var i,a,o,u;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Sp(t),a=[],o=[],u=[],e.t0=i.fa.isEmpty(),e.t0){e.next=9;break}return i.fa.forEach((function(e,t){u.push(i.Fa(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Cw.Ki(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.ma.u_(a),e.next=9,function(){var e=C(E().mark((function e(t,n){var r,i,a,o,u,s,c,l;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sp(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return fv.forEach(n,(function(t){return fv.forEach(t.qi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return fv.forEach(t.Qi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),yv(e.t0)){e.next=10;break}throw e.t0;case 10:bp("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=O(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ns.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.ns=r.ns.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),cT.apply(this,arguments)}function lT(e,t){return fT.apply(this,arguments)}function fT(){return(fT=C(E().mark((function e(t,n){var r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Sp(t)).currentUser.isEqual(n)){e.next=11;break}return bp("SyncEngine","User change. New user:",n.toKey()),e.next=5,Rw(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Da.forEach((function(e){e.forEach((function(e){e.reject(new Ap(Pp.CANCELLED,t))}))})),e.Da.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,sT(r,i.us);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hT(e,t){var n=Sp(e),r=n.wa.get(t);if(r&&r.Va)return Zm().add(r.key);var i=Zm(),a=n.ga.get(t);if(!a)return i;var o,u=O(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.fa.get(s);i=i.unionWith(c.view.ca)}}catch(l){u.e(l)}finally{u.f()}return i}function dT(e,t){return pT.apply(this,arguments)}function pT(){return pT=C(E().mark((function e(t,n){var r,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sp(t),e.next=3,zw(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Aa(i),e.abrupt("return",(r.isPrimaryClient&&aT(r,n.targetId,a.Ea),a));case 6:case"end":return e.stop()}}),e)}))),pT.apply(this,arguments)}function vT(e,t){return yT.apply(this,arguments)}function yT(){return(yT=C(E().mark((function e(t,n){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sp(t),e.abrupt("return",Ww(r.localStore,n).then((function(e){return sT(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mT(e,t,n,r){return gT.apply(this,arguments)}function gT(){return gT=C(E().mark((function e(t,n,r,i){var a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Sp(t),e.next=3,function(e,t){var n=Sp(e),r=Sp(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.vn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):fv.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Kb(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(nT(a,n,i||null),tT(a,n),function(e,t){Sp(Sp(e).mutationQueue).Mn(t)}(a.localStore,n)):Ip();case 11:return e.next=13,sT(a,o);case 13:e.next=16;break;case 15:bp("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),gT.apply(this,arguments)}function kT(e,t){return _T.apply(this,arguments)}function _T(){return _T=C(E().mark((function e(t,n){var r,i,a,o,u,s,c,l;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(PT(r=Sp(t)),AT(r),!0!==n||!0===r.va){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,wT(r,i.toArray());case 5:return a=e.sent,r.va=!0,e.next=9,ux(r.remoteStore,!0);case 9:o=O(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Sb(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.va){e.next=25;break}return c=[],l=Promise.resolve(),r.ga.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return rT(r,t),Vw(r.localStore,t,!0)})),Pb(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,wT(r,c);case 21:return function(e){var t=Sp(e);t.wa.forEach((function(e,n){Pb(t.remoteStore,n)})),t.Sa.mr(),t.wa=new Map,t.ya=new ay(Jp.comparator)}(r),r.va=!1,e.next=25,ux(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),_T.apply(this,arguments)}function wT(e,t,n){return bT.apply(this,arguments)}function bT(){return bT=C(E().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Sp(t),a=[],o=[],u=O(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ga.get(c))||0===f.length){e.next=34;break}return e.next=11,jw(i.localStore,Nm(f[0]));case 11:l=e.sent,h=O(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.fa.get(p),e.next=20,dT(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Bw(i.localStore,c);case 36:return m=e.sent,e.next=39,jw(i.localStore,m);case 39:return l=e.sent,e.next=42,Ux(i,xT(m),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.ma.u_(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),bT.apply(this,arguments)}function xT(e){return Im(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function TT(e){return function(e){return Sp(Sp(e).persistence).Li()}(Sp(e).localStore)}function ET(e,t,n,r){return IT.apply(this,arguments)}function IT(){return IT=C(E().mark((function e(t,n,r,i){var a,o,u,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Sp(t)).va){e.next=3;break}return e.abrupt("return",void bp("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ga.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Ww(a.localStore,jm(o[0]));case 10:return u=e.sent,s=Yg.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,dy.EMPTY_BYTE_STRING),e.next=14,sT(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Vw(a.localStore,n,!0);case 17:return rT(a,n,i),e.abrupt("break",20);case 19:Ip();case 20:case"end":return e.stop()}}),e)}))),IT.apply(this,arguments)}function CT(e,t,n){return ST.apply(this,arguments)}function ST(){return ST=C(E().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=PT(t)).va){e.next=45;break}a=O(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ga.has(u)){e.next=10;break}return bp("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Bw(i.localStore,u);case 12:return s=e.sent,e.next=15,jw(i.localStore,s);case 15:return c=e.sent,e.next=18,Ux(i,xT(s),c.targetId,!1,c.resumeToken);case 18:Sb(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=O(r),e.prev=30,h=E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ga.has(t),!e.t0){e.next=5;break}return e.next=5,Vw(i.localStore,t,!1).then((function(){Pb(i.remoteStore,t),rT(i,t)})).catch(cv);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),ST.apply(this,arguments)}function PT(e){var t=Sp(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Wx.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=hT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Gx.bind(null,t),t.ma.u_=bx.bind(null,t.eventManager),t.ma.Ma=xx.bind(null,t.eventManager),t}function AT(e){var t=Sp(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Yx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Jx.bind(null,t),t}function NT(e,t,n){var r=Sp(e);(function(){var e=C(E().mark((function e(t,n,r){var i,a,o,u,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Sp(e),r=hk(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.$r.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Px(i)),a=new Sx(i,t.localStore,n.serializer),e.next=15,n.xa();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.ta(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.xa();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,sT(t,s.ia,void 0);case 31:return e.next=33,function(e,t){var n=Sp(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.$r.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.ra));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Tp("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var RT=function(){function e(){A(this,e),this.synchronizeTabs=!1}return R(e,[{key:"initialize",value:function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=yb(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Nw(this.persistence,new Pw,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new mw(kw.Hr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new ab}},{key:"terminate",value:function(){var e=C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),OT=function(e){M(n,e);var t=j(n);function n(e,r,i){var a;return A(this,n),(a=t.call(this)).Oa=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return R(n,[{key:"initialize",value:function(){var e=C(E().mark((function e(t){var r=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn(F(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Oa.initialize(this,t);case 4:return e.next=6,AT(this.Oa.syncEngine);case 6:return e.next=8,Kb(this.Oa.remoteStore);case 8:return e.next=10,this.persistence.fi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return Nw(this.persistence,new Pw,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new G_(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new bv(t,this.persistence);return new wv(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=Iw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?R_.withCacheSize(this.cacheSizeBytes):R_.DEFAULT;return new xw(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,pb(),vb(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new ab}}]),n}(RT),DT=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e,r,!1)).Oa=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return R(n,[{key:"initialize",value:function(){var e=C(E().mark((function e(t){var r,i=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn(F(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Oa.syncEngine,e.t0=this.sharedClientState instanceof ib,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Zs:mT.bind(null,r),Xs:ET.bind(null,r),eo:CT.bind(null,r),Li:TT.bind(null,r),Ys:vT.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.fi(function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kT(i.Oa.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=pb();if(!ib.C(t))throw new Ap(Pp.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Iw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ib(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(OT),LT=function(){function e(){A(this,e)}return R(e,[{key:"initialize",value:function(){var e=C(E().mark((function e(t,n){var r=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Hx(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=lT.bind(null,this.syncEngine),e.next=12,ux(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new mx}},{key:"createDatastore",value:function(e){var t=yb(e.databaseInfo.databaseId),n=function(e){return new db(e)}(e.databaseInfo);return function(e,t,n,r){return new wb(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new xb(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return Hx(t.syncEngine,e,0)}),ub.C()?new ub:new ob)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Lx(e,t,n,r,i,a);return o&&(u.va=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Sp(t),bp("RemoteStore","RemoteStore shutting down."),n.v_.add(5),e.next=5,Ib(n);case 5:n.M_.shutdown(),n.x_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function MT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return C(E().mark((function r(){var i;return E().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var FT=function(){function e(t){A(this,e),this.observer=t,this.muted=!1}return R(e,[{key:"next",value:function(e){this.observer.next&&this.Na(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Na(this.observer.error,e):xp("Uncaught Error in snapshot listener:",e.toString())}},{key:"Ba",value:function(){this.muted=!0}},{key:"Na",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),UT=function(){function e(t,n){var r=this;A(this,e),this.La=t,this.serializer=n,this.metadata=new Np,this.buffer=new Uint8Array,this.ka=new TextDecoder("utf-8"),this.qa().then((function(e){e&&e.X_()?r.metadata.resolve(e.Z_.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Z_))))}),(function(e){return r.metadata.reject(e)}))}return R(e,[{key:"close",value:function(){return this.La.cancel()}},{key:"getMetadata",value:function(){var e=C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xa",value:function(){var e=C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.qa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"qa",value:function(){var e=C(E().mark((function e(){var t,n,r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Qa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ka.decode(t),r=Number(n),isNaN(r)&&this.Ka("length string (".concat(n,") is not valid number")),e.next=9,this.$a(r);case 9:return i=e.sent,e.abrupt("return",new Ix(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ua",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Qa",value:function(){var e=C(E().mark((function e(){var t,n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Ua()<0)){e.next=7;break}return e.next=3,this.Wa();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Ua())<0&&this.Ka("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$a",value:function(){var e=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Wa();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Ka("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ka.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ka",value:function(e){throw this.La.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Wa",value:function(){var e=C(E().mark((function e(){var t,n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.La.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),jT=function(){function e(t){A(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return R(e,[{key:"lookup",value:function(){var e=C(E().mark((function e(t){var n,r=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Ap(Pp.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=C(E().mark((function e(t,n){var r,i,a,o,u,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sp(t),i=kk(r.serializer)+"/documents",a={documents:n.map((function(e){return vk(r.serializer,e)}))},e.next=5,r.vo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=xk(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Cp(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Dg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=C(E().mark((function e(){var t,n=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Jp.fromPath(t);n.mutations.push(new Lg(r,n.precondition(r)))})),e.next=7,function(){var e=C(E().mark((function e(t,n){var r,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sp(t),i=kk(r.serializer)+"/documents",a={writes:n.map((function(e){return Tk(r.serializer,e)}))},e.next=3,r.So("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ip();t=Hp.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Ap(Pp.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Hp.min())?kg.exists(!1):kg.updateTime(t):kg.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Hp.min()))throw new Ap(Pp.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kg.updateTime(t)}return kg.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),VT=function(){function e(t,n,r,i,a){A(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Ga=r.maxAttempts,this.jo=new mb(this.asyncQueue,"transaction_retry")}return R(e,[{key:"run",value:function(){this.Ga-=1,this.za()}},{key:"za",value:function(){var e=this;this.jo.qo(C(E().mark((function t(){var n,r;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new jT(e.datastore),(r=e.ja(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ha(t)}))}))})).catch((function(t){e.Ha(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"ja",value:function(e){try{var t=this.updateFunction(e);return!Tv(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ha",value:function(e){var t=this;this.Ga>0&&this.Ja(e)?(this.Ga-=1,this.asyncQueue.enqueueAndForget((function(){return t.za(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Ja",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Vg(t)}return!1}}]),e}(),qT=function(){function e(t,n,r,i){var a=this;A(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=gp.UNAUTHENTICATED,this.clientId=qp.V(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bp("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return bp("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return R(e,[{key:"getConfiguration",value:function(){var e=C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Ap(Pp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Np;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(C(E().mark((function n(){var r;return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=hx(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function zT(e,t){return BT.apply(this,arguments)}function BT(){return BT=C(E().mark((function e(t,n){var r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),bp("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Rw(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),BT.apply(this,arguments)}function WT(e,t){return KT.apply(this,arguments)}function KT(){return KT=C(E().mark((function e(t,n){var r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,GT(t);case 3:return r=e.sent,bp("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return ax(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return ax(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),KT.apply(this,arguments)}function HT(e){return"FirebaseError"===e.name?e.code===Pp.FAILED_PRECONDITION||e.code===Pp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function GT(e){return QT.apply(this,arguments)}function QT(){return(QT=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return bp("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,zT(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),HT(n=e.t0)){e.next=13;break}throw n;case 13:return Tp("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,zT(t,new RT);case 16:e.next=21;break;case 18:return bp("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,zT(t,new RT);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function YT(e){return $T.apply(this,arguments)}function $T(){return($T=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return bp("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,WT(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return bp("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,WT(t,new LT);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JT(e){return GT(e).then((function(e){return e.persistence}))}function XT(e){return GT(e).then((function(e){return e.localStore}))}function ZT(e){return YT(e).then((function(e){return e.remoteStore}))}function eE(e){return YT(e).then((function(e){return e.syncEngine}))}function tE(e){return YT(e).then((function(e){return e.datastore}))}function nE(e){return rE.apply(this,arguments)}function rE(){return(rE=C(E().mark((function e(t){var n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,YT(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Mx.bind(null,n.syncEngine),r.onUnlisten=Vx.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Np;return e.asyncQueue.enqueueAndForget(C(E().mark((function i(){return E().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new FT({next:function(a){t.enqueueAndForget((function(){return _x(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Ap(Pp.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Ap(Pp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Ex(Cm(n.path),a,{includeMetadataChanges:!0,Y_:!0});return gx(e,o)},i.next=3,nE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function aE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Np;return e.asyncQueue.enqueueAndForget(C(E().mark((function i(){return E().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new FT({next:function(n){t.enqueueAndForget((function(){return _x(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Ap(Pp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Ex(n,a,{includeMetadataChanges:!0,Y_:!0});return gx(e,o)},i.next=3,nE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function oE(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var uE=new Map;function sE(e,t,n){if(!n)throw new Ap(Pp.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function cE(e,t,n,r){if(!0===t&&!0===r)throw new Ap(Pp.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function lE(e){if(!Jp.isDocumentKey(e))throw new Ap(Pp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function fE(e){if(Jp.isDocumentKey(e))throw new Ap(Pp.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function hE(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Ip()}function dE(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ap(Pp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=hE(e);throw new Ap(Pp.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function pE(e,t){if(t<=0)throw new Ap(Pp.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var vE=function(){function e(t){var n,r;if(A(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Ap(Pp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ap(Pp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}cE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oE(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ap(Pp.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Ap(Pp.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Ap(Pp.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return R(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),yE=function(){function e(t,n,r,i){A(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vE({}),this._settingsFrozen=!1}return R(e,[{key:"app",get:function(){if(!this._app)throw new Ap(Pp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Ap(Pp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vE(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Op;switch(e.type){case"firstParty":return new Fp(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ap(Pp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=uE.get(e);t&&(bp("ComponentProvider","Removing Datastore"),uE.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function mE(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=dE(e,yE))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&Tp("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=gp.MOCK_USER;else{u=ie(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Ap(Pp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new gp(c)}e._authCredentials=new Dp(new Rp(u,s))}}var gE=function(){function e(t,n,r){A(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return R(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),kE=function(){function e(t,n,r){A(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return R(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new _E(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),_E=function(e){M(n,e);var t=j(n);function n(e,r,i){var a;return A(this,n),(a=t.call(this,e,r,Cm(i)))._path=i,a.type="collection",a}return R(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new kE(this.firestore,null,new Jp(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(gE);function wE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Fe(e),sE("collection","path",t),e instanceof yE){var a=Qp.fromString.apply(Qp,[t].concat(r));return fE(a),new _E(e,null,a)}if(!(e instanceof kE||e instanceof _E))throw new Ap(Pp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Qp.fromString.apply(Qp,[t].concat(r)));return fE(o),new _E(e.firestore,null,o)}function bE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Fe(e),1===arguments.length&&(t=qp.V()),sE("doc","path",t),e instanceof yE){var a=Qp.fromString.apply(Qp,[t].concat(r));return lE(a),new kE(e,null,new Jp(a))}if(!(e instanceof kE||e instanceof _E))throw new Ap(Pp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Qp.fromString.apply(Qp,[t].concat(r)));return lE(o),new kE(e.firestore,e instanceof _E?e.converter:null,new Jp(o))}function xE(e,t){return e=Fe(e),t=Fe(t),(e instanceof kE||e instanceof _E)&&(t instanceof kE||t instanceof _E)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function TE(e,t){return e=Fe(e),t=Fe(t),e instanceof gE&&t instanceof gE&&e.firestore===t.firestore&&Lm(e._query,t._query)&&e.converter===t.converter}var EE=function(){function e(){var t=this;A(this,e),this.Ya=Promise.resolve(),this.Za=[],this.Xa=!1,this.eu=[],this.tu=null,this.nu=!1,this.ru=!1,this.iu=[],this.jo=new mb(this,"async_queue_retry"),this.su=function(){var e=vb();e&&bp("AsyncQueue","Visibility state changed to "+e.visibilityState),t.jo.Ko()};var n=vb();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.su)}return R(e,[{key:"isShuttingDown",get:function(){return this.Xa}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ou(),this._u(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Xa){this.Xa=!0,this.ru=e||!1;var t=vb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.su)}}},{key:"enqueue",value:function(e){var t=this;if(this.ou(),this.Xa)return new Promise((function(){}));var n=new Np;return this._u((function(){return t.Xa&&t.ru?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Za.push(e),t.au()}))}},{key:"au",value:function(){var e=C(E().mark((function e(){var t=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Za.length){e.next=14;break}return e.prev=1,e.next=4,this.Za[0]();case 4:this.Za.shift(),this.jo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),yv(e.t0)){e.next=12;break}throw e.t0;case 12:bp("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Za.length>0&&this.jo.qo((function(){return t.au()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"_u",value:function(e){var t=this,n=this.Ya.then((function(){return t.nu=!0,e().catch((function(e){t.tu=e,t.nu=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw xp("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.nu=!1,e}))}));return this.Ya=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ou(),this.iu.indexOf(e)>-1&&(t=0);var i=fx.createAndSchedule(this,e,t,n,(function(e){return r.uu(e)}));return this.eu.push(i),i}},{key:"ou",value:function(){this.tu&&Ip()}},{key:"verifyOperationInProgress",value:function(){}},{key:"cu",value:function(){var e=C(E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Ya,e.next=3,t;case 3:if(t!==this.Ya){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"lu",value:function(e){var t,n=O(this.eu);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"hu",value:function(e){var t=this;return this.cu().then((function(){t.eu.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=O(t.eu);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.cu()}))}},{key:"Pu",value:function(e){this.iu.push(e)}},{key:"uu",value:function(e){var t=this.eu.indexOf(e);this.eu.splice(t,1)}}]),e}();function IE(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=O(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var CE=function(){function e(){A(this,e),this._progressObserver={},this._taskCompletionResolver=new Np,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return R(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),SE=function(e){M(n,e);var t=j(n);function n(e,r,i,a){var o;return A(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new EE,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return R(n,[{key:"_terminate",value:function(){return this._firestoreClient||AE(this),this._firestoreClient.terminate()}}]),n}(yE);function PE(e){return e._firestoreClient||AE(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function AE(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new wy(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,oE(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new qT(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function NE(e,t,n){var r=new Np;return e.asyncQueue.enqueue(C(E().mark((function i(){var a;return E().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,zT(e,n);case 3:return i.next=5,WT(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),HT(a=i.t0)){i.next=13;break}throw a;case 13:Tp("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function RE(e){return function(e){var t=new Np;return e.asyncQueue.enqueueAndForget(C(E().mark((function n(){return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Zx,n.next=3,eE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(PE(e=dE(e,SE)))}function OE(e){return function(e){return e.asyncQueue.enqueue(C(E().mark((function t(){var n,r;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,JT(e);case 2:return n=t.sent,t.next=5,ZT(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Sp(e);return t.v_.delete(0),Tb(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(PE(e=dE(e,SE)))}function DE(e){return function(e){return e.asyncQueue.enqueue(C(E().mark((function t(){var n,r;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,JT(e);case 2:return n=t.sent,t.next=5,ZT(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Sp(t)).v_.add(0),e.next=4,Ib(n);case 4:n.x_.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(PE(e=dE(e,SE)))}function LE(e,t){var n=PE(e=dE(e,SE)),r=new CE;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new UT(e,t)}(function(e,t){if(e instanceof Uint8Array)return MT(e,t);if(e instanceof ArrayBuffer)return MT(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?Bg().encode(e):e),t)}(n,yb(t));e.asyncQueue.enqueueAndForget(C(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=NT,t.next=3,eE(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function ME(e,t){return function(e,t){return e.asyncQueue.enqueue(C(E().mark((function n(){return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Sp(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.$r.getNamedQuery(e,t)}))},n.next=3,XT(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(PE(e=dE(e,SE)),t).then((function(t){return t?new gE(e,null,t.query):null}))}function FE(e){if(e._initialized||e._terminated)throw new Ap(Pp.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var UE=function(){function e(t){A(this,e),this._byteString=t}return R(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(dy.fromBase64String(t))}catch(t){throw new Ap(Pp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(dy.fromUint8Array(t))}}]),e}(),jE=function(){function e(){A(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Ap(Pp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $p(n)}return R(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var VE=R((function e(t){A(this,e),this._methodName=t})),qE=function(){function e(t,n){if(A(this,e),!isFinite(t)||t<-90||t>90)throw new Ap(Pp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ap(Pp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return R(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return zp(this._lat,e._lat)||zp(this._long,e._long)}}]),e}(),zE=/^__.*__$/,BE=function(){function e(t,n,r){A(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return R(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Sg(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cg(e,this.data,t,this.fieldTransforms)}}]),e}(),WE=function(){function e(t,n,r){A(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return R(e,[{key:"toMutation",value:function(e,t){return new Sg(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function KE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ip()}}var HE=function(){function e(t,n,r,i,a,o){A(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Iu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return R(e,[{key:"path",get:function(){return this.settings.path}},{key:"Tu",get:function(){return this.settings.Tu}},{key:"Eu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"du",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Eu({path:n,Au:!1});return r.Ru(e),r}},{key:"Vu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Eu({path:n,Au:!1});return r.Iu(),r}},{key:"mu",value:function(e){return this.Eu({path:void 0,Au:!0})}},{key:"fu",value:function(e){return hI(e,this.settings.methodName,this.settings.gu||!1,this.path,this.settings.pu)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Iu",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Ru(this.path.get(e))}},{key:"Ru",value:function(e){if(0===e.length)throw this.fu("Document fields must not be empty");if(KE(this.Tu)&&zE.test(e))throw this.fu('Document fields cannot begin and end with "__"')}}]),e}(),GE=function(){function e(t,n,r){A(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||yb(t)}return R(e,[{key:"yu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new HE({Tu:e,methodName:t,pu:n,path:$p.emptyPath(),Au:!1,gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function QE(e){var t=e._freezeSettings(),n=yb(e._databaseId);return new GE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function YE(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.yu(a.merge||a.mergeFields?2:0,t,n,i);sI("Data must be an object, but it was:",o,r);var u,s,c=oI(r,o);if(a.merge)u=new fy(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=O(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=cI(t,l.value,n);if(!o.contains(d))throw new Ap(Pp.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));dI(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new fy(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new BE(new Wy(c),u,s)}var $E=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Tu)throw 1===e.Tu?e.fu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.fu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(VE);function JE(e,t,n){return new HE({Tu:3,pu:t.settings.pu,methodName:e._methodName,Au:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var XE=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"_toFieldTransform",value:function(e){return new mg(e.path,new cg)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(VE),ZE=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e)).wu=r,i}return R(n,[{key:"_toFieldTransform",value:function(e){var t=JE(this,e,!0),n=this.wu.map((function(e){return aI(e,t)})),r=new lg(n);return new mg(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(VE),eI=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e)).wu=r,i}return R(n,[{key:"_toFieldTransform",value:function(e){var t=JE(this,e,!0),n=this.wu.map((function(e){return aI(e,t)})),r=new hg(n);return new mg(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(VE),tI=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e)).Su=r,i}return R(n,[{key:"_toFieldTransform",value:function(e){var t=new pg(e.serializer,ig(e.serializer,this.Su));return new mg(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(VE);function nI(e,t,n,r){var i=e.yu(1,t,n);sI("Data must be an object, but it was:",i,r);var a=[],o=Wy.empty();ry(r,(function(e,r){var u=fI(t,e,n);r=Fe(r);var s=i.Vu(u);if(r instanceof $E)a.push(u);else{var c=aI(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new fy(a);return new WE(o,u,i.fieldTransforms)}function rI(e,t,n,r,i,a){var o=e.yu(1,t,n),u=[cI(t,r,n)],s=[i];if(a.length%2!=0)throw new Ap(Pp.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(cI(t,a[c])),s.push(a[c+1]);for(var l=[],f=Wy.empty(),h=u.length-1;h>=0;--h)if(!dI(l,u[h])){var d=u[h],p=s[h];p=Fe(p);var v=o.Vu(d);if(p instanceof $E)l.push(d);else{var y=aI(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new fy(l);return new WE(f,m,o.fieldTransforms)}function iI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return aI(n,e.yu(r?4:3,t))}function aI(e,t){if(uI(e=Fe(e)))return sI("Unsupported field value:",t,e),oI(e,t);if(e instanceof VE)return function(e,t){if(!KE(t.Tu))throw t.fu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.fu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Au&&4!==t.Tu)throw t.fu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=O(e);try{for(a.s();!(n=a.n()).done;){var o=aI(n.value,t.mu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Fe(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ig(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Kp.fromDate(e);return{timestampValue:ck(t.serializer,n)}}if(e instanceof Kp){var r=new Kp(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ck(t.serializer,r)}}if(e instanceof qE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof UE)return{bytesValue:lk(t.serializer,e._byteString)};if(e instanceof kE){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.fu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:dk(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.fu("Unsupported field value: ".concat(hE(e)))}(e,t)}function oI(e,t){var n={};return iy(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ry(e,(function(e,r){var i=aI(r,t.du(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function uI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Kp||e instanceof qE||e instanceof UE||e instanceof kE||e instanceof VE)}function sI(e,t,n){if(!uI(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=hE(n);throw"an object"===r?t.fu(e+" a custom object"):t.fu(e+" "+r)}}function cI(e,t,n){if((t=Fe(t))instanceof jE)return t._internalPath;if("string"==typeof t)return fI(e,t);throw hI("Field path arguments must be of type string or ",e,!1,void 0,n)}var lI=new RegExp("[~\\*/\\[\\]]");function fI(e,t,n){if(t.search(lI)>=0)throw hI("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return V(jE,je(t.split(".")))._internalPath}catch(sl){throw hI("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function hI(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Ap(Pp.INVALID_ARGUMENT,u+e+s)}function dI(e,t){return e.some((function(e){return e.isEqual(t)}))}var pI=function(){function e(t,n,r,i,a){A(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return R(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new kE(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new vI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(yI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),vI=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"data",value:function(){return yn(F(n.prototype),"data",this).call(this)}}]),n}(pI);function yI(e,t){return"string"==typeof t?fI(e,t):t instanceof jE?t._internalPath:t._delegate._internalPath}function mI(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ap(Pp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gI=R((function e(){A(this,e)})),kI=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n)}(gI);function _I(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof gI&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof bI})).length,n=e.filter((function(e){return e instanceof wI})).length;if(t>1||t>0&&n>0)throw new Ap(Pp.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=O(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var wI=function(e){M(n,e);var t=j(n);function n(e,r,i){var a;return A(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return R(n,[{key:"_apply",value:function(e){var t=this._parse(e);return DI(e._query,t),new gE(e.firestore,e.converter,Om(e._query,t))}},{key:"_parse",value:function(e){var t=QE(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Ap(Pp.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){OI(o,a);var s,c=[],l=O(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(RI(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=RI(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||OI(o,a),u=iI(n,t,o,"in"===a||"not-in"===a);return Zy.create(i,a,u)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(kI);var bI=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return R(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:em.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=O(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;DI(r,a),r=Om(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new gE(e.firestore,e.converter,Om(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(gI);var xI=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return R(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Ap(Pp.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ap(Pp.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $y(t,n)}(e._query,this._field,this._direction);return new gE(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Em(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(kI);var TI=function(e){M(n,e);var t=j(n);function n(e,r,i){var a;return A(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return R(n,[{key:"_apply",value:function(e){return new gE(e.firestore,e.converter,Dm(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(kI);var EI=function(e){M(n,e);var t=j(n);function n(e,r,i){var a;return A(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return R(n,[{key:"_apply",value:function(e){var t=NI(e,this.type,this._docOrFields,this._inclusive);return new gE(e.firestore,e.converter,function(e,t){return new Em(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(kI);function II(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return EI._create("startAt",t,!0)}function CI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return EI._create("startAfter",t,!1)}var SI=function(e){M(n,e);var t=j(n);function n(e,r,i){var a;return A(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return R(n,[{key:"_apply",value:function(e){var t=NI(e,this.type,this._docOrFields,this._inclusive);return new gE(e.firestore,e.converter,function(e,t){return new Em(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(kI);function PI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return SI._create("endBefore",t,!1)}function AI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return SI._create("endAt",t,!0)}function NI(e,t,n,r){if(n[0]=Fe(n[0]),n[0]instanceof pI)return function(e,t,n,r,i){if(!r)throw new Ap(Pp.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=O(Am(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Ry(t,r.key));else{var c=r.data.field(s.field);if(gy(c))throw new Ap(Pp.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Ap(Pp.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Gy(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=QE(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Ap(Pp.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Ap(Pp.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Pm(e)&&-1!==c.indexOf("/"))throw new Ap(Pp.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Qp.fromString(c));if(!Jp.isDocumentKey(l))throw new Ap(Pp.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Jp(l);u.push(Ry(t,f))}else{var h=iI(n,r,c);u.push(h)}}return new Gy(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function RI(e,t,n){if("string"==typeof(n=Fe(n))){if(""===n)throw new Ap(Pp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pm(t)&&-1!==n.indexOf("/"))throw new Ap(Pp.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Qp.fromString(n));if(!Jp.isDocumentKey(r))throw new Ap(Pp.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ry(e,new Jp(r))}if(n instanceof kE)return Ry(e,n._key);throw new Ap(Pp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(hE(n),"."))}function OI(e,t){if(!Array.isArray(e)||0===e.length)throw new Ap(Pp.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function DI(e,t){var n=function(e,t){var n,r=O(e);try{for(r.s();!(n=r.n()).done;){var i,a=O(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Ap(Pp.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Ap(Pp.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}var LI=function(){function e(){A(this,e)}return R(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ey(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yy(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(my(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ip()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return ry(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new qE(yy(e.latitude),yy(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=ky(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(_y(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=vy(e);return new Kp(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Qp.fromString(e);Cp(Fk(n));var r=new by(n.get(1),n.get(3)),i=new Jp(n.popFirst(5));return r.isEqual(t)||xp("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function MI(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var FI=function(e){M(n,e);var t=j(n);function n(e){var r;return A(this,n),(r=t.call(this)).firestore=e,r}return R(n,[{key:"convertBytes",value:function(e){return new UE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new kE(this.firestore,null,t)}}]),n}(LI);var UI=function(){function e(t,n){A(this,e),this.hasPendingWrites=t,this.fromCache=n}return R(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),jI=function(e){M(n,e);var t=j(n);function n(e,r,i,a,o,u){var s;return A(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return R(n,[{key:"exists",value:function(){return yn(F(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new VI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(yI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(pI),VI=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return yn(F(n.prototype),"data",this).call(this,e)}}]),n}(jI),qI=function(){function e(t,n,r,i){A(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new UI(i.hasPendingWrites,i.fromCache),this.query=r}return R(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new VI(n._firestore,n._userDataWriter,r.key,r,new UI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ap(Pp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new VI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new UI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new VI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new UI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:zI(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function zI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ip()}}function BI(e,t){return e instanceof jI&&t instanceof jI?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof qI&&t instanceof qI&&e._firestore===t._firestore&&TE(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var WI=function(e){M(n,e);var t=j(n);function n(e){var r;return A(this,n),(r=t.call(this)).firestore=e,r}return R(n,[{key:"convertBytes",value:function(e){return new UE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new kE(this.firestore,null,t)}}]),n}(LI);function KI(e){e=dE(e,kE);var t=dE(e.firestore,SE),n=PE(t),r=new WI(t);return function(e,t){var n=new Np;return e.asyncQueue.enqueueAndForget(C(E().mark((function r(){return E().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=C(E().mark((function e(t,n,r){var i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Sp(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Ap(Pp.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=hx(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,XT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new jI(t,r,e._key,n,new UI(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function HI(e){e=dE(e,gE);var t=dE(e.firestore,SE),n=PE(t),r=new WI(t);return mI(e._query),aE(n,e._query).then((function(n){return new qI(t,r,e,n)}))}function GI(e){e=dE(e,gE);var t=dE(e.firestore,SE),n=PE(t),r=new WI(t);return function(e,t){var n=new Np;return e.asyncQueue.enqueueAndForget(C(E().mark((function r(){return E().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=C(E().mark((function e(t,n,r){var i,a,o,u,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,zw(t,n,!0);case 3:i=e.sent,a=new Rx(n,i.hs),o=a.la(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=hx(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,XT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new qI(t,r,e,n)}))}function QI(e){e=dE(e,gE);var t=dE(e.firestore,SE),n=PE(t),r=new WI(t);return aE(n,e._query,{source:"server"}).then((function(n){return new qI(t,r,e,n)}))}function YI(e,t,n){e=dE(e,kE);var r=dE(e.firestore,SE),i=MI(e.converter,t,n);return ZI(r,[YE(QE(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,kg.none())])}function $I(e,t,n){e=dE(e,kE);for(var r=dE(e.firestore,SE),i=QE(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return ZI(r,[("string"==typeof(t=Fe(t))||t instanceof jE?rI(i,"updateDoc",e._key,t,n,o):nI(i,"updateDoc",e._key,t)).toMutation(e._key,kg.exists(!0))])}function JI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Fe(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||IE(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(IE(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof kE)l=dE(e.firestore,SE),f=Cm(e._key.path),c={next:function(t){n[s]&&n[s](eC(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=dE(e,gE);l=dE(p.firestore,SE),f=p._query;var v=new WI(l);c={next:function(e){n[s]&&n[s](new qI(l,v,p,e))},error:n[s+1],complete:n[s+2]},mI(e._query)}return function(e,t,n,r){var i=new FT(r),a=new Ex(t,i,n);return e.asyncQueue.enqueueAndForget(C(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=gx,t.next=3,nE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Ba(),e.asyncQueue.enqueueAndForget(C(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=_x,t.next=3,nE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(PE(l),f,h,c)}function XI(e,t){return function(e,t){var n=new FT(t);return e.asyncQueue.enqueueAndForget(C(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Sp(e).Q_.add(t),t.next()},t.next=3,nE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Ba(),e.asyncQueue.enqueueAndForget(C(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Sp(e).Q_.delete(t)},t.next=3,nE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(PE(e=dE(e,SE)),IE(t)?t:{next:t})}function ZI(e,t){return function(e,t){var n=new Np;return e.asyncQueue.enqueueAndForget(C(E().mark((function r(){return E().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=zx,r.next=3,eE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(PE(e),t)}function eC(e,t,n){var r=n.docs.get(t._key),i=new WI(e);return new jI(e,i,t._key,r,new UI(n.hasPendingWrites,n.fromCache),t.converter)}var tC={maxAttempts:5},nC=function(){function e(t,n){A(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=QE(t)}return R(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=rC(e,this._firestore),i=MI(r.converter,t,n),a=YE(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,kg.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=rC(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Fe(t))||t instanceof jE?rI(this._dataReader,"WriteBatch.update",i._key,t,n,o):nI(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,kg.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=rC(e,this._firestore);return this._mutations=this._mutations.concat(new Dg(t._key,kg.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Ap(Pp.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function rC(e,t){if((e=Fe(e)).firestore!==t)throw new Ap(Pp.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var iC=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e,r))._firestore=e,i}return R(n,[{key:"get",value:function(e){var t=this,r=rC(e,this._firestore),i=new WI(this._firestore);return yn(F(n.prototype),"get",this).call(this,e).then((function(e){return new jI(t._firestore,i,r._key,e._document,new UI(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){A(this,e),this._firestore=t,this._transaction=n,this._dataReader=QE(t)}return R(e,[{key:"get",value:function(e){var t=this,n=rC(e,this._firestore),r=new FI(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Ip();var i=e[0];if(i.isFoundDocument())return new pI(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new pI(t._firestore,r,n._key,null,n.converter);throw Ip()}))}},{key:"set",value:function(e,t,n){var r=rC(e,this._firestore),i=MI(r.converter,t,n),a=YE(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=rC(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Fe(t))||t instanceof jE?rI(this._dataReader,"Transaction.update",i._key,t,n,o):nI(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=rC(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function aC(e,t,n){e=dE(e,SE);var r=Object.assign(Object.assign({},tC),n);return function(e){if(e.maxAttempts<1)throw new Ap(Pp.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Np;return e.asyncQueue.enqueueAndForget(C(E().mark((function i(){var a;return E().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,tE(e);case 2:a=i.sent,new VT(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(PE(e),(function(n){return t(new iC(e,n))}),r)}function oC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ZE("arrayUnion",t)}function uC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new eI("arrayRemove",t)}new WeakMap;!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){kp=e}(Mt),Pt(new Ve("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new SE(new Lp(e.getProvider("auth-internal")),new jp(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ap(Pp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new by(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),zt(mp,"4.3.0",e),zt(mp,"4.3.0","esm2017")}();function sC(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ap("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function cC(){if("undefined"===typeof Uint8Array)throw new Ap("unimplemented","Uint8Arrays are not available in this environment.")}function lC(){if("undefined"==typeof atob)throw new Ap("unimplemented","Blobs are unavailable in Firestore in this environment.")}var fC=function(){function e(t){A(this,e),this._delegate=t}return R(e,[{key:"toBase64",value:function(){return lC(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return cC(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return lC(),new e(UE.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return cC(),new e(UE.fromUint8Array(t))}}]),e}();function hC(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=O(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var dC=function(){function e(){A(this,e)}return R(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){FE(e=dE(e,SE));var n=PE(e);if(n._uninitializedComponentsProvider)throw new Ap(Pp.FAILED_PRECONDITION,"SDK cache is already specified.");Tp("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new LT;return NE(n,i,new OT(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){FE(e=dE(e,SE));var t=PE(e);if(t._uninitializedComponentsProvider)throw new Ap(Pp.FAILED_PRECONDITION,"SDK cache is already specified.");Tp("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new LT;return NE(t,r,new DT(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Ap(Pp.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Np;return e._queue.enqueueAndForgetEvenWhileRestricted(C(E().mark((function n(){return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=C(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dv.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,dv.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Iw(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),pC=function(){function e(t,n,r){var i=this;A(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof by||(this._appCompat=t)}return R(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Tp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};mE(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return OE(this._delegate)}},{key:"disableNetwork",value:function(){return DE(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&cE("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return RE(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return XI(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Ap("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new SC(this,wE(this._delegate,e))}catch(t){throw _C(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new kC(this,bE(this._delegate,e))}catch(t){throw _C(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new EC(this,function(e,t){if(e=dE(e,yE),sE("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ap(Pp.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new gE(e,null,function(e){return new Em(Qp.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw _C(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return aC(this._delegate,(function(n){return e(new yC(t,n))}))}},{key:"batch",value:function(){var e=this;return PE(this._delegate),new mC(new nC(this._delegate,(function(t){return ZI(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return LE(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return ME(this._delegate,e).then((function(e){return e?new EC(t,e):null}))}}]),e}(),vC=function(e){M(n,e);var t=j(n);function n(e){var r;return A(this,n),(r=t.call(this)).firestore=e,r}return R(n,[{key:"convertBytes",value:function(e){return new fC(new UE(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return kC.forKey(t,this.firestore,null)}}]),n}(LI);var yC=function(){function e(t,n){A(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new vC(t)}return R(e,[{key:"get",value:function(e){var t=this,n=PC(e);return this._delegate.get(n).then((function(e){return new xC(t._firestore,new jI(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=PC(e);return n?(sC("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=PC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=PC(e);return this._delegate.delete(t),this}}]),e}(),mC=function(){function e(t){A(this,e),this._delegate=t}return R(e,[{key:"set",value:function(e,t,n){var r=PC(e);return n?(sC("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=PC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=PC(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),gC=function(){function e(t,n,r){A(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return R(e,[{key:"fromFirestore",value:function(e,t){var n=new VI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new TC(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new vC(t),n),i.set(n,a)),a}}]),e}();gC.INSTANCES=new WeakMap;var kC=function(){function e(t,n){A(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new vC(t)}return R(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new SC(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new SC(this.firestore,wE(this._delegate,e))}catch(t){throw _C(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Fe(e))instanceof kE&&xE(this._delegate,e)}},{key:"set",value:function(e,t){t=sC("DocumentReference.set",t);try{return t?YI(this._delegate,e,t):YI(this._delegate,e)}catch(n){throw _C(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?$I(this._delegate,e):$I.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw _C(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return ZI(dE((e=this._delegate).firestore,SE),[new Dg(e._key,kg.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=wC(n),a=bC(n,(function(t){return new xC(e.firestore,new jI(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return JI(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?KI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=dE(e,kE);var t=dE(e.firestore,SE);return iE(PE(t),e._key,{source:"server"}).then((function(n){return eC(t,e,n)}))}(this._delegate):function(e){e=dE(e,kE);var t=dE(e.firestore,SE);return iE(PE(t),e._key).then((function(n){return eC(t,e,n)}))}(this._delegate)).then((function(e){return new xC(t.firestore,new jI(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(gC.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Ap("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new kE(n._delegate,r,new Jp(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new kE(n._delegate,r,t))}}]),e}();function _C(e,t,n){return e.message=e.message.replace(t,n),e}function wC(e){var t,n=O(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!hC(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function bC(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=hC(e[0])?e[0]:hC(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var xC=function(){function e(t,n){A(this,e),this._firestore=t,this._delegate=n}return R(e,[{key:"ref",get:function(){return new kC(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return BI(this._delegate,e._delegate)}}]),e}(),TC=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||Ip(),t}}]),n}(xC),EC=function(){function e(t,n){A(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new vC(t)}return R(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,_I(this._delegate,function(e,t,n){var r=t,i=yI("where",e);return wI._create(i,r,n)}(t,n,r)))}catch(i){throw _C(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,_I(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=yI("orderBy",e);return xI._create(n,t)}(t,n)))}catch(r){throw _C(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,_I(this._delegate,(pE("limit",n=t),TI._create("limit",n,"F"))))}catch(n){throw _C(n,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,_I(this._delegate,(pE("limitToLast",n=t),TI._create("limitToLast",n,"L"))))}catch(n){throw _C(n,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,_I(this._delegate,II.apply(void 0,arguments)))}catch(t){throw _C(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,_I(this._delegate,CI.apply(void 0,arguments)))}catch(t){throw _C(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,_I(this._delegate,PI.apply(void 0,arguments)))}catch(t){throw _C(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,_I(this._delegate,AI.apply(void 0,arguments)))}catch(t){throw _C(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return TE(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?GI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?QI(this._delegate):HI(this._delegate)).then((function(e){return new CC(t.firestore,new qI(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=wC(n),a=bC(n,(function(t){return new CC(e.firestore,new qI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return JI(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(gC.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),IC=function(){function e(t,n){A(this,e),this._firestore=t,this._delegate=n}return R(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new TC(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),CC=function(){function e(t,n){A(this,e),this._firestore=t,this._delegate=n}return R(e,[{key:"query",get:function(){return new EC(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new TC(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new IC(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new TC(n._firestore,r))}))}},{key:"isEqual",value:function(e){return BI(this._delegate,e._delegate)}}]),e}(),SC=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return R(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new kC(this.firestore,e):null}},{key:"doc",value:function(e){try{return new kC(this.firestore,void 0===e?bE(this._delegate):bE(this._delegate,e))}catch(t){throw _C(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=dE(e.firestore,SE),r=bE(e),i=MI(e.converter,t);return ZI(n,[YE(QE(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,kg.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new kC(t.firestore,e)}))}},{key:"isEqual",value:function(e){return xE(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(gC.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(EC);function PC(e){return dE(e,kE)}var AC=function(){function e(){A(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=V(jE,n)}return R(e,[{key:"isEqual",value:function(e){return(e=Fe(e))instanceof jE&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e($p.keyField().canonicalString())}}]),e}(),NC=function(){function e(t){A(this,e),this._delegate=t}return R(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new XE("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new $E("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=oC.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=uC.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new tI("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),RC={Firestore:pC,GeoPoint:qE,Timestamp:Kp,Blob:fC,Transaction:yC,WriteBatch:mC,DocumentReference:kC,DocumentSnapshot:xC,Query:EC,QueryDocumentSnapshot:TC,QuerySnapshot:CC,CollectionReference:SC,FieldPath:AC,FieldValue:NC,setLogLevel:function(e){var t;t=e,_p.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Ve("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},RC)))}(e,(function(e,t){return new pC(e,t,new dC)})),e.registerVersion("@firebase/firestore-compat","0.3.19")}(vn);var OC,DC="firebasestorage.googleapis.com",LC="storageBucket",MC=function(e){M(n,e);var t=j(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return A(this,n),(i=t.call(this,FC(e),"Firebase Storage: ".concat(r," (").concat(FC(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(D(i),n.prototype),i}return R(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return FC(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(de);function FC(e){return"storage/"+e}function UC(){return new MC(OC.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function jC(){return new MC(OC.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function VC(){return new MC(OC.CANCELED,"User canceled the upload/download.")}function qC(){return new MC(OC.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function zC(e){return new MC(OC.INVALID_ARGUMENT,e)}function BC(){return new MC(OC.APP_DELETED,"The Firebase app was deleted.")}function WC(e){return new MC(OC.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function KC(e,t){return new MC(OC.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function HC(e){throw new MC(OC.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(OC||(OC={}));var GC,QC=function(){function e(t,n){A(this,e),this.bucket=t,this.path_=n}return R(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new MC(OC.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===DC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new MC(OC.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),YC=function(){function e(t){A(this,e),this.promise_=Promise.reject(t)}return R(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function $C(e){return"string"===typeof e||e instanceof String}function JC(e){return XC()&&e instanceof Blob}function XC(){return"undefined"!==typeof Blob&&!ue()}function ZC(e,t,n,r){if(r<t)throw zC("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw zC("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function eS(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function tS(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function nS(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(GC||(GC={}));var rS=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];A(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return R(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=UC();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?BC():VC());else i(jC())}};this.canceled_?t(0,new iS(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new iS(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===GC.NO_ERROR,a=r.getStatus();if(!n||nS(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===GC.ABORT;t(!1,new iS(!1,null,o))}else{var u=-1!==e.successCodes_.indexOf(a);t(!0,new iS(u,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),iS=R((function e(t,n,r){A(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function aS(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function oS(){for(var e=aS(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(XC())return new Blob(n);throw new MC(OC.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function uS(e){if("undefined"===typeof atob)throw t="base-64",new MC(OC.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var sS={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},cS=R((function e(t,n){A(this,e),this.data=t,this.contentType=n||null}));function lS(e,t){switch(e){case sS.RAW:return new cS(fS(t));case sS.BASE64:case sS.BASE64URL:return new cS(hS(e,t));case sS.DATA_URL:return new cS(function(e){var t=new dS(e);return t.base64?hS(sS.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw KC(sS.DATA_URL,"Malformed data URL.")}return fS(t)}(t.rest)}(t),new dS(t).contentType)}throw UC()}function fS(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function hS(e,t){switch(e){case sS.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw KC(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case sS.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw KC(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=uS(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw KC(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var dS=R((function e(t){A(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw KC(sS.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){var n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}));var pS=function(){function e(t,n){A(this,e);var r=0,i="";JC(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return R(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(JC(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(XC()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(oS.apply(null,i))}var a=n.map((function(e){return $C(e)?lS(sS.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function vS(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function yS(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function mS(e,t){return t}var gS=R((function e(t,n,r,i){A(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||mS})),kS=null;function _S(){if(kS)return kS;var e=[];e.push(new gS("bucket")),e.push(new gS("generation")),e.push(new gS("metageneration")),e.push(new gS("name","fullPath",!0));var t=new gS("name");t.xform=function(e,t){return function(e){return!$C(e)||e.length<2?e:yS(e)}(t)},e.push(t);var n=new gS("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new gS("timeCreated")),e.push(new gS("updated")),e.push(new gS("md5Hash",null,!0)),e.push(new gS("cacheControl",null,!0)),e.push(new gS("contentDisposition",null,!0)),e.push(new gS("contentEncoding",null,!0)),e.push(new gS("contentLanguage",null,!0)),e.push(new gS("contentType",null,!0)),e.push(new gS("metadata","customMetadata",!0)),kS=e}function wS(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new QC(n,r);return t._makeStorageReference(i)}})}(r,e),r}function bS(e,t,n){var r=vS(t);return null===r?null:wS(e,r,n)}function xS(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var TS="prefixes",ES="items";function IS(e,t,n){var r=vS(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[TS]){var i,a=O(n[TS]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new QC(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n[ES]){var s,c=O(n[ES]);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new QC(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var CS=R((function e(t,n,r,i){A(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function SS(e){if(!e)throw UC()}function PS(e,t){return function(n,r){var i=bS(e,r,t);return SS(null!==i),i}}function AS(e,t){return function(n,r){var i=bS(e,r,t);return SS(null!==i),function(e,t,n,r){var i=vS(t);if(null===i)return null;if(!$C(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return eS("/b/"+o(i)+"/o/"+o(a),n,r)+tS({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function NS(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new MC(OC.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new MC(OC.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new MC(OC.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new MC(OC.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function RS(e){var t=NS(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new MC(OC.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function OS(e,t,n){var r=eS(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new CS(r,"GET",PS(e,n),i);return a.errorHandler=RS(t),a}function DS(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=eS(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new CS(o,"GET",function(e,t){return function(n,r){var i=IS(e,t,r);return SS(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=NS(t),s}function LS(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function MS(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=LS(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+xS(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=pS.getBlob(c,r,l);if(null===f)throw qC();var h={name:s.fullPath},d=eS(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new CS(d,"POST",PS(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=NS(t),v}var FS=R((function e(t,n,r,i){A(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function US(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){SS(!1)}return SS(!!n&&-1!==(t||["active"]).indexOf(n)),n}var jS=262144;function VS(e,t,n,r,i,a,o,u){var s=new FS(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new MC(OC.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw qC();var v=t.maxUploadRetryTime,y=new CS(n,"POST",(function(e,n){var i,o=US(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?PS(t,a)(e,n):null,new FS(u,c,"final"===o,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=u||null,y.errorHandler=NS(e),y}var qS={STATE_CHANGED:"state_changed"},zS={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function BS(e){switch(e){case"running":case"pausing":case"canceling":return zS.RUNNING;case"paused":return zS.PAUSED;case"success":return zS.SUCCESS;case"canceled":return zS.CANCELED;default:return zS.ERROR}}var WS=R((function e(t,n,r){A(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function KS(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var HS=null,GS=function(){function e(){var t=this;A(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=GC.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=GC.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=GC.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return R(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw HC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw HC("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw HC("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw HC("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw HC("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),QS=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(GS);function YS(){return HS?HS():new QS}var $S=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;A(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=_S(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(OC.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(nS(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=jC()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(OC.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return R(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=s(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=LS(t,r,i),u={name:o.fullPath},s=eS(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=xS(o,n),f=e.maxUploadRetryTime,h=new CS(s,"POST",(function(e){var t;US(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){SS(!1)}return SS($C(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=NS(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,YS,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new CS(n,"POST",(function(e){var t=US(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){SS(!1)}n||SS(!1);var i=Number(n);return SS(!isNaN(i)),new FS(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=NS(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,YS,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=jS*this._chunkMultiplier,n=new FS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=VS(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,YS,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(jS*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=OS(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,YS,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=MS(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,YS,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=VC(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=BS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new WS(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(BS(this._state)){case zS.SUCCESS:KS(this._resolve.bind(null,this.snapshot))();break;case zS.CANCELED:case zS.ERROR:KS(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(BS(this._state)){case zS.RUNNING:case zS.PAUSED:e.next&&KS(e.next.bind(e,this.snapshot))();break;case zS.SUCCESS:e.complete&&KS(e.complete.bind(e))();break;default:e.error&&KS(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),JS=function(){function e(t,n){A(this,e),this._service=t,this._location=n instanceof QC?n:QC.makeFromUrl(n,t.host)}return R(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new QC(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return yS(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new QC(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw WC(e)}}]),e}();function XS(e,t,n){return ZS.apply(this,arguments)}function ZS(){return(ZS=C(E().mark((function e(t,n,r){var i,a,o,u;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,eP(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,je(u.prefixes)),(a=n.items).push.apply(a,je(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,XS(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eP(e,t){null!=t&&"number"===typeof t.maxResults&&ZC("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=DS(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,YS)}function tP(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=eS(t.fullServerUrl(),e.host,e._protocol),a=xS(n,r),o=e.maxOperationRetryTime,u=new CS(i,"PATCH",PS(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=RS(t),u}(e.storage,e._location,t,_S());return e.storage.makeRequestWithTokens(n,YS)}function nP(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=eS(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new CS(r,"GET",AS(e,n),i);return a.errorHandler=RS(t),a}(e.storage,e._location,_S());return e.storage.makeRequestWithTokens(t,YS).then((function(e){if(null===e)throw new MC(OC.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function rP(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=eS(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new CS(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=RS(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,YS)}function iP(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new QC(e._location.bucket,n);return new JS(e.storage,r)}function aP(e,t){if(e instanceof sP){var n=e;if(null==n._bucket)throw new MC(OC.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+LC+"' property when initializing the app?");var r=new JS(n,n._bucket);return null!=t?aP(r,t):r}return void 0!==t?iP(e,t):e}function oP(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof sP)return new JS(e,t);throw zC("To use ref(service, url), the first argument must be a Storage instance.")}return aP(e,t)}function uP(e,t){var n=null===t||void 0===t?void 0:t[LC];return null==n?null:QC.makeFromBucketSpec(n,e)}var sP=function(){function e(t,n,r,i,a){A(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=DC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?QC.makeFromBucketSpec(i,this._host):uP(this._host,this.app.options)}return R(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=QC.makeFromBucketSpec(this._url,e):this._bucket=uP(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){ZC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){ZC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=C(E().mark((function e(){var t,n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=C(E().mark((function e(){var t,n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new JS(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new YC(BC());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=tS(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new rS(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=C(E().mark((function e(t,n){var r,i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=s(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),cP="@firebase/storage",lP="0.11.2",fP="storage";function hP(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new $S(e,new pS(t),n)}(e=Fe(e),t,n)}function dP(e){return function(e){e._throwIfRoot("getMetadata");var t=OS(e.storage,e._location,_S());return e.storage.makeRequestWithTokens(t,YS)}(e=Fe(e))}function pP(e){return function(e){var t={prefixes:[],items:[]};return XS(e,t).then((function(){return t}))}(e=Fe(e))}function vP(e,t){return oP(e=Fe(e),t)}function yP(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:ie(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function mP(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new sP(r,i,a,n,Mt)}Pt(new Ve(fP,mP,"PUBLIC").setMultipleInstances(!0)),zt(cP,lP,""),zt(cP,lP,"esm2017");var gP=function(){function e(t,n,r){A(this,e),this._delegate=t,this.task=n,this.ref=r}return R(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),kP=function(){function e(t,n){A(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return R(e,[{key:"snapshot",get:function(){return new gP(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new gP(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new gP(e,i,i._ref))}:{next:t.next?function(e){return t.next(new gP(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),_P=function(){function e(t,n){A(this,e),this._delegate=t,this._service=n}return R(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new wP(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new wP(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),wP=function(){function e(t,n){A(this,e),this._delegate=t,this.storage=n}return R(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return iP(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new kP(hP(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sS.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=lS(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new kP(new $S(this._delegate,new pS(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return pP(this._delegate).then((function(t){return new _P(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return eP(e=Fe(e),t)}(this._delegate,e||void 0).then((function(e){return new _P(e,t.storage)}))}},{key:"getMetadata",value:function(){return dP(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return tP(e=Fe(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return nP(Fe(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),rP(Fe(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw WC(e)}}]),e}(),bP=function(){function e(t,n){A(this,e),this.app=t,this._delegate=n}return R(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(xP(e))throw zC("ref() expected a child path but got a URL, use refFromURL instead.");return new wP(vP(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!xP(e))throw zC("refFromURL() expected a full URL but got a child path, use ref() instead.");try{QC.makeFromUrl(e,this._delegate.host)}catch(t){throw zC("refFromUrl() expected a valid full URL but got an invalid one.")}return new wP(vP(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};yP(this._delegate,e,t,n)}}]),e}();function xP(e){return/^[A-Za-z]+:\/\//.test(e)}function TP(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new bP(r,i)}!function(e){var t={TaskState:zS,TaskEvent:qS,StringFormat:sS,Storage:bP,Reference:wP};e.INTERNAL.registerComponent(new Ve("storage-compat",TP,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.2")}(vn);var EP="@firebase/database",IP="1.0.1",CP="";function SP(e){CP=e}var PP=function(){function e(t){A(this,e),this.domStorage_=t,this.prefix_="firebase:"}return R(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),me(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ye(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),AP=function(){function e(){A(this,e),this.cache_={},this.isInMemoryStorage=!0}return R(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return ke(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),NP=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new PP(t)}}catch(n){}return new AP},RP=NP("localStorage"),OP=NP("sessionStorage"),DP=new Je("@firebase/database"),LP=function(){var e=1;return function(){return e++}}(),MP=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,K(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Se;n.update(t);var r=n.digest();return Q.encodeByteArray(r)},FP=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?me(r):r,t+=" "}return t},UP=null,jP=!0,VP=function(e,t){K(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(DP.logLevel=We.VERBOSE,UP=DP.log.bind(DP),t&&OP.set("logging_enabled",!0)):"function"===typeof e?UP=e:(UP=null,OP.remove("logging_enabled"))},qP=function(){if(!0===jP&&(jP=!1,null===UP&&!0===OP.get("logging_enabled")&&VP(!0)),UP){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=FP.apply(null,t);UP(r)}},zP=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];qP.apply(void 0,[e].concat(n))}},BP=function(){var e="FIREBASE INTERNAL ERROR: "+FP.apply(void 0,arguments);DP.error(e)},WP=function(){var e="FIREBASE FATAL ERROR: ".concat(FP.apply(void 0,arguments));throw DP.error(e),new Error(e)},KP=function(){var e="FIREBASE WARNING: "+FP.apply(void 0,arguments);DP.warn(e)},HP=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},GP="[MIN_NAME]",QP="[MAX_NAME]",YP=function(e,t){if(e===t)return 0;if(e===GP||t===QP)return-1;if(t===GP||e===QP)return 1;var n=rA(e),r=rA(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},$P=function(e,t){return e===t?0:e<t?-1:1},JP=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+me(t))},XP=function e(t){if("object"!==typeof t||null===t)return me(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=me(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},ZP=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function eA(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var tA=function(e){K(!HP(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var nA=new RegExp("^-?(0*)\\d{1,10}$"),rA=function(e){if(nA.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},iA=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw KP("Exception was thrown by user callback.",e),t}),Math.floor(0))}},aA=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},oA=function(){function e(t,n){var r=this;A(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return R(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){KP('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),uA=function(){function e(t,n,r){var i=this;A(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return R(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(qP("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',KP(e)}}]),e}(),sA=function(){function e(t){A(this,e),this.accessToken=t}return R(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();sA.OWNER="owner";var cA="5",lA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,fA="ac",hA="websocket",dA="long_polling",pA=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];A(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=RP.get("host:"+t)||this._host}return R(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&RP.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function vA(e,t,n){var r;if(K("string"===typeof t,"typeof type must == string"),K("object"===typeof n,"typeof params must == object"),t===hA)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==dA)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return eA(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var yA=function(){function e(){A(this,e),this.counters_={}}return R(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ke(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Z(void 0,this.counters_)}}]),e}(),mA={},gA={};function kA(e){var t=e.toString();return mA[t]||(mA[t]=new yA),mA[t]}var _A=function(){function e(t){A(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return R(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&iA((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),1;n.currentResponseNum++};this.pendingResponses[this.currentResponseNum]&&!r(););}}]),e}(),wA="start",bA=function(){function e(t,n,r,i,a,o,u){var s=this;A(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zP(t),this.stats_=kA(n),this.urlFn=function(e){return s.appCheckToken&&(e[fA]=s.appCheckToken),vA(n,dA,e)}}return R(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new _A(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(fe()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new xA((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===wA)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[wA]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=cA,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[fA]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&lA.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=me(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=$(t),r=ZP(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!fe()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=me(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!fe()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),xA=function(){function e(t,n,r,i){if(A(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,fe())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=LP(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){qP("frame writing exception"),u.stack&&qP(u.stack),qP(u)}}}return R(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;fe()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){qP("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||qP("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),TA=null;"undefined"!==typeof MozWebSocket?TA=MozWebSocket:"undefined"!==typeof WebSocket&&(TA=WebSocket);var EA=function(){function e(t,n,r,i,a,o,u){A(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zP(this.connId),this.stats_=kA(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return R(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,RP.set("previous_websocket_failure",!0);try{var r;if(fe()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(cA,"/").concat(CP,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/nwitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyDv4H2YYw1GZM4ci6BpJCxQD3fG-y5Ipj0",REACT_APP_APP_ID:"1:496165555411:web:5249d21e9d8d4787aad826",REACT_APP_AUTH_DOMAIN:"nwitter-bf428.firebaseapp.com",REACT_APP_DATABASE_URL:"",REACT_APP_MEASUR_ID:"",REACT_APP_MESSAGIN_ID:"496165555411",REACT_APP_PROJECT_ID:"nwitter-bf428",REACT_APP_STORAGE_BUCKET:"nwitter-bf428.appspot.com"},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new TA(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){RP.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ye(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(K(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=me(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=ZP(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=cA,!fe()&&"undefined"!==typeof location&&location.hostname&&lA.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[fA]=r),i&&(a.p=i),vA(e,hA,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==TA&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return RP.isInMemoryStorage||!0===RP.get("previous_websocket_failure")}}]),e}();EA.responsesRequiredToBeHealthy=2,EA.healthyTimeout=3e4;var IA=function(){function e(t){A(this,e),this.initTransports_(t)}return R(e,[{key:"initTransports_",value:function(t){var n=EA&&EA.isAvailable(),r=n&&!EA.previouslyFailed();if(t.webSocketOnly&&(n||KP("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[EA];else{var i,a=this.transports_=[],o=O(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[bA,EA]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();IA.globalTransportInitialized_=!1;var CA=function(){function e(t,n,r,i,a,o,u,s,c,l){A(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zP("c:"+this.id+":"),this.transportManager_=new IA(n),this.log_("Connection created"),this.start_()}return R(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=aA((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=JP("t",e),n=JP("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=JP("t",e),n=JP("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=JP("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?BP("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):BP("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),cA!==n&&KP("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),aA((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):aA((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(RP.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),SA=function(){function e(){A(this,e)}return R(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),PA=function(){function e(t){A(this,e),this.allowedEvents_=t,this.listeners_={},K(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return R(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=je(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){K(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),AA=function(e){M(n,e);var t=j(n);function n(){var e;return A(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||oe()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return R(n,[{key:"getInitialEvent",value:function(e){return K("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(PA),NA=32,RA=768,OA=function(){function e(t,n){if(A(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return R(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function DA(){return new OA("")}function LA(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function MA(e){return e.pieces_.length-e.pieceNum_}function FA(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new OA(e.pieces_,t)}function UA(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function jA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function VA(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new OA(t,0)}function qA(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof OA)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new OA(n,0)}function zA(e){return e.pieceNum_>=e.pieces_.length}function BA(e,t){var n=LA(e),r=LA(t);if(null===n)return t;if(n===r)return BA(FA(e),FA(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function WA(e,t){for(var n=jA(e,0),r=jA(t,0),i=0;i<n.length&&i<r.length;i++){var a=YP(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function KA(e,t){if(MA(e)!==MA(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function HA(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(MA(e)>MA(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var GA=R((function e(t,n){A(this,e),this.errorPrefix_=n,this.parts_=jA(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Me(this.parts_[r]);QA(this)}));function QA(e){if(e.byteLength_>RA)throw new Error(e.errorPrefix_+"has a key path longer than "+RA+" bytes ("+e.byteLength_+").");if(e.parts_.length>NA)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+NA+") or object contains a cycle "+YA(e))}function YA(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var $A=function(e){M(n,e);var t=j(n);function n(){var e,r,i;return A(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return R(n,[{key:"getInitialEvent",value:function(e){return K("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(PA),JA=1e3,XA=function(e){M(n,e);var t=j(n);function n(e,r,i,a,o,u,s,c){var l;if(A(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=zP("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=JA,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!fe())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return $A.getInstance().on("visible",l.onVisible_,D(l)),-1===e.host.indexOf("fblocal")&&AA.getInstance().on("online",l.onOnline_,D(l)),l}return R(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(me(i)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new re,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=ge(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=ge(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+me(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):BP("Unrecognized action received from server: "+me(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=JA,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=JA,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=JA),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=C(E().mark((function e(){var t,r,i,a,o,u,c,l,f,h,d,p,v,y,m=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,i())},f=function(e){K(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)},this.realtime_={close:l,sendRequest:f},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:d=e.sent,p=s(d,2),v=p[0],y=p[1],u?qP("getToken() completed but was canceled"):(qP("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,c=new CA(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){KP(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&KP(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){qP("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){qP("Resuming connection for reason: "+e),delete this.interruptReasons_[e],we(this.interruptReasons_)&&(this.reconnectDelay_=JA,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return XP(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new OA(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){qP("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){qP("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=O(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=O(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";fe()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+CP.replace(/\./g,"-")]=1,oe()?e["framework.cordova"]=1:ce()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=AA.getInstance().currentlyOnline();return we(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&ke(e,"w")){var n=_e(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();KP("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(SA);XA.nextPersistentConnectionId_=0,XA.nextConnectionId_=0;var ZA,eN=function(){function e(t,n){A(this,e),this.name=t,this.node=n}return R(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),tN=function(){function e(){A(this,e)}return R(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new eN(GP,e),r=new eN(GP,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return eN.MIN}}]),e}(),nN=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"compare",value:function(e,t){return YP(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw H("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return eN.MIN}},{key:"maxPost",value:function(){return new eN(QP,ZA)}},{key:"makePost",value:function(e,t){return K("string"===typeof e,"KeyIndex indexValue must always be a string."),new eN(e,ZA)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return ZA},set:function(e){ZA=e}}]),n}(tN),rN=new nN,iN=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;A(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return R(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),aN=function(){function e(t,n,r,i,a){A(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:sN.EMPTY_NODE,this.right=null!=a?a:sN.EMPTY_NODE}return R(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return sN.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return sN.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();aN.RED=!0,aN.BLACK=!1;var oN,uN=function(){function e(){A(this,e)}return R(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new aN(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),sN=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;A(this,e),this.comparator_=t,this.root_=n}return R(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,aN.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,aN.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new iN(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new iN(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new iN(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new iN(this.root_,null,this.comparator_,!0,e)}}]),e}();function cN(e,t){return YP(e.name,t.name)}function lN(e,t){return YP(e,t)}sN.EMPTY_NODE=new uN;var fN,hN,dN,pN=function(e){return"number"===typeof e?"number:"+tA(e):"string:"+e},vN=function(e){if(e.isLeafNode()){var t=e.val();K("string"===typeof t||"number"===typeof t||"object"===typeof t&&ke(t,".sv"),"Priority must be a string or number.")}else K(e===oN||e.isEmpty(),"priority of unexpected type.");K(e===oN||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},yN=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;A(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,K(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),vN(this.priorityNode_)}return R(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return zA(t)?this:".priority"===LA(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=LA(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(K(".priority"!==r||1===MA(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(FA(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+pN(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?tA(this.value_):this.value_,this.lazyHash_=MP(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(K(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return K(i>=0,"Unknown leaf type: "+n),K(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return fN},set:function(e){fN=e}}]),e}();yN.VALUE_TYPE_ORDER=["object","boolean","number","string"];var mN,gN,kN=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?YP(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return eN.MIN}},{key:"maxPost",value:function(){return new eN(QP,new yN("[PRIORITY-POST]",dN))}},{key:"makePost",value:function(e,t){var n=hN(e);return new eN(t,new yN("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(tN),_N=new kN,wN=Math.log(2),bN=function(){function e(t){A(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/wN,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return R(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),xN=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new aN(o,a.node,aN.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new aN(o,a.node,aN.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],f=n?n(l):l;s(new aN(f,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?u(f,aN.BLACK):(u(f,aN.BLACK),u(f,aN.RED))}return a}(new bN(e.length));return new sN(r||t,a)},TN={},EN=function(){function e(t,n){A(this,e),this.indexes_=t,this.indexSet_=n}return R(e,[{key:"get",value:function(e){var t=_e(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof sN?t:null}},{key:"hasIndex",value:function(e){return ke(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){K(t!==rN,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(eN.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?xN(i,t.getCompare()):TN;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(be(this.indexes_,(function(e,i){var a=_e(r.indexSet_,i);if(K(a,"Missing index implementation for "+i),e===TN){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(eN.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),xN(o,a.getCompare())}return TN}var c=n.get(t.name),l=e;return c&&(l=l.remove(new eN(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(be(this.indexes_,(function(e){if(e===TN)return e;var r=n.get(t.name);return r?e.remove(new eN(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return K(TN&&_N,"ChildrenNode.ts has not been loaded"),mN=mN||new e({".priority":TN},{".priority":_N})}}]),e}(),IN=function(){function e(t,n,r){A(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&vN(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return R(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||gN}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?gN:t}},{key:"getChild",value:function(e){var t=LA(e);return null===t?this:this.getImmediateChild(t).getChild(FA(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(K(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new eN(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?gN:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=LA(e);if(null===n)return t;K(".priority"!==LA(e)||1===MA(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(FA(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(_N,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+pN(this.getPriority().val())+":"),this.forEachChild(_N,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":MP(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new eN(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new eN(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new eN(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,eN.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,eN.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===CN?-1:0}},{key:"withIndex",value:function(t){if(t===rN||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===rN||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(_N),r=t.getIterator(_N),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===rN?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return gN||(gN=new e(new sN(lN),null,EN.Default))}}]),e}();IN.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var CN=new(function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.call(this,new sN(lN),IN.EMPTY_NODE,EN.Default)}return R(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return IN.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(IN));Object.defineProperties(eN,{MIN:{value:new eN(GP,IN.EMPTY_NODE)},MAX:{value:new eN(QP,CN)}}),nN.__EMPTY_NODE=IN.EMPTY_NODE,yN.__childrenNodeConstructor=IN,oN=CN,function(e){dN=e}(CN);var SN=!0;function PN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return IN.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),K(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new yN(e,PN(t));if(e instanceof Array||!SN){var n=IN.EMPTY_NODE;return eA(e,(function(t,r){if(ke(e,t)&&"."!==t.substring(0,1)){var i=PN(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(PN(t))}var r=[],i=!1;if(eA(e,(function(e,t){if("."!==e.substring(0,1)){var n=PN(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new eN(e,n)))}})),0===r.length)return IN.EMPTY_NODE;var a=xN(r,cN,(function(e){return e.name}),lN);if(i){var o=xN(r,_N.getCompare());return new IN(a,PN(t),new EN({".priority":o},{".priority":_N}))}return new IN(a,PN(t),EN.Default)}!function(e){hN=e}(PN);var AN=function(e){M(n,e);var t=j(n);function n(e){var r;return A(this,n),(r=t.call(this)).indexPath_=e,K(!zA(e)&&".priority"!==LA(e),"Can't create PathIndex with empty path or .priority key"),r}return R(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?YP(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=PN(e),r=IN.EMPTY_NODE.updateChild(this.indexPath_,n);return new eN(t,r)}},{key:"maxPost",value:function(){var e=IN.EMPTY_NODE.updateChild(this.indexPath_,CN);return new eN(QP,e)}},{key:"toString",value:function(){return jA(this.indexPath_,0).join("/")}}]),n}(tN),NN=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?YP(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return eN.MIN}},{key:"maxPost",value:function(){return eN.MAX}},{key:"makePost",value:function(e,t){var n=PN(e);return new eN(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(tN),RN=new NN;function ON(e){return{type:"value",snapshotNode:e}}function DN(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function LN(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function MN(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var FN=function(){function e(t){A(this,e),this.index_=t}return R(e,[{key:"updateChild",value:function(e,t,n,r,i,a){K(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(LN(t,o)):K(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(DN(t,n)):a.trackChildChange(MN(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(_N,(function(e,r){t.hasChild(e)||n.trackChildChange(LN(e,r))})),t.isLeafNode()||t.forEachChild(_N,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(MN(t,r,i))}else n.trackChildChange(DN(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?IN.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),UN=function(){function e(t){A(this,e),this.indexedFilter_=new FN(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return R(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new eN(t,n))||(n=IN.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=IN.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(IN.EMPTY_NODE);var i=this;return t.forEachChild(_N,(function(e,t){i.matches(new eN(e,t))||(r=r.updateImmediateChild(e,IN.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),jN=function(){function e(t){var n=this;A(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new UN(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return R(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new eN(t,n))||(n=IN.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=IN.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=IN.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var u;r=(r=t.withIndex(this.index_)).updatePriority(IN.EMPTY_NODE),u=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var s=0;u.hasNext();){var c=u.getNext();s<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?s++:r=r.updateImmediateChild(c.name,IN.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;K(u.numChildren()===this.limit_,"");var s=new eN(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var f=u.getImmediateChild(t),h=r.getChildAfterChild(this.index_,c,this.reverse_);null!=h&&(h.name===t||u.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var d=null==h?1:a(h,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(MN(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(LN(t,f));var p=u.updateImmediateChild(t,IN.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(DN(h.name,h.node)),p.updateImmediateChild(h.name,h.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(LN(c.name,c.node)),i.trackChildChange(DN(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,IN.EMPTY_NODE)):e}}]),e}(),VN=function(){function e(){A(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_N}return R(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:GP}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:QP}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===_N}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function qN(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function zN(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function BN(e,t){var n=e.copy();return n.index_=t,n}function WN(e){var t,n={};if(e.isDefault())return n;if(e.index_===_N?t="$priority":e.index_===RN?t="$value":e.index_===rN?t="$key":(K(e.index_ instanceof AN,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=me(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=me(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+me(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=me(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+me(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function KN(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==_N&&(t.i=e.index_.toString()),t}var HN=function(e){M(n,e);var t=j(n);function n(e,r,i,a){var o;return A(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=zP("p:rest:"),o.listens_={},o}return R(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=WN(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),_e(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=WN(e._queryParams),r=e._path.toString(),i=new re;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=s(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var c=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+Ee(n);t.log_("Sending REST request for "+c);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+c+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=ye(l.responseText)}catch(n){KP("Failed to parse JSON response for "+c+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&KP("Got unsuccessful REST response for "+c+" Status: "+l.status),r(l.status);r=null}},l.open("GET",c,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(K(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(SA),GN=function(){function e(){A(this,e),this.rootNode_=IN.EMPTY_NODE}return R(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function QN(){return{value:null,children:new Map}}function YN(e,t,n){if(zA(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=LA(t);e.children.has(r)||e.children.set(r,QN()),YN(e.children.get(r),t=FA(t),n)}}function $N(e,t){if(zA(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(_N,(function(t,n){YN(e,new OA(t),n)})),$N(e,t)}if(e.children.size>0){var r=LA(t);if(t=FA(t),e.children.has(r))$N(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function JN(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){JN(r,new OA(t.toString()+"/"+e),n)}))}var XN,ZN=function(){function e(t){A(this,e),this.collection_=t,this.last_=null}return R(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&eA(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),eR=function(){function e(t,n){A(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new ZN(t);var r=1e4+2e4*Math.random();aA(this.reportStats_.bind(this),Math.floor(r))}return R(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;eA(t,(function(t,i){i>0&&ke(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),aA(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function tR(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(XN||(XN={}));var nR,rR=function(){function e(t,n,r){A(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=XN.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return R(e,[{key:"operationForChild",value:function(t){if(zA(this.path)){if(null!=this.affectedTree.value)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new OA(t));return new e(DA(),n,this.revert)}return K(LA(this.path)===t,"operationForChild called for unrelated child."),new e(FA(this.path),this.affectedTree,this.revert)}}]),e}(),iR=function(){function e(t,n){A(this,e),this.source=t,this.path=n,this.type=XN.LISTEN_COMPLETE}return R(e,[{key:"operationForChild",value:function(t){return zA(this.path)?new e(this.source,DA()):new e(this.source,FA(this.path))}}]),e}(),aR=function(){function e(t,n,r){A(this,e),this.source=t,this.path=n,this.snap=r,this.type=XN.OVERWRITE}return R(e,[{key:"operationForChild",value:function(t){return zA(this.path)?new e(this.source,DA(),this.snap.getImmediateChild(t)):new e(this.source,FA(this.path),this.snap)}}]),e}(),oR=function(){function e(t,n,r){A(this,e),this.source=t,this.path=n,this.children=r,this.type=XN.MERGE}return R(e,[{key:"operationForChild",value:function(t){if(zA(this.path)){var n=this.children.subtree(new OA(t));return n.isEmpty()?null:n.value?new aR(this.source,DA(),n.value):new e(this.source,DA(),n)}return K(LA(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,FA(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),uR=function(){function e(t,n,r){A(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return R(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(zA(e))return this.isFullyInitialized()&&!this.filtered_;var t=LA(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),sR=R((function e(t){A(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function cR(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw H("Should only compare child_ events.");var r=new eN(t.childName,t.snapshotNode),i=new eN(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function lR(e,t){return{eventCache:e,serverCache:t}}function fR(e,t,n,r){return lR(new uR(t,n,r),e.serverCache)}function hR(e,t,n,r){return lR(e.eventCache,new uR(t,n,r))}function dR(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function pR(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var vR=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(nR||(nR=new sN($P)),nR);A(this,e),this.value=t,this.children=n}return R(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:DA(),value:this.value};if(zA(e))return null;var n=LA(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(FA(e),t);return null!=i?{path:qA(new OA(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(zA(t))return this;var n=LA(t),r=this.children.get(n);return null!==r?r.subtree(FA(t)):new e(null)}},{key:"set",value:function(t,n){if(zA(t))return new e(n,this.children);var r=LA(t),i=(this.children.get(r)||new e(null)).set(FA(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(zA(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=LA(t),r=this.children.get(n);if(r){var i,a=r.remove(FA(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(zA(e))return this.value;var t=LA(e),n=this.children.get(t);return n?n.get(FA(e)):null}},{key:"setTree",value:function(t,n){if(zA(t))return n;var r,i=LA(t),a=(this.children.get(i)||new e(null)).setTree(FA(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(DA(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(qA(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,DA(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(zA(e))return null;var i=LA(e),a=this.children.get(i);return a?a.findOnPath_(FA(e),qA(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,DA(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(zA(t))return this;this.value&&r(n,this.value);var i=LA(t),a=this.children.get(i);return a?a.foreachOnPath_(FA(t),qA(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(DA(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(qA(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return eA(t,(function(e,t){n=n.set(new OA(e),t)})),n}}]),e}(),yR=function(){function e(t){A(this,e),this.writeTree_=t}return R(e,null,[{key:"empty",value:function(){return new e(new vR(null))}}]),e}();function mR(e,t,n){if(zA(t))return new yR(new vR(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=BA(i,t);return a=a.updateChild(o,n),new yR(e.writeTree_.set(i,a))}var u=new vR(n),s=e.writeTree_.setTree(t,u);return new yR(s)}function gR(e,t,n){var r=e;return eA(n,(function(e,n){r=mR(r,qA(t,e),n)})),r}function kR(e,t){if(zA(t))return yR.empty();var n=e.writeTree_.setTree(t,new vR(null));return new yR(n)}function _R(e,t){return null!=wR(e,t)}function wR(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(BA(n.path,t)):null}function bR(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(_N,(function(e,n){t.push(new eN(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new eN(e,n.value))})),t}function xR(e,t){if(zA(t))return e;var n=wR(e,t);return new yR(null!=n?new vR(n):e.writeTree_.subtree(t))}function TR(e){return e.writeTree_.isEmpty()}function ER(e,t){return IR(DA(),e.writeTree_,t)}function IR(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(K(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=IR(qA(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(qA(e,".priority"),r)),n}function CR(e,t){return VR(t,e)}function SR(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));K(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&PR(u,r.path)?i=!1:HA(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=NR(e.allWrites,AR,DA()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=kR(e.visibleWrites,r.path):eA(r.children,(function(t){e.visibleWrites=kR(e.visibleWrites,qA(r.path,t))}));return!0}return!1}function PR(e,t){if(e.snap)return HA(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&HA(qA(e.path,n),t))return!0;return!1}function AR(e){return e.visible}function NR(e,t,n){for(var r=yR.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)HA(n,o)?r=mR(r,u=BA(n,o),a.snap):HA(o,n)&&(u=BA(o,n),r=mR(r,DA(),a.snap.getChild(u)));else{if(!a.children)throw H("WriteRecord should have .snap or .children");if(HA(n,o))r=gR(r,u=BA(n,o),a.children);else if(HA(o,n))if(zA(u=BA(o,n)))r=gR(r,DA(),a.children);else{var s=_e(a.children,LA(u));if(s){var c=s.getChild(FA(u));r=mR(r,DA(),c)}}}}}return r}function RR(e,t,n,r,i){if(r||i){var a=xR(e.visibleWrites,t);if(!i&&TR(a))return n;if(i||null!=n||_R(a,DA())){return ER(NR(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(HA(e.path,t)||HA(t,e.path))}),t),n||IN.EMPTY_NODE)}return null}var o=wR(e.visibleWrites,t);if(null!=o)return o;var u=xR(e.visibleWrites,t);return TR(u)?n:null!=n||_R(u,DA())?ER(u,n||IN.EMPTY_NODE):null}function OR(e,t,n,r){return RR(e.writeTree,e.treePath,t,n,r)}function DR(e,t){return function(e,t,n){var r=IN.EMPTY_NODE,i=wR(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(_N,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=xR(e.visibleWrites,t);return n.forEachChild(_N,(function(e,t){var n=ER(xR(a,new OA(e)),t);r=r.updateImmediateChild(e,n)})),bR(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return bR(xR(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function LR(e,t,n,r){return function(e,t,n,r,i){K(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=qA(t,n);if(_R(e.visibleWrites,a))return null;var o=xR(e.visibleWrites,a);return TR(o)?i.getChild(n):ER(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function MR(e,t){return function(e,t){return wR(e.visibleWrites,t)}(e.writeTree,qA(e.treePath,t))}function FR(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=xR(e.visibleWrites,t),c=wR(s,DA());if(null!=c)u=c;else{if(null==n)return[];u=ER(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function UR(e,t,n){return function(e,t,n,r){var i=qA(t,n),a=wR(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?ER(xR(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function jR(e,t){return VR(qA(e.treePath,t),e.writeTree)}function VR(e,t){return{treePath:e,writeTree:t}}var qR=function(){function e(){A(this,e),this.changeMap=new Map}return R(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;K("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),K(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,MN(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,LN(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,DN(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw H("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,MN(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),zR=new(function(){function e(){A(this,e)}return R(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),BR=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;A(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return R(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new uR(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return UR(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:pR(this.viewCache_),i=FR(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function WR(e,t,n,r,i){var a,o,u=new qR;if(n.type===XN.OVERWRITE){var s=n;s.source.fromUser?a=GR(e,t,s.path,s.snap,r,i,u):(K(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!zA(s.path),a=HR(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===XN.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=qA(n,r);QR(t,LA(c))&&(u=GR(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=qA(n,r);QR(t,LA(c))||(u=GR(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(K(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=$R(e,t,c.path,c.children,r,i,o,u))}else if(n.type===XN.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=MR(r,n))return t;var u,s=new BR(r,t,i),c=t.eventCache.getNode();if(zA(n)||".priority"===LA(n)){var l;if(t.serverCache.isFullyInitialized())l=OR(r,pR(t));else{var f=t.serverCache.getNode();K(f instanceof IN,"serverChildren would be complete if leaf node"),l=DR(r,f)}u=e.filter.updateFullNode(c,l,a)}else{var h=LA(n),d=UR(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(u=null!=d?e.filter.updateChild(c,h,d,FA(n),s,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,IN.EMPTY_NODE,FA(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=OR(r,pR(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=MR(r,DA()),fR(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=MR(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(zA(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return HR(e,t,n,s.getNode().getChild(n),i,a,u,o);if(zA(n)){var c=new vR(null);return s.getNode().forEachChild(rN,(function(e,t){c=c.set(new OA(e),t)})),$R(e,t,n,c,i,a,u,o)}return t}var l=new vR(null);return r.foreach((function(e,t){var r=qA(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),$R(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==XN.LISTEN_COMPLETE)throw H("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=hR(t,a.getNode(),a.isFullyInitialized()||zA(n),a.isFiltered());return KR(e,o,n,r,zR,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=dR(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(ON(dR(t)))}}(t,a,f),{viewCache:a,changes:f}}function KR(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=MR(r,n))return t;if(zA(n))if(K(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=pR(t),l=DR(r,c instanceof IN?c:IN.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=OR(r,pR(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=LA(n);if(".priority"===h){K(1===MA(n),"Can't have a priority with additional path components");var d=s.getNode(),p=LR(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,y=FA(n);if(s.isCompleteForChild(h)){u=t.serverCache.getNode();var m=LR(r,n,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(h).updateChild(y,m):s.getNode().getImmediateChild(h)}else v=UR(r,h,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),h,v,y,i,a):s.getNode()}}return fR(t,o,s.isFullyInitialized()||zA(n),e.filter.filtersNodes())}function HR(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(zA(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),f,null)}else{var h=LA(n);if(!c.isCompleteForPath(n)&&MA(n)>1)return t;var d=FA(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);s=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,zR,null)}var v=hR(t,s,c.isFullyInitialized()||zA(n),l.filtersNodes());return KR(e,v,n,i,new BR(i,v,a),u)}function GR(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new BR(i,t,a);if(zA(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=fR(t,s,!0,e.filter.filtersNodes());else{var f=LA(n);if(".priority"===f)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=fR(t,s,c.isFullyInitialized(),c.isFiltered());else{var h,d=FA(n),p=c.getNode().getImmediateChild(f);if(zA(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===UA(d)&&v.getChild(VA(d)).isEmpty()?v:v.updateChild(d,r):IN.EMPTY_NODE}if(p.equals(h))u=t;else u=fR(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function QR(e,t){return e.eventCache.isCompleteForChild(t)}function YR(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function $R(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=zA(n)?r:new vR(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=YR(0,t.serverCache.getNode().getImmediateChild(n),r);c=HR(e,c,new OA(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!s){var f=YR(0,t.serverCache.getNode().getImmediateChild(n),r);c=HR(e,c,new OA(n),f,i,a,o,u)}})),c}var JR,XR=function(){function e(t,n){A(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new FN(i.getIndex()),o=(r=i).loadsAllData()?new FN(r.getIndex()):r.hasLimit()?new jN(r):new UN(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(IN.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(IN.EMPTY_NODE,s.getNode(),null),f=new uR(c,u.isFullyInitialized(),a.filtersNodes()),h=new uR(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=lR(h,f),this.eventGenerator_=new sR(this.query_)}return R(e,[{key:"query",get:function(){return this.query_}}]),e}();function ZR(e,t){var n=pR(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!zA(t)&&!n.getImmediateChild(LA(t)).isEmpty())?n.getChild(t):null}function eO(e){return 0===e.eventRegistrations_.length}function tO(e,t,n){var r=[];if(n){K(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function nO(e,t,n,r){t.type===XN.MERGE&&null!==t.source.queryId&&(K(pR(e.viewCache_),"We should always have a full cache before handling merges"),K(dR(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=WR(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,K(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),K(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),K(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,rO(e,u.changes,u.viewCache.eventCache.getNode(),null)}function rO(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),cR(e,i,"child_removed",t,r,n),cR(e,i,"child_added",t,r,n),cR(e,i,"child_moved",a,r,n),cR(e,i,"child_changed",t,r,n),cR(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var iO,aO=R((function e(){A(this,e),this.views=new Map}));function oO(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return K(null!=a,"SyncTree gave us an op for an invalid query."),nO(a,t,n,r)}var o,u=[],s=O(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(nO(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function uO(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=OR(n,i?r:null),s=!1;u?s=!0:r instanceof IN?(u=DR(n,r),s=!1):(u=IN.EMPTY_NODE,s=!1);var c=lR(new uR(u,s,!1),new uR(r,i,!1));return new XR(t,c)}return o}function sO(e,t,n,r,i,a){var o=uO(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(_N,(function(e,t){r.push(DN(e,t))})),n.isFullyInitialized()&&r.push(ON(n.getNode())),rO(e,r,n.getNode(),t)}(o,n)}function cO(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=pO(e);if("default"===i){var c,l=O(e.views.entries());try{for(l.s();!(c=l.n()).done;){var f=s(c.value,2),h=f[0],d=f[1];o=o.concat(tO(d,n,r)),eO(d)&&(e.views.delete(h),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){l.e(v)}finally{l.f()}}else{var p=e.views.get(i);p&&(o=o.concat(tO(p,n,r)),eO(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return u&&!pO(e)&&a.push(new(K(JR,"Reference.ts has not been loaded"),JR)(t._repo,t._path)),{removed:a,events:o}}function lO(e){var t,n=[],r=O(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function fO(e,t){var n,r=null,i=O(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||ZR(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function hO(e,t){if(t._queryParams.loadsAllData())return vO(e);var n=t._queryIdentifier;return e.views.get(n)}function dO(e,t){return null!=hO(e,t)}function pO(e){return null!=vO(e)}function vO(e){var t,n=O(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var yO=1,mO=R((function e(t){A(this,e),this.listenProvider_=t,this.syncPointTree_=new vR(null),this.pendingWriteTree_={visibleWrites:yR.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function gO(e,t,n,r,i){return function(e,t,n,r,i){K(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=mR(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?CO(e,new aR({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function kO(e,t,n,r){!function(e,t,n,r){K(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=gR(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=vR.fromObject(n);return CO(e,new oR({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function _O(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(SR(e.pendingWriteTree_,t)){var i=new vR(null);return null!=r.snap?i=i.set(DA(),!0):eA(r.children,(function(e){i=i.set(new OA(e),!0)})),CO(e,new rR(r.path,i,n))}return[]}function wO(e,t,n){return CO(e,new aR({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function bO(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),u=[];if(o&&("default"===t._queryIdentifier||dO(o,t))){var s=cO(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=s.removed;if(u=s.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),f=e.syncPointTree_.findOnPath(a,(function(e,t){return pO(t)}));if(l&&!f){var h=e.syncPointTree_.subtree(a);if(!h.isEmpty())for(var d=function(e){return e.fold((function(e,t,n){if(t&&pO(t))return[vO(t)];var r=[];return t&&(r=lO(t)),eA(n,(function(e,t){r=r.concat(t)})),r}))}(h),p=0;p<d.length;++p){var v=d[p],y=v.query,m=AO(e,v);e.listenProvider_.startListening(MO(y),NO(e,y),m.hashFn,m.onComplete)}}if(!f&&c.length>0&&!r)if(l){e.listenProvider_.stopListening(MO(t),null)}else c.forEach((function(t){var n=e.queryToTagMap.get(RO(t));e.listenProvider_.stopListening(MO(t),n)}))}!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=RO(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,c)}return u}function xO(e,t,n,r){var i=OO(e,r);if(null!=i){var a=DO(i),o=a.path,u=a.queryId,s=BA(o,t);return LO(e,o,new aR(tR(u),s,n))}return[]}function TO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=BA(e,i);a=a||fO(t,n),o=o||pO(t)}));var u,s=e.syncPointTree_.get(i);(s?(o=o||pO(s),a=a||fO(s,DA())):(s=new aO,e.syncPointTree_=e.syncPointTree_.set(i,s)),null!=a)?u=!0:(u=!1,a=IN.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((function(e,t){var n=fO(t,DA());n&&(a=a.updateImmediateChild(e,n))})));var c=dO(s,t);if(!c&&!t._queryParams.loadsAllData()){var l=RO(t);K(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var f=yO++;e.queryToTagMap.set(l,f),e.tagToQueryMap.set(f,l)}var h=sO(s,t,n,CR(e.pendingWriteTree_,i),a,u);if(!c&&!o&&!r){var d=hO(s,t);h=h.concat(function(e,t,n){var r=t._path,i=NO(e,t),a=AO(e,n),o=e.listenProvider_.startListening(MO(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)K(!pO(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!zA(e)&&t&&pO(t))return[vO(t).query];var r=[];return t&&(r=r.concat(lO(t).map((function(e){return e.query})))),eA(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(MO(l),NO(e,l))}return o}(e,t,d))}return h}function EO(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=fO(n,BA(e,t));if(r)return r}));return RR(r,t,i,n,!0)}function IO(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=BA(e,n);r=r||fO(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||fO(i,DA()):(i=new aO,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new uR(r,!0,!1):null;return function(e){return dR(e.viewCache_)}(uO(i,t,CR(e.pendingWriteTree_,t._path),a?o.getNode():IN.EMPTY_NODE,a))}function CO(e,t){return SO(t,e.syncPointTree_,null,CR(e.pendingWriteTree_,DA()))}function SO(e,t,n,r){if(zA(e.path))return PO(e,t,n,r);var i=t.get(DA());null==n&&null!=i&&(n=fO(i,DA()));var a=[],o=LA(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=jR(r,o);a=a.concat(SO(u,s,c,l))}return i&&(a=a.concat(oO(i,e,r,n))),a}function PO(e,t,n,r){var i=t.get(DA());null==n&&null!=i&&(n=fO(i,DA()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=jR(r,t),s=e.operationForChild(t);s&&(a=a.concat(PO(s,i,o,u)))})),i&&(a=a.concat(oO(i,e,r,n))),a}function AO(e,t){var n=t.query,r=NO(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||IN.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=OO(e,n);if(r){var i=DO(r),a=i.path,o=i.queryId,u=BA(a,t);return LO(e,a,new iR(tR(o),u))}return[]}(e,n._path,r):function(e,t){return CO(e,new iR({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return bO(e,n,null,i)}}}function NO(e,t){var n=RO(t);return e.queryToTagMap.get(n)}function RO(e){return e._path.toString()+"$"+e._queryIdentifier}function OO(e,t){return e.tagToQueryMap.get(t)}function DO(e){var t=e.indexOf("$");return K(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new OA(e.substr(0,t))}}function LO(e,t,n){var r=e.syncPointTree_.get(t);return K(r,"Missing sync point for query tag that we're tracking"),oO(r,n,CR(e.pendingWriteTree_,t),null)}function MO(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(K(iO,"Reference.ts has not been loaded"),iO)(e._repo,e._path):e}var FO=function(){function e(t){A(this,e),this.node_=t}return R(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),UO=function(){function e(t,n){A(this,e),this.syncTree_=t,this.path_=n}return R(e,[{key:"getImmediateChild",value:function(t){var n=qA(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return EO(this.syncTree_,this.path_)}}]),e}(),jO=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},VO=function(e,t,n){return e&&"object"===typeof e?(K(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?qO(e[".sv"],t,n):"object"===typeof e[".sv"]?zO(e[".sv"],t):void K(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},qO=function(e,t,n){if("timestamp"===e)return n.timestamp;K(!1,"Unexpected server value: "+e)},zO=function(e,t,n){e.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&K(!1,"Unexpected increment value: "+r);var i=t.node();if(K(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},BO=function(e,t,n,r){return KO(t,new UO(n,e),r)},WO=function(e,t,n){return KO(e,new FO(t),n)};function KO(e,t,n){var r,i=e.getPriority().val(),a=VO(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=VO(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new yN(u,PN(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new yN(a))),s.forEachChild(_N,(function(e,i){var a=KO(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var HO=R((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};A(this,e),this.name=t,this.parent=n,this.node=r}));function GO(e,t){for(var n=t instanceof OA?t:new OA(t),r=e,i=LA(n);null!==i;){var a=_e(r.node.children,i)||{children:{},childCount:0};r=new HO(i,r,a),i=LA(n=FA(n))}return r}function QO(e){return e.node.value}function YO(e,t){e.node.value=t,eD(e)}function $O(e){return e.node.childCount>0}function JO(e,t){eA(e.node.children,(function(n,r){t(new HO(n,e,r))}))}function XO(e,t,n,r){n&&!r&&t(e),JO(e,(function(e){XO(e,t,!0,r)})),n&&r&&t(e)}function ZO(e){return new OA(null===e.parent?e.name:ZO(e.parent)+"/"+e.name)}function eD(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===QO(e)&&!$O(e)}(n),i=ke(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,eD(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,eD(e))}(e.parent,e.name,e)}var tD=/[\[\].#$\/\u0000-\u001F\u007F]/,nD=/[\[\].#$\u0000-\u001F\u007F]/,rD=10485760,iD=function(e){return"string"===typeof e&&0!==e.length&&!tD.test(e)},aD=function(e){return"string"===typeof e&&0!==e.length&&!nD.test(e)},oD=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!HP(e)||e&&"object"===typeof e&&ke(e,".sv")},uD=function(e,t,n,r){r&&void 0===t||sD(Oe(e,"value"),t,n)},sD=function e(t,n,r){var i=r instanceof OA?new GA(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+YA(i));if("function"===typeof n)throw new Error(t+"contains a function "+YA(i)+" with contents = "+n.toString());if(HP(n))throw new Error(t+"contains "+n.toString()+" "+YA(i));if("string"===typeof n&&n.length>rD/3&&Me(n)>rD)throw new Error(t+"contains a string greater than "+rD+" utf8 bytes "+YA(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(eA(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!iD(n)))throw new Error(t+" contains an invalid key ("+n+") "+YA(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Me(t),QA(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Me(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+YA(i)+" in addition to actual children.")}},cD=function(e,t,n,r){if(!r||void 0!==t){var i=Oe(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];eA(t,(function(e,t){var r=new OA(e);if(sD(i,t,qA(n,r)),".priority"===UA(r)&&!oD(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=jA(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!iD(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(WA);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&HA(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},lD=function(e,t,n){if(!n||void 0!==t){if(HP(t))throw new Error(Oe(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!oD(t))throw new Error(Oe(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},fD=function(e,t,n,r){if((!r||void 0!==n)&&!iD(n))throw new Error(Oe(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},hD=function(e,t,n,r){if((!r||void 0!==n)&&!aD(n))throw new Error(Oe(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},dD=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),hD(e,t,n,r)},pD=function(e,t){if(".info"===LA(t))throw new Error(e+" failed = Can't modify data under /.info/")},vD=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!iD(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),aD(e)}(n))throw new Error(Oe(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},yD=R((function e(){A(this,e),this.eventLists_=[],this.recursionDepth_=0}));function mD(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||KA(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function gD(e,t,n){mD(e,n),_D(e,(function(e){return KA(e,t)}))}function kD(e,t,n){mD(e,n),_D(e,(function(e){return HA(e,t)||HA(t,e)}))}function _D(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(wD(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function wD(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();UP&&qP("event: "+n.toString()),iA(r)}}}var bD="repo_interrupt",xD=25,TD=function(){function e(t,n,r,i){A(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new yD,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=QN(),this.transactionQueueTree_=new HO,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return R(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function ED(e,t,n){if(e.stats_=kA(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new HN(e.repoInfo_,(function(t,n,r,i){SD(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return PD(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{me(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new XA(e.repoInfo_,t,(function(t,n,r,i){SD(e,t,n,r,i)}),(function(t){PD(e,t)}),(function(t){!function(e,t){eA(t,(function(t,n){AD(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return gA[n]||(gA[n]=t()),gA[n]}(e.repoInfo_,(function(){return new eR(e.stats_,e.server_)})),e.infoData_=new GN,e.infoSyncTree_=new mO({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=wO(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),AD(e,"connected",!1),e.serverSyncTree_=new mO({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);kD(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function ID(e){var t=e.infoData_.getNode(new OA(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function CD(e){return jO({timestamp:ID(e)})}function SD(e,t,n,r,i){e.dataUpdateCount++;var a=new OA(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=be(n,(function(e){return PN(e)}));o=function(e,t,n,r){var i=OO(e,r);if(i){var a=DO(i),o=a.path,u=a.queryId,s=BA(o,t),c=vR.fromObject(n);return LO(e,o,new oR(tR(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=PN(n);o=xO(e.serverSyncTree_,a,s,i)}else if(r){var c=be(n,(function(e){return PN(e)}));o=function(e,t,n){var r=vR.fromObject(n);return CO(e,new oR({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=PN(n);o=wO(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=qD(e,a)),kD(e.eventQueue_,f,o)}function PD(e,t){AD(e,"connected",t),!1===t&&function(e){FD(e,"onDisconnectEvents");var t=CD(e),n=QN();JN(e.onDisconnect_,DA(),(function(r,i){var a=BO(r,i,e.serverSyncTree_,t);YN(n,r,a)}));var r=[];JN(n,DA(),(function(t,n){r=r.concat(wO(e.serverSyncTree_,t,n));var i=HD(e,t);qD(e,i)})),e.onDisconnect_=QN(),kD(e.eventQueue_,DA(),r)}(e)}function AD(e,t,n){var r=new OA("/.info/"+t),i=PN(n);e.infoData_.updateSnapshot(r,i);var a=wO(e.infoSyncTree_,r,i);kD(e.eventQueue_,r,a)}function ND(e){return e.nextWriteId_++}function RD(e,t,n,r,i){FD(e,"set",{path:t.toString(),value:n,priority:r});var a=CD(e),o=PN(n,r),u=EO(e.serverSyncTree_,t),s=WO(o,u,a),c=ND(e),l=gO(e.serverSyncTree_,t,s,c,!0);mD(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||KP("set at "+t+" failed: "+n);var o=_O(e.serverSyncTree_,c,!a);kD(e.eventQueue_,t,o),UD(e,i,n,r)}));var f=HD(e,t);qD(e,f),kD(e.eventQueue_,f,[])}function OD(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&$N(e.onDisconnect_,t),UD(e,n,r,i)}))}function DD(e,t,n,r){var i=PN(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&YN(e.onDisconnect_,t,i),UD(e,r,n,a)}))}function LD(e,t,n){var r;r=".info"===LA(t._path)?bO(e.infoSyncTree_,t,n):bO(e.serverSyncTree_,t,n),gD(e.eventQueue_,t._path,r)}function MD(e){e.persistentConnection_&&e.persistentConnection_.interrupt(bD)}function FD(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];qP.apply(void 0,[t].concat(r))}function UD(e,t,n,r){t&&iA((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function jD(e,t,n){return EO(e.serverSyncTree_,t,n)||IN.EMPTY_NODE}function VD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||KD(e,t),QO(t)){var n=BD(e,t);K(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=jD(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];K(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=BA(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){FD(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(_O(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);KD(e,GO(e.transactionQueueTree_,t)),VD(e,e.transactionQueueTree_),kD(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)iA(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{KP("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}qD(e,t)}}),o)}(e,ZO(t),n)}else $O(t)&&JO(t,(function(t){VD(e,t)}))}function qD(e,t){var n=zD(e,t),r=ZO(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s,c=t[a],l=BA(n,c.path),f=!1;if(K(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)f=!0,u=c.abortReason,i=i.concat(_O(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=xD)f=!0,u="maxretry",i=i.concat(_O(e.serverSyncTree_,c.currentWriteId,!0));else{var h=jD(e,c.path,o);c.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){sD("transaction failed: Data returned ",d,c.path);var p=PN(d);"object"===typeof d&&null!=d&&ke(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=c.currentWriteId,y=CD(e),m=WO(p,h,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=m,c.currentWriteId=ND(e),o.splice(o.indexOf(v),1),i=(i=i.concat(gO(e.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat(_O(e.serverSyncTree_,v,!0))}else f=!0,u="nodata",i=i.concat(_O(e.serverSyncTree_,c.currentWriteId,!0))}kD(e.eventQueue_,n,i),i=[],f&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===u?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(u),!1,null)}))))},s=0;s<t.length;s++)u(s);KD(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)iA(r[c]);VD(e,e.transactionQueueTree_)}(e,BD(e,n),r),r}function zD(e,t){var n,r=e.transactionQueueTree_;for(n=LA(t);null!==n&&void 0===QO(r);)r=GO(r,n),n=LA(t=FA(t));return r}function BD(e,t){var n=[];return WD(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function WD(e,t,n){var r=QO(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);JO(t,(function(t){WD(e,t,n)}))}function KD(e,t){var n=QO(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,YO(t,n.length>0?n:void 0)}JO(t,(function(t){KD(e,t)}))}function HD(e,t){var n=ZO(zD(e,t)),r=GO(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){GD(e,t)})),GD(e,r),XO(r,(function(t){GD(e,t)})),n}function GD(e,t){var n=QO(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(K(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(K(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(_O(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?YO(t,void 0):n.length=a+1,kD(e.eventQueue_,ZO(t),i);for(var u=0;u<r.length;u++)iA(r[u])}}var QD=function(e,t){var n=YD(e),r=n.namespace;"firebase.com"===n.domain&&WP(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||WP("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&KP("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new pA(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new OA(n.pathString)}},YD=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=O(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):KP("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},$D="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",JD=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=$D.charAt(n%64),n=Math.floor(n/64);K(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=$D.charAt(t[r]);return K(20===o.length,"nextPushId: Length should be 20."),o}}(),XD=function(){function e(t,n,r,i){A(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return R(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+me(this.snapshot.exportVal())}}]),e}(),ZD=function(){function e(t,n,r){A(this,e),this.eventRegistration=t,this.error=n,this.path=r}return R(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),eL=function(){function e(t,n){A(this,e),this.snapshotCallback=t,this.cancelCallback=n}return R(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return K(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),tL=function(){function e(t,n){A(this,e),this._repo=t,this._path=n}return R(e,[{key:"cancel",value:function(){var e=new re;return OD(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){pD("OnDisconnect.remove",this._path);var e=new re;return DD(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){pD("OnDisconnect.set",this._path),uD("OnDisconnect.set",e,this._path,!1);var t=new re;return DD(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){pD("OnDisconnect.setWithPriority",this._path),uD("OnDisconnect.setWithPriority",e,this._path,!1),lD("OnDisconnect.setWithPriority",t,!1);var n=new re;return function(e,t,n,r,i){var a=PN(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&YN(e.onDisconnect_,t,a),UD(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){pD("OnDisconnect.update",this._path),cD("OnDisconnect.update",e,this._path,!1);var t=new re;return function(e,t,n,r){if(we(n))return qP("onDisconnect().update() called with empty data.  Don't do anything."),void UD(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&eA(n,(function(n,r){var i=PN(r);YN(e.onDisconnect_,qA(t,n),i)})),UD(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),nL=function(){function e(t,n,r,i){A(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return R(e,[{key:"key",get:function(){return zA(this._path)?null:UA(this._path)}},{key:"ref",get:function(){return new oL(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=KN(this._queryParams),t=XP(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return KN(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=Fe(t))instanceof e))return!1;var n=this._repo===t._repo,r=KA(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function rL(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function iL(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===rN){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==GP)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==QP)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===_N){if(null!=t&&!oD(t)||null!=n&&!oD(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(K(e.getIndex()instanceof AN||e.getIndex()===RN,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function aL(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var oL=function(e){M(n,e);var t=j(n);function n(e,r){return A(this,n),t.call(this,e,r,new VN,!1)}return R(n,[{key:"parent",get:function(){var e=VA(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(nL),uL=function(){function e(t,n,r){A(this,e),this._node=t,this.ref=n,this._index=r}return R(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new OA(t),r=lL(this.ref,t);return new e(this._node.getChild(n),r,_N)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,lL(n.ref,r),_N))}))}},{key:"hasChild",value:function(e){var t=new OA(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function sL(e,t){return(e=Fe(e))._checkNotDeleted("ref"),void 0!==t?lL(e._root,t):e._root}function cL(e,t){(e=Fe(e))._checkNotDeleted("refFromURL");var n=QD(t,e._repo.repoInfo_.nodeAdmin);vD("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||WP("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),sL(e,n.path.toString())}function lL(e,t){return null===LA((e=Fe(e))._path)?dD("child","path",t,!1):hD("child","path",t,!1),new oL(e._repo,qA(e._path,t))}function fL(e,t){e=Fe(e),pD("set",e._path),uD("set",t,e._path,!1);var n=new re;return RD(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function hL(e,t){cD("update",t,e._path,!1);var n=new re;return function(e,t,n,r){FD(e,"update",{path:t.toString(),value:n});var i=!0,a=CD(e),o={};if(eA(n,(function(n,r){i=!1,o[n]=BO(qA(t,n),PN(r),e.serverSyncTree_,a)})),i)qP("update() called with empty data.  Don't do anything."),UD(0,r,"ok",void 0);else{var u=ND(e),s=kO(e.serverSyncTree_,t,o,u);mD(e.eventQueue_,s),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||KP("update at "+t+" failed: "+n);var o=_O(e.serverSyncTree_,u,!a),s=o.length>0?qD(e,t):t;kD(e.eventQueue_,s,o),UD(0,r,n,i)})),eA(n,(function(n){var r=HD(e,qA(t,n));qD(e,r)})),kD(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function dL(e){e=Fe(e);var t=new eL((function(){})),n=new pL(t);return function(e,t,n){var r=IO(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=PN(r).withIndex(t._queryParams.getIndex());if(TO(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=wO(e.serverSyncTree_,t._path,a);else{var o=NO(e.serverSyncTree_,t);i=xO(e.serverSyncTree_,t._path,a,o)}return kD(e.eventQueue_,t._path,i),bO(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return FD(e,"get for query "+me(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new uL(t,new oL(e._repo,e._path),e._queryParams.getIndex())}))}var pL=function(){function e(t){A(this,e),this.callbackContext=t}return R(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new XD("value",this,new uL(e.snapshotNode,new oL(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new ZD(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),vL=function(){function e(t,n){A(this,e),this.eventType=t,this.callbackContext=n}return R(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new ZD(this,e,t):null}},{key:"createEvent",value:function(e,t){K(null!=e.childName,"Child events should have a childName.");var n=lL(new oL(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new XD(e.type,this,new uL(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function yL(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,u=function(t,n){LD(e._repo,e,c),o(t,n)};u.userCallback=n.userCallback,u.context=n.context,n=u}var s=new eL(n,a||void 0),c="value"===t?new pL(s):new vL(t,s);return function(e,t,n){var r;r=".info"===LA(t._path)?TO(e.infoSyncTree_,t,n):TO(e.serverSyncTree_,t,n),gD(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return LD(e._repo,e,c)}}function mL(e,t,n,r){return yL(e,"value",t,n,r)}function gL(e,t,n,r){return yL(e,"child_added",t,n,r)}function kL(e,t,n,r){return yL(e,"child_changed",t,n,r)}function _L(e,t,n,r){return yL(e,"child_moved",t,n,r)}function wL(e,t,n,r){return yL(e,"child_removed",t,n,r)}function bL(e,t,n){var r=null,i=n?new eL(n):null;"value"===t?r=new pL(i):t&&(r=new vL(t,i)),LD(e._repo,e,r)}var xL=R((function e(){A(this,e)})),TL=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this))._value=e,i._key=r,i}return R(n,[{key:"_apply",value:function(e){uD("endAt",this._value,e._path,!0);var t=zN(e._queryParams,this._value,this._key);if(aL(t),iL(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new nL(e._repo,e._path,t,e._orderByCalled)}}]),n}(xL);var EL=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this))._value=e,i._key=r,i}return R(n,[{key:"_apply",value:function(e){uD("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===rN||n?zN(e,t,n):zN(e,t,GP)).endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(aL(t),iL(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new nL(e._repo,e._path,t,e._orderByCalled)}}]),n}(xL);var IL=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this))._value=e,i._key=r,i}return R(n,[{key:"_apply",value:function(e){uD("startAt",this._value,e._path,!0);var t=qN(e._queryParams,this._value,this._key);if(aL(t),iL(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new nL(e._repo,e._path,t,e._orderByCalled)}}]),n}(xL);var CL=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this))._value=e,i._key=r,i}return R(n,[{key:"_apply",value:function(e){uD("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===rN||n?qN(e,t,n):qN(e,t,QP)).startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(aL(t),iL(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new nL(e._repo,e._path,t,e._orderByCalled)}}]),n}(xL);var SL=function(e){M(n,e);var t=j(n);function n(e){var r;return A(this,n),(r=t.call(this))._limit=e,r}return R(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new nL(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(xL);var PL=function(e){M(n,e);var t=j(n);function n(e){var r;return A(this,n),(r=t.call(this))._limit=e,r}return R(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new nL(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(xL);var AL=function(e){M(n,e);var t=j(n);function n(e){var r;return A(this,n),(r=t.call(this))._path=e,r}return R(n,[{key:"_apply",value:function(e){rL(e,"orderByChild");var t=new OA(this._path);if(zA(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new AN(t),r=BN(e._queryParams,n);return iL(r),new nL(e._repo,e._path,r,!0)}}]),n}(xL);var NL=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"_apply",value:function(e){rL(e,"orderByKey");var t=BN(e._queryParams,rN);return iL(t),new nL(e._repo,e._path,t,!0)}}]),n}(xL);var RL=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"_apply",value:function(e){rL(e,"orderByPriority");var t=BN(e._queryParams,_N);return iL(t),new nL(e._repo,e._path,t,!0)}}]),n}(xL);var OL=function(e){M(n,e);var t=j(n);function n(){return A(this,n),t.apply(this,arguments)}return R(n,[{key:"_apply",value:function(e){rL(e,"orderByValue");var t=BN(e._queryParams,RN);return iL(t),new nL(e._repo,e._path,t,!0)}}]),n}(xL);var DL=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this))._value=e,i._key=r,i}return R(n,[{key:"_apply",value:function(e){if(uD("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new TL(this._value,this._key)._apply(new IL(this._value,this._key)._apply(e))}}]),n}(xL);function LL(e){for(var t=Fe(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){t=o[a]._apply(t)}return t}!function(e){K(!JR,"__referenceConstructor has already been defined"),JR=e}(oL),function(e){K(!iO,"__referenceConstructor has already been defined"),iO=e}(oL);var ML="FIREBASE_DATABASE_EMULATOR_HOST",FL={},UL=!1;function jL(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||WP("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),qP("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=QD(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/nwitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyDv4H2YYw1GZM4ci6BpJCxQD3fG-y5Ipj0",REACT_APP_APP_ID:"1:496165555411:web:5249d21e9d8d4787aad826",REACT_APP_AUTH_DOMAIN:"nwitter-bf428.firebaseapp.com",REACT_APP_DATABASE_URL:"",REACT_APP_MEASUR_ID:"",REACT_APP_MESSAGIN_ID:"496165555411",REACT_APP_PROJECT_ID:"nwitter-bf428",REACT_APP_STORAGE_BUCKET:"nwitter-bf428.appspot.com"}[ML]),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=QD(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new sA(sA.OWNER):new uA(e.name,e.options,t);vD("Invalid Firebase Database URL",u),zA(u.path)||WP("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=FL[t.name];i||(i={},FL[t.name]=i);var a=i[e.toURLString()];a&&WP("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new TD(e,UL,n,r),i[e.toURLString()]=a,a}(s,e,l,new oA(e.name,n));return new VL(f,e)}var VL=function(){function e(t,n){A(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return R(e,[{key:"_repo",get:function(){return this._instanceStarted||(ED(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new oL(this._repo,DA())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=FL[t];n&&n[e.key]===e||WP("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),MD(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&WP("Cannot call "+e+" on a deleted database.")}}]),e}();function qL(){IA.IS_TRANSPORT_INITIALIZED&&KP("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function zL(){qL(),bA.forceDisallow()}function BL(){qL(),EA.forceDisallow(),bA.forceAllow()}function WL(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=Fe(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&WP("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&WP('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new sA(sA.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:ie(r.mockUserToken,e.app.options.projectId);a=new sA(o)}!function(e,t,n,r){e.repoInfo_=new pA("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,a)}function KL(e){var t;(e=Fe(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(bD)}function HL(e,t){VP(e,t)}var GL={".sv":"timestamp"};var QL=function(){function e(t,n){A(this,e),this.committed=t,this.snapshot=n}return R(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function YL(e,t,n){var r;if(e=Fe(e),pD("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new re,o=mL(e,(function(){}));return function(e,t,n,r,i,a){FD(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:LP(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=jD(e,t,void 0);o.currentInputSnapshot=u;var s=o.update(u.val());if(void 0===s)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{sD("transaction failed: Data returned ",s,o.path),o.status=0;var c,l=GO(e.transactionQueueTree_,t),f=QO(l)||[];f.push(o),YO(l,f),"object"===typeof s&&null!==s&&ke(s,".priority")?(c=_e(s,".priority"),K(oD(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(EO(e.serverSyncTree_,t)||IN.EMPTY_NODE).getPriority().val();var h=CD(e),d=PN(s,c),p=WO(d,u,h);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=ND(e);var v=gO(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);kD(e.eventQueue_,t,v),VD(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new uL(r,new oL(e._repo,e._path),_N),a.resolve(new QL(n,i)))}),o,i),a.promise}XA.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},XA.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){SP(Mt),Pt(new Ve("database",(function(e,t){var n=t.instanceIdentifier;return jL(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),zt(EP,IP,e),zt(EP,IP,"esm2017")}();var $L=new Je("@firebase/database-compat"),JL=function(e){var t="FIREBASE WARNING: "+e;$L.warn(t)},XL=function(){function e(t){A(this,e),this._delegate=t}return R(e,[{key:"cancel",value:function(e){Re("OnDisconnect.cancel",0,1,arguments.length),De("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){Re("OnDisconnect.remove",0,1,arguments.length),De("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){Re("OnDisconnect.set",1,2,arguments.length),De("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){Re("OnDisconnect.setWithPriority",2,3,arguments.length),De("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(Re("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,JL("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}De("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),ZL=function(){function e(t,n){A(this,e),this.committed=t,this.snapshot=n}return R(e,[{key:"toJSON",value:function(){return Re("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),eM=function(){function e(t,n){A(this,e),this._database=t,this._delegate=n}return R(e,[{key:"val",value:function(){return Re("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return Re("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return Re("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return Re("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return Re("DataSnapshot.child",0,1,arguments.length),t=String(t),hD("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return Re("DataSnapshot.hasChild",1,1,arguments.length),hD("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return Re("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return Re("DataSnapshot.forEach",1,1,arguments.length),De("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return Re("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return Re("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return Re("DataSnapshot.ref",0,0,arguments.length),new nM(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),tM=function(){function e(t,n){A(this,e),this.database=t,this._delegate=n}return R(e,[{key:"on",value:function(t,n,r,i){var a,o=this;Re("Query.on",2,4,arguments.length),De("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),s=function(e,t){n.call(u.context,new eM(o.database,e),t)};s.userCallback=n,s.context=u.context;var c=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return mL(this._delegate,s,c),n;case"child_added":return gL(this._delegate,s,c),n;case"child_removed":return wL(this._delegate,s,c),n;case"child_changed":return kL(this._delegate,s,c),n;case"child_moved":return _L(this._delegate,s,c),n;default:throw new Error(Oe("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(Re("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Oe(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),De("Query.off","callback",t,!0),Le("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,bL(this._delegate,e,r)}else bL(this._delegate,e)}},{key:"get",value:function(){var e=this;return dL(this._delegate).then((function(t){return new eM(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;Re("Query.once",1,4,arguments.length),De("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),u=new re,s=function(e,t){var r=new eM(a.database,e);n&&n.call(o.context,r,t),u.resolve(r)};s.userCallback=n,s.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),u.reject(e)};switch(t){case"value":mL(this._delegate,s,c,{onlyOnce:!0});break;case"child_added":gL(this._delegate,s,c,{onlyOnce:!0});break;case"child_removed":wL(this._delegate,s,c,{onlyOnce:!0});break;case"child_changed":kL(this._delegate,s,c,{onlyOnce:!0});break;case"child_moved":_L(this._delegate,s,c,{onlyOnce:!0});break;default:throw new Error(Oe("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}},{key:"limitToFirst",value:function(t){return Re("Query.limitToFirst",1,1,arguments.length),new e(this.database,LL(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new SL(e)}(t)))}},{key:"limitToLast",value:function(t){return Re("Query.limitToLast",1,1,arguments.length),new e(this.database,LL(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new PL(e)}(t)))}},{key:"orderByChild",value:function(t){return Re("Query.orderByChild",1,1,arguments.length),new e(this.database,LL(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return hD("orderByChild","path",e,!1),new AL(e)}(t)))}},{key:"orderByKey",value:function(){return Re("Query.orderByKey",0,0,arguments.length),new e(this.database,LL(this._delegate,new NL))}},{key:"orderByPriority",value:function(){return Re("Query.orderByPriority",0,0,arguments.length),new e(this.database,LL(this._delegate,new RL))}},{key:"orderByValue",value:function(){return Re("Query.orderByValue",0,0,arguments.length),new e(this.database,LL(this._delegate,new OL))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Re("Query.startAt",0,2,arguments.length),new e(this.database,LL(this._delegate,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return fD("startAt","key",t,!0),new IL(e,t)}(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Re("Query.startAfter",0,2,arguments.length),new e(this.database,LL(this._delegate,function(e,t){return fD("startAfter","key",t,!0),new CL(e,t)}(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Re("Query.endAt",0,2,arguments.length),new e(this.database,LL(this._delegate,function(e,t){return fD("endAt","key",t,!0),new TL(e,t)}(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Re("Query.endBefore",0,2,arguments.length),new e(this.database,LL(this._delegate,function(e,t){return fD("endBefore","key",t,!0),new EL(e,t)}(t,n)))}},{key:"equalTo",value:function(t,n){return Re("Query.equalTo",1,2,arguments.length),new e(this.database,LL(this._delegate,function(e,t){return fD("equalTo","key",t,!0),new DL(e,t)}(t,n)))}},{key:"toString",value:function(){return Re("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return Re("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(Re("Query.isEqual",1,1,arguments.length),!(t instanceof e)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new nM(this.database,new oL(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,De(e,"cancel",r.cancel,!0),r.context=n,Le(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Oe(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),nM=function(e){M(n,e);var t=j(n);function n(e,r){var i;return A(this,n),(i=t.call(this,e,new nL(r._repo,r._path,new VN,!1))).database=e,i._delegate=r,i}return R(n,[{key:"getKey",value:function(){return Re("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return Re("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,lL(this._delegate,e))}},{key:"getParent",value:function(){Re("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return Re("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){Re("Reference.set",1,2,arguments.length),De("Reference.set","onComplete",t,!0);var n=fL(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(Re("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,JL("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}pD("Reference.update",this._delegate._path),De("Reference.update","onComplete",t,!0);var i=hL(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){Re("Reference.setWithPriority",2,3,arguments.length),De("Reference.setWithPriority","onComplete",n,!0);var r=function(e,t,n){if(pD("setWithPriority",e._path),uD("setWithPriority",t,e._path,!1),lD("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new re;return RD(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){Re("Reference.remove",0,1,arguments.length),De("Reference.remove","onComplete",e,!0);var t,n=(t=this._delegate,pD("remove",t._path),fL(t,null));return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n}},{key:"transaction",value:function(e,t,n){var r=this;Re("Reference.transaction",1,3,arguments.length),De("Reference.transaction","transactionUpdate",e,!1),De("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Oe(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);var i=YL(this._delegate,e,{applyLocally:n}).then((function(e){return new ZL(e.committed,new eM(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){Re("Reference.setPriority",1,2,arguments.length),De("Reference.setPriority","onComplete",t,!0);var n=function(e,t){e=Fe(e),pD("setPriority",e._path),lD("setPriority",t,!1);var n=new re;return RD(e._repo,qA(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;Re("Reference.push",0,2,arguments.length),De("Reference.push","onComplete",t,!0);var i=function(e,t){e=Fe(e),pD("push",e._path),uD("push",t,e._path,!0);var n,r=ID(e._repo),i=JD(r),a=lL(e,i),o=lL(e,i);return n=null!=t?fL(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return pD("Reference.onDisconnect",this._delegate._path),new XL(new tL(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(tM),rM=function(){function e(t,n){var r=this;A(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:zL,forceLongPolling:BL}}return R(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};WL(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(Re("database.ref",0,1,arguments.length),e instanceof nM){var t=cL(this._delegate,e.toString());return new nM(this,t)}var n=sL(this._delegate,e);return new nM(this,n)}},{key:"refFromURL",value:function(e){Re("database.refFromURL",1,1,arguments.length);var t=cL(this._delegate,e);return new nM(this,t)}},{key:"goOffline",value:function(){return Re("database.goOffline",0,0,arguments.length),function(e){(e=Fe(e))._checkNotDeleted("goOffline"),MD(e._repo)}(this._delegate)}},{key:"goOnline",value:function(){return Re("database.goOnline",0,0,arguments.length),KL(this._delegate)}}]),e}();rM.ServerValue={TIMESTAMP:GL,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var iM=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.customAppCheckImpl,o=e.namespace,u=e.nodeAdmin,s=void 0!==u&&u;SP(r);var c=new Ke("database-standalone"),l=new ze("auth-internal",c);l.setComponent(new Ve("auth-internal",(function(){return i}),"PRIVATE"));var f=void 0;return a&&(f=new ze("app-check-internal",c)).setComponent(new Ve("app-check-internal",(function(){return a}),"PRIVATE")),{instance:new rM(jL(t,l,f,n,s),t),namespace:o}}}),aM=rM.ServerValue;!function(e){e.INTERNAL.registerComponent(new Ve("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new rM(i,r)}),"PUBLIC").setServiceProps({Reference:nM,Query:tM,Database:rM,DataSnapshot:eM,enableLogging:HL,INTERNAL:iM,ServerValue:aM}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","1.0.1")}(vn);vn.initializeApp({apiKey:"AIzaSyDv4H2YYw1GZM4ci6BpJCxQD3fG-y5Ipj0",authDomain:"nwitter-bf428.firebaseapp.com",databaseURL:"",projectId:"nwitter-bf428",storageBucket:"nwitter-bf428.appspot.com",messagingSenderId:"496165555411",appId:"1:496165555411:web:5249d21e9d8d4787aad826"});var oM=vn,uM=vn.auth(),sM=vn.firestore(),cM=vn.storage(),lM=n(184),fM=function(){var e=s((0,t.useState)(""),2),n=e[0],r=e[1],i=s((0,t.useState)(""),2),a=i[0],o=i[1],u=s((0,t.useState)(!0),2),c=u[0],l=u[1],f=s((0,t.useState)(""),2),h=f[0],d=f[1],p=function(e){var t=e.target,n=t.name,i=t.value;"email"===n?r(i):"password"==n&&o(i)},v=function(){var e=C(E().mark((function e(t){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!c){e.next=8;break}return e.next=5,uM.createUserWithEmailAndPassword(n,a);case 5:r=e.sent,e.next=11;break;case 8:return e.next=10,uM.signInWithEmailAndPassword(n,a);case 10:r=e.sent;case 11:console.log(r),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),d(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return(0,lM.jsxs)(lM.Fragment,{children:[(0,lM.jsxs)("form",{onSubmit:v,className:"container",children:[(0,lM.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:n,onChange:p,className:"authInput"}),(0,lM.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:a,onChange:p,className:"authInput"}),(0,lM.jsx)("input",{type:"submit",value:c?"Create Account":"Sign In"}),h&&(0,lM.jsx)("span",{className:"authError",children:h})]}),(0,lM.jsx)("span",{onClick:function(){return l((function(e){return!e}))},className:"authSwitch",children:c?"Sign In":"Create Account"})]})};function hM(e){return hM="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hM(e)}function dM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){pM(e,t,n[t])}))}return e}function yM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var mM=function(){},gM={},kM={},_M={mark:mM,measure:mM};try{"undefined"!==typeof window&&(gM=window),"undefined"!==typeof document&&(kM=document),"undefined"!==typeof MutationObserver&&MutationObserver,"undefined"!==typeof performance&&(_M=performance)}catch(OU){}var wM=(gM.navigator||{}).userAgent,bM=void 0===wM?"":wM,xM=gM,TM=kM,EM=_M,IM=(xM.document,!!TM.documentElement&&!!TM.head&&"function"===typeof TM.addEventListener&&"function"===typeof TM.createElement),CM=(~bM.indexOf("MSIE")||bM.indexOf("Trident/"),"___FONT_AWESOME___"),SM="fa",PM="svg-inline--fa",AM="data-fa-i2svg",NM=(function(){try{return!0}catch(OU){return!1}}(),[1,2,3,4,5,6,7,8,9,10]),RM=NM.concat([11,12,13,14,15,16,17,18,19,20]),OM={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},DM=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",OM.GROUP,OM.SWAP_OPACITY,OM.PRIMARY,OM.SECONDARY].concat(NM.map((function(e){return"".concat(e,"x")}))).concat(RM.map((function(e){return"w-".concat(e)}))),xM.FontAwesomeConfig||{});if(TM&&"function"===typeof TM.querySelector){[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=yM(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=TM.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==i&&null!==i&&(DM[r]=i)}))}var LM=vM({},{familyPrefix:SM,replacementClass:PM,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},DM);LM.autoReplaceSvg||(LM.observeMutations=!1);var MM=vM({},LM);xM.FontAwesomeConfig=MM;var FM=xM||{};FM[CM]||(FM[CM]={}),FM[CM].styles||(FM[CM].styles={}),FM[CM].hooks||(FM[CM].hooks={}),FM[CM].shims||(FM[CM].shims=[]);var UM=FM[CM],jM=[];IM&&((TM.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(TM.readyState)||TM.addEventListener("DOMContentLoaded",(function e(){TM.removeEventListener("DOMContentLoaded",e),1,jM.map((function(e){return e()}))})));var VM,qM="pending",zM="settled",BM="fulfilled",WM="rejected",KM=function(){},HM="undefined"!==typeof n.g&&"undefined"!==typeof n.g.process&&"function"===typeof n.g.process.emit,GM="undefined"===typeof setImmediate?setTimeout:setImmediate,QM=[];function YM(){for(var e=0;e<QM.length;e++)QM[e][0](QM[e][1]);QM=[],VM=!1}function $M(e,t){QM.push([e,t]),VM||(VM=!0,GM(YM,0))}function JM(e){var t=e.owner,n=t._state,r=t._data,i=e[n],a=e.then;if("function"===typeof i){n=BM;try{r=i(r)}catch(OU){tF(a,OU)}}XM(a,r)||(n===BM&&ZM(a,r),n===WM&&tF(a,r))}function XM(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"===typeof t||"object"===hM(t))){var r=t.then;if("function"===typeof r)return r.call(t,(function(r){n||(n=!0,t===r?eF(e,r):ZM(e,r))}),(function(t){n||(n=!0,tF(e,t))})),!0}}catch(OU){return n||tF(e,OU),!0}return!1}function ZM(e,t){e!==t&&XM(e,t)||eF(e,t)}function eF(e,t){e._state===qM&&(e._state=zM,e._data=t,$M(rF,e))}function tF(e,t){e._state===qM&&(e._state=zM,e._data=t,$M(iF,e))}function nF(e){e._then=e._then.forEach(JM)}function rF(e){e._state=BM,nF(e)}function iF(e){e._state=WM,nF(e),!e._handled&&HM&&n.g.process.emit("unhandledRejection",e._data,e)}function aF(e){n.g.process.emit("rejectionHandled",e)}function oF(e){if("function"!==typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof oF===!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function n(e){tF(t,e)}try{e((function(e){ZM(t,e)}),n)}catch(OU){n(OU)}}(e,this)}oF.prototype={constructor:oF,_state:qM,_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(KM),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===WM&&HM&&$M(aF,this)),this._state===BM||this._state===WM?$M(JM,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},oF.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new oF((function(t,n){var r=[],i=0;function a(e){return i++,function(n){r[e]=n,--i||t(r)}}for(var o,u=0;u<e.length;u++)(o=e[u])&&"function"===typeof o.then?o.then(a(u),n):r[u]=o;i||t(r)}))},oF.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new oF((function(t,n){for(var r,i=0;i<e.length;i++)(r=e[i])&&"function"===typeof r.then?r.then(t,n):t(r)}))},oF.resolve=function(e){return e&&"object"===hM(e)&&e.constructor===oF?e:new oF((function(t){t(e)}))},oF.reject=function(e){return new oF((function(t,n){n(e)}))};var uF={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function sF(e){if(e&&IM){var t=TM.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=TM.head.childNodes,r=null,i=n.length-1;i>-1;i--){var a=n[i],o=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=a)}return TM.head.insertBefore(t,r),e}}var cF="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function lF(){for(var e=12,t="";e-- >0;)t+=cF[62*Math.random()|0];return t}function fF(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function hF(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n],";")}),"")}function dF(e){return e.size!==uF.size||e.x!==uF.x||e.y!==uF.y||e.rotate!==uF.rotate||e.flipX||e.flipY}function pF(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},a="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),u="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(a," ").concat(o," ").concat(u)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}var vF={x:0,y:0,width:"100%",height:"100%"};function yF(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function mF(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,a=e.iconName,o=e.transform,u=e.symbol,s=e.title,c=e.maskId,l=e.titleId,f=e.extra,h=e.watchable,d=void 0!==h&&h,p=r.found?r:n,v=p.width,y=p.height,m="fak"===i,g=m?"":"fa-w-".concat(Math.ceil(v/y*16)),k=[MM.replacementClass,a?"".concat(MM.familyPrefix,"-").concat(a):"",g].filter((function(e){return-1===f.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(f.classes).join(" "),_={children:[],attributes:vM({},f.attributes,{"data-prefix":i,"data-icon":a,class:k,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(v," ").concat(y)})},w=m&&!~f.classes.indexOf("fa-fw")?{width:"".concat(v/y*16*.0625,"em")}:{};d&&(_.attributes[AM]=""),s&&_.children.push({tag:"title",attributes:{id:_.attributes["aria-labelledby"]||"title-".concat(l||lF())},children:[s]});var b=vM({},_,{prefix:i,iconName:a,main:n,mask:r,maskId:c,transform:o,symbol:u,styles:vM({},w,f.styles)}),x=r.found&&n.found?function(e){var t,n=e.children,r=e.attributes,i=e.main,a=e.mask,o=e.maskId,u=e.transform,s=i.width,c=i.icon,l=a.width,f=a.icon,h=pF({transform:u,containerWidth:l,iconWidth:s}),d={tag:"rect",attributes:vM({},vF,{fill:"white"})},p=c.children?{children:c.children.map(yF)}:{},v={tag:"g",attributes:vM({},h.inner),children:[yF(vM({tag:c.tag,attributes:vM({},c.attributes,h.path)},p))]},y={tag:"g",attributes:vM({},h.outer),children:[v]},m="mask-".concat(o||lF()),g="clip-".concat(o||lF()),k={tag:"mask",attributes:vM({},vF,{id:m,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[d,y]},_={tag:"defs",children:[{tag:"clipPath",attributes:{id:g},children:(t=f,"g"===t.tag?t.children:[t])},k]};return n.push(_,{tag:"rect",attributes:vM({fill:"currentColor","clip-path":"url(#".concat(g,")"),mask:"url(#".concat(m,")")},vF)}),{children:n,attributes:r}}(b):function(e){var t=e.children,n=e.attributes,r=e.main,i=e.transform,a=hF(e.styles);if(a.length>0&&(n.style=a),dF(i)){var o=pF({transform:i,containerWidth:r.width,iconWidth:r.width});t.push({tag:"g",attributes:vM({},o.outer),children:[{tag:"g",attributes:vM({},o.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:vM({},r.icon.attributes,o.path)}]}]})}else t.push(r.icon);return{children:t,attributes:n}}(b),T=x.children,E=x.attributes;return b.children=T,b.attributes=E,u?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,a=e.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:vM({},i,{id:!0===a?"".concat(t,"-").concat(MM.familyPrefix,"-").concat(n):a}),children:r}]}]}(b):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,a=e.styles,o=e.transform;if(dF(o)&&n.found&&!r.found){var u={x:n.width/n.height/2,y:.5};i.style=hF(vM({},a,{"transform-origin":"".concat(u.x+o.x/16,"em ").concat(u.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(b)}var gF=function(){},kF=(MM.measurePerformance&&EM&&EM.mark&&EM.measure,function(e,t,n,r){var i,a,o,u=Object.keys(e),s=u.length,c=void 0!==r?function(e,t){return function(n,r,i,a){return e.call(t,n,r,i,a)}}(t,r):t;for(void 0===n?(i=1,o=e[u[0]]):(i=0,o=n);i<s;i++)o=c(o,e[a=u[i]],a,e);return o});function _F(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==n&&n,i=Object.keys(t).reduce((function(e,n){var r=t[n];return!!r.icon?e[r.iconName]=r.icon:e[n]=r,e}),{});"function"!==typeof UM.hooks.addPack||r?UM.styles[e]=vM({},UM.styles[e]||{},i):UM.hooks.addPack(e,i),"fas"===e&&_F("fa",t)}var wF=UM.styles,bF=UM.shims,xF=function(){var e=function(e){return kF(wF,(function(t,n,r){return t[r]=kF(n,e,{}),t}),{})};e((function(e,t,n){return t[3]&&(e[t[3]]=n),e})),e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in wF;kF(bF,(function(e,n){var r=n[0],i=n[1],a=n[2];return"far"!==i||t||(i="fas"),e[r]={prefix:i,iconName:a},e}),{})};xF();UM.styles;function TF(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}function EF(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,a=void 0===i?[]:i;return"string"===typeof e?fF(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(fF(e[n]),'" ')}),"").trim()}(r),">").concat(a.map(EF).join(""),"</").concat(t,">")}var IF=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),t):t};function CF(e){this.name="MissingIcon",this.message=e||"Icon unavailable",this.stack=(new Error).stack}CF.prototype=Object.create(Error.prototype),CF.prototype.constructor=CF;var SF={fill:"currentColor"},PF={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},AF={tag:"path",attributes:vM({},SF,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})},NF=vM({},PF,{attributeName:"opacity"});vM({},SF,{cx:"256",cy:"364",r:"28"}),vM({},PF,{attributeName:"r",values:"28;14;28;28;14;28;"}),vM({},NF,{values:"1;0;1;1;0;1;"}),vM({},SF,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),vM({},NF,{values:"1;0;0;0;0;1;"}),vM({},SF,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),vM({},NF,{values:"0;0;1;1;0;0;"}),UM.styles;function RF(e){var t=e[0],n=e[1],r=yM(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(MM.familyPrefix,"-").concat(OM.GROUP)},children:[{tag:"path",attributes:{class:"".concat(MM.familyPrefix,"-").concat(OM.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(MM.familyPrefix,"-").concat(OM.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}UM.styles;var OF='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';function DF(){var e=SM,t=PM,n=MM.familyPrefix,r=MM.replacementClass,i=OF;if(n!==e||r!==t){var a=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),u=new RegExp("\\.".concat(t),"g");i=i.replace(a,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(u,".".concat(r))}return i}var LF=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=vM({},e.definitions[t]||{},i[t]),_F(t,i[t]),xF()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],i=r.prefix,a=r.iconName,o=r.icon;e[i]||(e[i]={}),e[i][a]=o})),e}}],n&&dM(t.prototype,n),r&&dM(t,r),e}();function MF(){MM.autoAddCss&&!qF&&(sF(DF()),qF=!0)}function FF(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return EF(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(IM){var t=TM.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function UF(e){var t=e.prefix,n=void 0===t?"fa":t,r=e.iconName;if(r)return TF(VF.definitions,n,r)||TF(UM.styles,n,r)}var jF,VF=new LF,qF=!1,zF={transform:function(e){return IF(e)}},BF=(jF=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?uF:n,i=t.symbol,a=void 0!==i&&i,o=t.mask,u=void 0===o?null:o,s=t.maskId,c=void 0===s?null:s,l=t.title,f=void 0===l?null:l,h=t.titleId,d=void 0===h?null:h,p=t.classes,v=void 0===p?[]:p,y=t.attributes,m=void 0===y?{}:y,g=t.styles,k=void 0===g?{}:g;if(e){var _=e.prefix,w=e.iconName,b=e.icon;return FF(vM({type:"icon"},e),(function(){return MF(),MM.autoA11y&&(f?m["aria-labelledby"]="".concat(MM.replacementClass,"-title-").concat(d||lF()):(m["aria-hidden"]="true",m.focusable="false")),mF({icons:{main:RF(b),mask:u?RF(u.icon):{found:!1,width:null,height:null,icon:{}}},prefix:_,iconName:w,transform:vM({},uF,r),symbol:a,title:f,maskId:c,titleId:d,extra:{attributes:m,styles:k,classes:v}})}))}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(e||{}).icon?e:UF(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:UF(r||{})),jF(n,vM({},t,{mask:r}))}),WF=n(7),KF=n.n(WF);function HF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HF(Object(n),!0).forEach((function(t){YF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function QF(e){return QF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QF(e)}function YF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $F(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function JF(e){return function(e){if(Array.isArray(e))return XF(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return XF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XF(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ZF(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var eU=["style"];var tU=!1;try{tU=!0}catch(OU){}function nU(e){return e&&"object"===QF(e)&&e.prefix&&e.iconName&&e.icon?e:zF.icon?zF.icon(e):null===e?null:e&&"object"===QF(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function rU(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?YF({},e,t):{}}var iU=["forwardedRef"];function aU(e){var t=e.forwardedRef,n=$F(e,iU),r=n.icon,i=n.mask,a=n.symbol,o=n.className,u=n.title,s=n.titleId,c=n.maskId,l=nU(r),f=rU("classes",[].concat(JF(function(e){var t,n=e.beat,r=e.fade,i=e.beatFade,a=e.bounce,o=e.shake,u=e.flash,s=e.spin,c=e.spinPulse,l=e.spinReverse,f=e.pulse,h=e.fixedWidth,d=e.inverse,p=e.border,v=e.listItem,y=e.flip,m=e.size,g=e.rotation,k=e.pull,_=(YF(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":a,"fa-shake":o,"fa-flash":u,"fa-spin":s,"fa-spin-reverse":l,"fa-spin-pulse":c,"fa-pulse":f,"fa-fw":h,"fa-inverse":d,"fa-border":p,"fa-li":v,"fa-flip":!0===y,"fa-flip-horizontal":"horizontal"===y||"both"===y,"fa-flip-vertical":"vertical"===y||"both"===y},"fa-".concat(m),"undefined"!==typeof m&&null!==m),YF(t,"fa-rotate-".concat(g),"undefined"!==typeof g&&null!==g&&0!==g),YF(t,"fa-pull-".concat(k),"undefined"!==typeof k&&null!==k),YF(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(_).map((function(e){return _[e]?e:null})).filter((function(e){return e}))}(n)),JF(o.split(" ")))),h=rU("transform","string"===typeof n.transform?zF.transform(n.transform):n.transform),d=rU("mask",nU(i)),p=BF(l,GF(GF(GF(GF({},f),h),d),{},{symbol:a,title:u,titleId:s,maskId:c}));if(!p)return function(){var e;!tU&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",l),null;var v=p.abstract,y={ref:t};return Object.keys(n).forEach((function(e){aU.defaultProps.hasOwnProperty(e)||(y[e]=n[e])})),uU(v[0],y)}aU.displayName="FontAwesomeIcon",aU.propTypes={beat:KF().bool,border:KF().bool,beatFade:KF().bool,bounce:KF().bool,className:KF().string,fade:KF().bool,flash:KF().bool,mask:KF().oneOfType([KF().object,KF().array,KF().string]),maskId:KF().string,fixedWidth:KF().bool,inverse:KF().bool,flip:KF().oneOf([!0,!1,"horizontal","vertical","both"]),icon:KF().oneOfType([KF().object,KF().array,KF().string]),listItem:KF().bool,pull:KF().oneOf(["right","left"]),pulse:KF().bool,rotation:KF().oneOf([0,90,180,270]),shake:KF().bool,size:KF().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:KF().bool,spinPulse:KF().bool,spinReverse:KF().bool,symbol:KF().oneOfType([KF().bool,KF().string]),title:KF().string,titleId:KF().string,transform:KF().oneOfType([KF().string,KF().object]),swapOpacity:KF().bool},aU.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var oU,uU=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),a=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=r.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n=t.indexOf(":"),r=ZF(t.slice(0,n)),i=t.slice(n+1).trim();return r.startsWith("webkit")?e[function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(r)]=i:e[r]=i,e}),{});break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[ZF(t)]=r}return e}),{attrs:{}}),o=r.style,u=void 0===o?{}:o,s=$F(r,eU);return a.attrs.style=GF(GF({},a.attrs.style),u),t.apply(void 0,[n.tag,GF(GF({},a.attrs),s)].concat(JF(i)))}.bind(null,t.createElement),sU={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]},cU={prefix:"fab",iconName:"google",icon:[488,512,[],"f1a0","M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"]},lU={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]},fU=function(){var e=function(){var e=C(E().mark((function e(t){var n,r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"==(n=t.target.name)?r=new oM.auth.GoogleAuthProvider:"github"==n&&(r=new oM.auth.GithubAuthProvider),e.next=4,uM.signInWithPopup(r);case 4:i=e.sent,console.log(i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,lM.jsxs)("div",{className:"authContainer",children:[(0,lM.jsx)(aU,{icon:lU,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),(0,lM.jsx)(fM,{}),(0,lM.jsxs)("div",{className:"authBtns",children:[(0,lM.jsxs)("button",{onClick:e,name:"google",className:"authBtn",children:["Continue with Google ",(0,lM.jsx)(aU,{icon:cU})]}),(0,lM.jsxs)("button",{onClick:e,name:"github",className:"authBtn",children:["Continue with Github ",(0,lM.jsx)(aU,{icon:sU})]})]})]})},hU={prefix:"fas",iconName:"pencil-alt",icon:[512,512,[],"f303","M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"]},dU={prefix:"fas",iconName:"plus",icon:[448,512,[],"f067","M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"]},pU={prefix:"fas",iconName:"times",icon:[352,512,[],"f00d","M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"]},vU={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"]},yU={prefix:"fas",iconName:"user",icon:[448,512,[],"f007","M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"]},mU=function(e){var n=e.nweetObject,r=e.isOwner,i=s((0,t.useState)(!1),2),a=i[0],o=i[1],u=s((0,t.useState)(n.text),2),c=u[0],l=u[1],f=function(){var e=C(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("are you sure? you want to delete this nweet?")){e.next=7;break}return e.next=4,sM.doc("nweets/".concat(n.id)).delete();case 4:if(!n.attachmentUrl){e.next=7;break}return e.next=7,cM.refFromURL(n.attachmentUrl).delete();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){o((function(e){return!e}))},d=function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n,c),e.next=4,sM.doc("nweets/".concat(n.id)).update({text:c});case 4:o(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,lM.jsx)("div",{className:"nweet",children:a?(0,lM.jsxs)(lM.Fragment,{children:[(0,lM.jsxs)("form",{onSubmit:d,className:"container nweetEdit",children:[(0,lM.jsx)("input",{type:"text",placeholder:"Edit your nweet",defaultValue:c,required:!0,autoFocus:!0,onChange:function(e){var t=e.target.value;l(t)},className:"formInput"}),(0,lM.jsx)("input",{type:"submit",value:"Update Nweet",className:"formBtn"})]}),(0,lM.jsx)("span",{onClick:h,className:"formBtn cancelBtn",children:"Cancel"})]}):(0,lM.jsxs)(lM.Fragment,{children:[(0,lM.jsx)("h4",{children:n.text}),n.attachmentUrl&&(0,lM.jsx)("img",{src:n.attachmentUrl}),r&&(0,lM.jsx)(lM.Fragment,{children:(0,lM.jsxs)("div",{class:"nweet__actions",children:[(0,lM.jsx)("span",{onClick:f,children:(0,lM.jsx)(aU,{icon:vU})}),(0,lM.jsx)("span",{onClick:h,children:(0,lM.jsx)(aU,{icon:hU})})]})})]})})},gU={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},kU=new Uint8Array(16);function _U(){if(!oU&&!(oU="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return oU(kU)}for(var wU=[],bU=0;bU<256;++bU)wU.push((bU+256).toString(16).slice(1));function xU(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return wU[e[t+0]]+wU[e[t+1]]+wU[e[t+2]]+wU[e[t+3]]+"-"+wU[e[t+4]]+wU[e[t+5]]+"-"+wU[e[t+6]]+wU[e[t+7]]+"-"+wU[e[t+8]]+wU[e[t+9]]+"-"+wU[e[t+10]]+wU[e[t+11]]+wU[e[t+12]]+wU[e[t+13]]+wU[e[t+14]]+wU[e[t+15]]}var TU=function(e,t,n){if(gU.randomUUID&&!t&&!e)return gU.randomUUID();var r=(e=e||{}).random||(e.rng||_U)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return xU(r)},EU=function(e){var n=e.userObject,r=s((0,t.useState)(""),2),i=r[0],a=r[1],o=s((0,t.useState)(""),2),u=o[0],c=o[1],l=function(){var e=C(E().mark((function e(t){var r,o,s,l;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==i){e.next=2;break}return e.abrupt("return");case 2:if(t.preventDefault(),r="",""===u){e.next=17;break}return o=cM.ref().child("".concat(n.uid,"/").concat(TU())),e.next=8,o.putString(u,"data_url");case 8:return s=e.sent,e.t0=console,e.next=12,s.ref.getDownloadURL();case 12:return e.t1=e.sent,e.t0.log.call(e.t0,e.t1),e.next=16,s.ref.getDownloadURL();case 16:r=e.sent;case 17:return l={text:i,createdAt:Date.now(),creatorId:n.uid,attachmentUrl:r},e.next=20,sM.collection("nweets").add(l);case 20:a(""),c("");case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,lM.jsxs)("form",{onSubmit:l,className:"factoryForm",children:[(0,lM.jsxs)("div",{className:"factoryInput__container",children:[(0,lM.jsx)("input",{className:"factoryInput__input",value:i,onChange:function(e){var t=e.target.value;a(t)},type:"text",placeholder:"What's on your mind?",maxLength:120}),(0,lM.jsx)("input",{type:"submit",value:"\u2192",className:"factoryInput__arrow"})]}),(0,lM.jsxs)("label",{for:"attach-file",className:"factoryInput__label",children:[(0,lM.jsx)("span",{children:"Add photos"}),(0,lM.jsx)(aU,{icon:dU})]}),(0,lM.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0];console.log(t);var n=new FileReader;n.onloadend=function(e){console.log(e);var t=e.currentTarget.result;c(t)},n.readAsDataURL(t)},style:{opacity:0}}),u&&(0,lM.jsxs)("div",{className:"factoryForm__attachment",children:[(0,lM.jsx)("img",{src:u,style:{backgroundImage:u}}),(0,lM.jsxs)("div",{className:"factoryForm__clear",onClick:function(){return c("")},children:[(0,lM.jsx)("span",{children:"Remove"}),(0,lM.jsx)(aU,{icon:pU})]})]})]})},IU=function(e){var n=e.userObject,r=s((0,t.useState)([]),2),i=r[0],a=r[1];return(0,t.useEffect)((function(){sM.collection("nweets").onSnapshot((function(e){var t=e.docs.map((function(e){return Ze({id:e.id},e.data())}));a(t)}))}),[]),(0,lM.jsxs)("div",{className:"container",children:[(0,lM.jsx)(EU,{userObject:n}),(0,lM.jsx)("div",{style:{marginTop:30},children:i.map((function(e){return(0,lM.jsx)(mU,{nweetObject:e,isOwner:e.creatorId===n.uid},e.id)}))})]})},CU=n(25),SU=function(e){var t=e.userObject;return(0,lM.jsx)(lM.Fragment,{children:(0,lM.jsx)("nav",{children:(0,lM.jsxs)("ul",{style:{display:"flex",justifyContent:"center",marginTop:50},children:[(0,lM.jsx)("li",{children:(0,lM.jsx)(CU.rU,{to:"/",style:{marginRight:10},children:(0,lM.jsx)(aU,{icon:lU,color:"#04AAFF",size:"2x"})})}),(0,lM.jsx)("li",{children:(0,lM.jsxs)(CU.rU,{to:"/profile",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:[(0,lM.jsx)(aU,{icon:yU,color:"#04AAFF",size:"2x"}),(0,lM.jsx)("span",{style:{marginTop:10},children:t.displayName?"".concat(t.displayName,"\uc758 Profile"):"Profile"})]})})]})})})},PU=n(542),AU=function(e){var n=e.refreshUser,r=e.userObject,i=(0,PU.k6)(),a=s((0,t.useState)(r.displayName),2),o=a[0],u=a[1],c=function(){var e=C(E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sM.collection("nweets").where("creatorId","==",r.uid).orderBy("createdAt").get();case 2:t=e.sent,console.log(t.docs.map((function(e){return e.data()})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=C(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log(r),r.displayName===o){e.next=6;break}return e.next=5,r.updateProfile({displayName:o});case 5:n();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,t.useEffect)((function(){c()}),[]),(0,lM.jsxs)("div",{className:"container",children:[(0,lM.jsxs)("form",{onSubmit:l,className:"profileForm",children:[(0,lM.jsx)("input",{type:"text",autoFocus:!0,onChange:function(e){var t=e.target.value;u(t)},placeholder:"Display Name",value:o,className:"formInput"}),(0,lM.jsx)("input",{type:"submit",value:"Update Profile",className:"formBtn",style:{marginTop:10}})]}),(0,lM.jsx)("span",{className:"formBtn cancelBtn logOut",onClick:function(){uM.signOut(),i.push("/")},children:"Log Out"})]})},NU=function(e){var t=e.refreshUser,n=e.isLoggedIn,r=e.userObject;return(0,lM.jsxs)(v,{children:[n&&(0,lM.jsx)(SU,{userObject:r}),(0,lM.jsx)(c.Switch,{children:n?(0,lM.jsxs)("div",{style:{maxWidth:890,width:"100%",margin:"0 auto",marginTop:80,display:"flex",justifyContent:"center"},children:[(0,lM.jsx)(c.Route,{exact:!0,path:"/",children:(0,lM.jsx)(IU,{userObject:r})}),(0,lM.jsx)(c.Route,{exact:!0,path:"/profile",children:(0,lM.jsx)(AU,{userObject:r,refreshUser:t})})]}):(0,lM.jsx)(lM.Fragment,{children:(0,lM.jsx)(c.Route,{exact:!0,path:"/",children:(0,lM.jsx)(fU,{})})})})]})};var RU=function(){var e=s((0,t.useState)(!1),2),n=e[0],r=e[1],i=s((0,t.useState)(null),2),a=i[0],o=i[1];return(0,t.useEffect)((function(){uM.onAuthStateChanged((function(e){if(e){if(null===e.displayName){var t=e.email.split("@")[0];e.updateProfile({displayName:t})}o({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})}else o(null);r(!0)}))}),[]),(0,lM.jsx)(lM.Fragment,{children:n?(0,lM.jsx)(NU,{refreshUser:function(){var e=uM.currentUser;o({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})},isLoggedIn:a,userObject:a}):"Initializing..."})};r.render((0,lM.jsx)(t.StrictMode,{children:(0,lM.jsx)(RU,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.4c0f41b5.js.map